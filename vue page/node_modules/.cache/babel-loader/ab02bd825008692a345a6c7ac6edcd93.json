{"remainingRequest":"D:\\网页\\网页8.6\\node_modules\\babel-loader\\lib\\index.js!D:\\网页\\网页8.6\\src\\plugins\\axios.js","dependencies":[{"path":"D:\\网页\\网页8.6\\src\\plugins\\axios.js","mtime":1657374635000},{"path":"D:\\网页\\网页8.6\\babel.config.js","mtime":1656506103917},{"path":"D:\\网页\\网页8.6\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\网页\\网页8.6\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmF0LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2V0LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXNuZXh0LnR5cGVkLWFycmF5LmZpbmQtbGFzdC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC50eXBlZC1hcnJheS5maW5kLWxhc3QtaW5kZXguanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5lcnJvci5jYXVzZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC1hbGwuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWV4Y2VwdGlvbi5zdGFjay5qcyIpOwoKLy8gYXhpb3MgdjEuMC4wLWFscGhhLjEgQ29weXJpZ2h0IChjKSAyMDIyIE1hdHQgWmFicmlza2llCihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7CiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOiB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOiAoZ2xvYmFsID0gdHlwZW9mIGdsb2JhbFRoaXMgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsVGhpcyA6IGdsb2JhbCB8fCBzZWxmLCBnbG9iYWwuYXhpb3MgPSBmYWN0b3J5KCkpOwp9KSh0aGlzLCBmdW5jdGlvbiAoKSB7CiAgJ3VzZSBzdHJpY3QnOwoKICB2YXIgYmluZCA9IGZ1bmN0aW9uIGJpbmQoZm4sIHRoaXNBcmcpIHsKICAgIHJldHVybiBmdW5jdGlvbiB3cmFwKCkgewogICAgICByZXR1cm4gZm4uYXBwbHkodGhpc0FyZywgYXJndW1lbnRzKTsKICAgIH07CiAgfTsgLy8gdXRpbHMgaXMgYSBsaWJyYXJ5IG9mIGdlbmVyaWMgaGVscGVyIGZ1bmN0aW9ucyBub24tc3BlY2lmaWMgdG8gYXhpb3MKCgogIHZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzCgogIHZhciBraW5kT2YgPSBmdW5jdGlvbiAoY2FjaGUpIHsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzCiAgICByZXR1cm4gZnVuY3Rpb24gKHRoaW5nKSB7CiAgICAgIHZhciBzdHIgPSB0b1N0cmluZy5jYWxsKHRoaW5nKTsKICAgICAgcmV0dXJuIGNhY2hlW3N0cl0gfHwgKGNhY2hlW3N0cl0gPSBzdHIuc2xpY2UoOCwgLTEpLnRvTG93ZXJDYXNlKCkpOwogICAgfTsKICB9KE9iamVjdC5jcmVhdGUobnVsbCkpOwoKICBmdW5jdGlvbiBraW5kT2ZUZXN0KHR5cGUpIHsKICAgIHR5cGUgPSB0eXBlLnRvTG93ZXJDYXNlKCk7CiAgICByZXR1cm4gZnVuY3Rpb24gaXNLaW5kT2YodGhpbmcpIHsKICAgICAgcmV0dXJuIGtpbmRPZih0aGluZykgPT09IHR5cGU7CiAgICB9OwogIH0KICAvKioKICAgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheQogICAqCiAgICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdAogICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5LCBvdGhlcndpc2UgZmFsc2UKICAgKi8KCgogIGZ1bmN0aW9uIGlzQXJyYXkodmFsKSB7CiAgICByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWwpOwogIH0KICAvKioKICAgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyB1bmRlZmluZWQKICAgKgogICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgdW5kZWZpbmVkLCBvdGhlcndpc2UgZmFsc2UKICAgKi8KCgogIGZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbCkgewogICAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnOwogIH0KICAvKioKICAgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEJ1ZmZlcgogICAqCiAgICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdAogICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQnVmZmVyLCBvdGhlcndpc2UgZmFsc2UKICAgKi8KCgogIGZ1bmN0aW9uIGlzQnVmZmVyKHZhbCkgewogICAgcmV0dXJuIHZhbCAhPT0gbnVsbCAmJiAhaXNVbmRlZmluZWQodmFsKSAmJiB2YWwuY29uc3RydWN0b3IgIT09IG51bGwgJiYgIWlzVW5kZWZpbmVkKHZhbC5jb25zdHJ1Y3RvcikgJiYgdHlwZW9mIHZhbC5jb25zdHJ1Y3Rvci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJiB2YWwuY29uc3RydWN0b3IuaXNCdWZmZXIodmFsKTsKICB9CiAgLyoqCiAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gQXJyYXlCdWZmZXIKICAgKgogICAqIEBmdW5jdGlvbgogICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlCiAgICovCgoKICB2YXIgaXNBcnJheUJ1ZmZlciA9IGtpbmRPZlRlc3QoJ0FycmF5QnVmZmVyJyk7CiAgLyoqCiAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyCiAgICoKICAgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0CiAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2UKICAgKi8KCiAgZnVuY3Rpb24gaXNBcnJheUJ1ZmZlclZpZXcodmFsKSB7CiAgICB2YXIgcmVzdWx0OwoKICAgIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIEFycmF5QnVmZmVyLmlzVmlldykgewogICAgICByZXN1bHQgPSBBcnJheUJ1ZmZlci5pc1ZpZXcodmFsKTsKICAgIH0gZWxzZSB7CiAgICAgIHJlc3VsdCA9IHZhbCAmJiB2YWwuYnVmZmVyICYmIGlzQXJyYXlCdWZmZXIodmFsLmJ1ZmZlcik7CiAgICB9CgogICAgcmV0dXJuIHJlc3VsdDsKICB9CiAgLyoqCiAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBTdHJpbmcKICAgKgogICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmluZywgb3RoZXJ3aXNlIGZhbHNlCiAgICovCgoKICBmdW5jdGlvbiBpc1N0cmluZyh2YWwpIHsKICAgIHJldHVybiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJzsKICB9CiAgLyoqCiAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBOdW1iZXIKICAgKgogICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIE51bWJlciwgb3RoZXJ3aXNlIGZhbHNlCiAgICovCgoKICBmdW5jdGlvbiBpc051bWJlcih2YWwpIHsKICAgIHJldHVybiB0eXBlb2YgdmFsID09PSAnbnVtYmVyJzsKICB9CiAgLyoqCiAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gT2JqZWN0CiAgICoKICAgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0CiAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gT2JqZWN0LCBvdGhlcndpc2UgZmFsc2UKICAgKi8KCgogIGZ1bmN0aW9uIGlzT2JqZWN0KHZhbCkgewogICAgcmV0dXJuIHZhbCAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0JzsKICB9CiAgLyoqCiAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBwbGFpbiBPYmplY3QKICAgKgogICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgcGxhaW4gT2JqZWN0LCBvdGhlcndpc2UgZmFsc2UKICAgKi8KCgogIGZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsKSB7CiAgICBpZiAoa2luZE9mKHZhbCkgIT09ICdvYmplY3QnKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICB2YXIgcHJvdG90eXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbCk7CiAgICByZXR1cm4gcHJvdG90eXBlID09PSBudWxsIHx8IHByb3RvdHlwZSA9PT0gT2JqZWN0LnByb3RvdHlwZTsKICB9CiAgLyoqCiAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBEYXRlCiAgICoKICAgKiBAZnVuY3Rpb24KICAgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0CiAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBEYXRlLCBvdGhlcndpc2UgZmFsc2UKICAgKi8KCgogIHZhciBpc0RhdGUgPSBraW5kT2ZUZXN0KCdEYXRlJyk7CiAgLyoqCiAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGaWxlCiAgICoKICAgKiBAZnVuY3Rpb24KICAgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0CiAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGaWxlLCBvdGhlcndpc2UgZmFsc2UKICAgKi8KCiAgdmFyIGlzRmlsZSA9IGtpbmRPZlRlc3QoJ0ZpbGUnKTsKICAvKioKICAgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEJsb2IKICAgKgogICAqIEBmdW5jdGlvbgogICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEJsb2IsIG90aGVyd2lzZSBmYWxzZQogICAqLwoKICB2YXIgaXNCbG9iID0ga2luZE9mVGVzdCgnQmxvYicpOwogIC8qKgogICAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRmlsZUxpc3QKICAgKgogICAqIEBmdW5jdGlvbgogICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZpbGUsIG90aGVyd2lzZSBmYWxzZQogICAqLwoKICB2YXIgaXNGaWxlTGlzdCA9IGtpbmRPZlRlc3QoJ0ZpbGVMaXN0Jyk7CiAgLyoqCiAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGdW5jdGlvbgogICAqCiAgICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdAogICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRnVuY3Rpb24sIG90aGVyd2lzZSBmYWxzZQogICAqLwoKICBmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbCkgewogICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJzsKICB9CiAgLyoqCiAgICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBTdHJlYW0KICAgKgogICAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3QKICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmVhbSwgb3RoZXJ3aXNlIGZhbHNlCiAgICovCgoKICBmdW5jdGlvbiBpc1N0cmVhbSh2YWwpIHsKICAgIHJldHVybiBpc09iamVjdCh2YWwpICYmIGlzRnVuY3Rpb24odmFsLnBpcGUpOwogIH0KICAvKioKICAgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZvcm1EYXRhCiAgICoKICAgKiBAcGFyYW0ge09iamVjdH0gdGhpbmcgVGhlIHZhbHVlIHRvIHRlc3QKICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBGb3JtRGF0YSwgb3RoZXJ3aXNlIGZhbHNlCiAgICovCgoKICBmdW5jdGlvbiBpc0Zvcm1EYXRhKHRoaW5nKSB7CiAgICB2YXIgcGF0dGVybiA9ICdbb2JqZWN0IEZvcm1EYXRhXSc7CiAgICByZXR1cm4gdGhpbmcgJiYgKHR5cGVvZiBGb3JtRGF0YSA9PT0gJ2Z1bmN0aW9uJyAmJiB0aGluZyBpbnN0YW5jZW9mIEZvcm1EYXRhIHx8IHRvU3RyaW5nLmNhbGwodGhpbmcpID09PSBwYXR0ZXJuIHx8IGlzRnVuY3Rpb24odGhpbmcudG9TdHJpbmcpICYmIHRoaW5nLnRvU3RyaW5nKCkgPT09IHBhdHRlcm4pOwogIH0KICAvKioKICAgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3QKICAgKiBAZnVuY3Rpb24KICAgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0CiAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBVUkxTZWFyY2hQYXJhbXMgb2JqZWN0LCBvdGhlcndpc2UgZmFsc2UKICAgKi8KCgogIHZhciBpc1VSTFNlYXJjaFBhcmFtcyA9IGtpbmRPZlRlc3QoJ1VSTFNlYXJjaFBhcmFtcycpOwogIC8qKgogICAqIFRyaW0gZXhjZXNzIHdoaXRlc3BhY2Ugb2ZmIHRoZSBiZWdpbm5pbmcgYW5kIGVuZCBvZiBhIHN0cmluZwogICAqCiAgICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgU3RyaW5nIHRvIHRyaW0KICAgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgU3RyaW5nIGZyZWVkIG9mIGV4Y2VzcyB3aGl0ZXNwYWNlCiAgICovCgogIGZ1bmN0aW9uIHRyaW0oc3RyKSB7CiAgICByZXR1cm4gc3RyLnRyaW0gPyBzdHIudHJpbSgpIDogc3RyLnJlcGxhY2UoL15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nLCAnJyk7CiAgfQogIC8qKgogICAqIERldGVybWluZSBpZiB3ZSdyZSBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciBlbnZpcm9ubWVudAogICAqCiAgICogVGhpcyBhbGxvd3MgYXhpb3MgdG8gcnVuIGluIGEgd2ViIHdvcmtlciwgYW5kIHJlYWN0LW5hdGl2ZS4KICAgKiBCb3RoIGVudmlyb25tZW50cyBzdXBwb3J0IFhNTEh0dHBSZXF1ZXN0LCBidXQgbm90IGZ1bGx5IHN0YW5kYXJkIGdsb2JhbHMuCiAgICoKICAgKiB3ZWIgd29ya2VyczoKICAgKiAgdHlwZW9mIHdpbmRvdyAtPiB1bmRlZmluZWQKICAgKiAgdHlwZW9mIGRvY3VtZW50IC0+IHVuZGVmaW5lZAogICAqCiAgICogcmVhY3QtbmF0aXZlOgogICAqICBuYXZpZ2F0b3IucHJvZHVjdCAtPiAnUmVhY3ROYXRpdmUnCiAgICogbmF0aXZlc2NyaXB0CiAgICogIG5hdmlnYXRvci5wcm9kdWN0IC0+ICdOYXRpdmVTY3JpcHQnIG9yICdOUycKICAgKi8KCgogIGZ1bmN0aW9uIGlzU3RhbmRhcmRCcm93c2VyRW52KCkgewogICAgdmFyIHByb2R1Y3Q7CgogICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmICgocHJvZHVjdCA9IG5hdmlnYXRvci5wcm9kdWN0KSA9PT0gJ1JlYWN0TmF0aXZlJyB8fCBwcm9kdWN0ID09PSAnTmF0aXZlU2NyaXB0JyB8fCBwcm9kdWN0ID09PSAnTlMnKSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcmV0dXJuIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCc7CiAgfQogIC8qKgogICAqIEl0ZXJhdGUgb3ZlciBhbiBBcnJheSBvciBhbiBPYmplY3QgaW52b2tpbmcgYSBmdW5jdGlvbiBmb3IgZWFjaCBpdGVtLgogICAqCiAgICogSWYgYG9iamAgaXMgYW4gQXJyYXkgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgcGFzc2luZwogICAqIHRoZSB2YWx1ZSwgaW5kZXgsIGFuZCBjb21wbGV0ZSBhcnJheSBmb3IgZWFjaCBpdGVtLgogICAqCiAgICogSWYgJ29iaicgaXMgYW4gT2JqZWN0IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3NpbmcKICAgKiB0aGUgdmFsdWUsIGtleSwgYW5kIGNvbXBsZXRlIG9iamVjdCBmb3IgZWFjaCBwcm9wZXJ0eS4KICAgKgogICAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBvYmogVGhlIG9iamVjdCB0byBpdGVyYXRlCiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGNhbGxiYWNrIHRvIGludm9rZSBmb3IgZWFjaCBpdGVtCiAgICovCgoKICBmdW5jdGlvbiBmb3JFYWNoKG9iaiwgZm4pIHsKICAgIC8vIERvbid0IGJvdGhlciBpZiBubyB2YWx1ZSBwcm92aWRlZAogICAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJykgewogICAgICByZXR1cm47CiAgICB9IC8vIEZvcmNlIGFuIGFycmF5IGlmIG5vdCBhbHJlYWR5IHNvbWV0aGluZyBpdGVyYWJsZQoKCiAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHsKICAgICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovCiAgICAgIG9iaiA9IFtvYmpdOwogICAgfQoKICAgIGlmIChpc0FycmF5KG9iaikpIHsKICAgICAgLy8gSXRlcmF0ZSBvdmVyIGFycmF5IHZhbHVlcwogICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG9iai5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICBmbi5jYWxsKG51bGwsIG9ialtpXSwgaSwgb2JqKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgLy8gSXRlcmF0ZSBvdmVyIG9iamVjdCBrZXlzCiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgewogICAgICAgICAgZm4uY2FsbChudWxsLCBvYmpba2V5XSwga2V5LCBvYmopOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KICAvKioKICAgKiBBY2NlcHRzIHZhcmFyZ3MgZXhwZWN0aW5nIGVhY2ggYXJndW1lbnQgdG8gYmUgYW4gb2JqZWN0LCB0aGVuCiAgICogaW1tdXRhYmx5IG1lcmdlcyB0aGUgcHJvcGVydGllcyBvZiBlYWNoIG9iamVjdCBhbmQgcmV0dXJucyByZXN1bHQuCiAgICoKICAgKiBXaGVuIG11bHRpcGxlIG9iamVjdHMgY29udGFpbiB0aGUgc2FtZSBrZXkgdGhlIGxhdGVyIG9iamVjdCBpbgogICAqIHRoZSBhcmd1bWVudHMgbGlzdCB3aWxsIHRha2UgcHJlY2VkZW5jZS4KICAgKgogICAqIEV4YW1wbGU6CiAgICoKICAgKiBgYGBqcwogICAqIHZhciByZXN1bHQgPSBtZXJnZSh7Zm9vOiAxMjN9LCB7Zm9vOiA0NTZ9KTsKICAgKiBjb25zb2xlLmxvZyhyZXN1bHQuZm9vKTsgLy8gb3V0cHV0cyA0NTYKICAgKiBgYGAKICAgKgogICAqIEBwYXJhbSB7T2JqZWN0fSBvYmoxIE9iamVjdCB0byBtZXJnZQogICAqIEByZXR1cm5zIHtPYmplY3R9IFJlc3VsdCBvZiBhbGwgbWVyZ2UgcHJvcGVydGllcwogICAqLwoKCiAgZnVuY3Rpb24KICAgIC8qIG9iajEsIG9iajIsIG9iajMsIC4uLiAqLwogIG1lcmdlKCkgewogICAgdmFyIHJlc3VsdCA9IHt9OwoKICAgIGZ1bmN0aW9uIGFzc2lnblZhbHVlKHZhbCwga2V5KSB7CiAgICAgIGlmIChpc1BsYWluT2JqZWN0KHJlc3VsdFtrZXldKSAmJiBpc1BsYWluT2JqZWN0KHZhbCkpIHsKICAgICAgICByZXN1bHRba2V5XSA9IG1lcmdlKHJlc3VsdFtrZXldLCB2YWwpOwogICAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QodmFsKSkgewogICAgICAgIHJlc3VsdFtrZXldID0gbWVyZ2Uoe30sIHZhbCk7CiAgICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWwpKSB7CiAgICAgICAgcmVzdWx0W2tleV0gPSB2YWwuc2xpY2UoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXN1bHRba2V5XSA9IHZhbDsKICAgICAgfQogICAgfQoKICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICBmb3JFYWNoKGFyZ3VtZW50c1tpXSwgYXNzaWduVmFsdWUpOwogICAgfQoKICAgIHJldHVybiByZXN1bHQ7CiAgfQogIC8qKgogICAqIEV4dGVuZHMgb2JqZWN0IGEgYnkgbXV0YWJseSBhZGRpbmcgdG8gaXQgdGhlIHByb3BlcnRpZXMgb2Ygb2JqZWN0IGIuCiAgICoKICAgKiBAcGFyYW0ge09iamVjdH0gYSBUaGUgb2JqZWN0IHRvIGJlIGV4dGVuZGVkCiAgICogQHBhcmFtIHtPYmplY3R9IGIgVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgZnJvbQogICAqIEBwYXJhbSB7T2JqZWN0fSB0aGlzQXJnIFRoZSBvYmplY3QgdG8gYmluZCBmdW5jdGlvbiB0bwogICAqIEByZXR1cm4ge09iamVjdH0gVGhlIHJlc3VsdGluZyB2YWx1ZSBvZiBvYmplY3QgYQogICAqLwoKCiAgZnVuY3Rpb24gZXh0ZW5kKGEsIGIsIHRoaXNBcmcpIHsKICAgIGZvckVhY2goYiwgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHsKICAgICAgaWYgKHRoaXNBcmcgJiYgdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIGFba2V5XSA9IGJpbmQodmFsLCB0aGlzQXJnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhW2tleV0gPSB2YWw7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIGE7CiAgfQogIC8qKgogICAqIFJlbW92ZSBieXRlIG9yZGVyIG1hcmtlci4gVGhpcyBjYXRjaGVzIEVGIEJCIEJGICh0aGUgVVRGLTggQk9NKQogICAqCiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbnRlbnQgd2l0aCBCT00KICAgKiBAcmV0dXJuIHtzdHJpbmd9IGNvbnRlbnQgdmFsdWUgd2l0aG91dCBCT00KICAgKi8KCgogIGZ1bmN0aW9uIHN0cmlwQk9NKGNvbnRlbnQpIHsKICAgIGlmIChjb250ZW50LmNoYXJDb2RlQXQoMCkgPT09IDB4RkVGRikgewogICAgICBjb250ZW50ID0gY29udGVudC5zbGljZSgxKTsKICAgIH0KCiAgICByZXR1cm4gY29udGVudDsKICB9CiAgLyoqCiAgICogSW5oZXJpdCB0aGUgcHJvdG90eXBlIG1ldGhvZHMgZnJvbSBvbmUgY29uc3RydWN0b3IgaW50byBhbm90aGVyCiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY29uc3RydWN0b3IKICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBzdXBlckNvbnN0cnVjdG9yCiAgICogQHBhcmFtIHtvYmplY3R9IFtwcm9wc10KICAgKiBAcGFyYW0ge29iamVjdH0gW2Rlc2NyaXB0b3JzXQogICAqLwoKCiAgZnVuY3Rpb24gaW5oZXJpdHMoY29uc3RydWN0b3IsIHN1cGVyQ29uc3RydWN0b3IsIHByb3BzLCBkZXNjcmlwdG9ycykgewogICAgY29uc3RydWN0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNvbnN0cnVjdG9yLnByb3RvdHlwZSwgZGVzY3JpcHRvcnMpOwogICAgY29uc3RydWN0b3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gY29uc3RydWN0b3I7CiAgICBwcm9wcyAmJiBPYmplY3QuYXNzaWduKGNvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvcHMpOwogIH0KICAvKioKICAgKiBSZXNvbHZlIG9iamVjdCB3aXRoIGRlZXAgcHJvdG90eXBlIGNoYWluIHRvIGEgZmxhdCBvYmplY3QKICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlT2JqIHNvdXJjZSBvYmplY3QKICAgKiBAcGFyYW0ge09iamVjdH0gW2Rlc3RPYmpdCiAgICogQHBhcmFtIHtGdW5jdGlvbnxCb29sZWFufSBbZmlsdGVyXQogICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwcm9wRmlsdGVyXQogICAqIEByZXR1cm5zIHtPYmplY3R9CiAgICovCgoKICBmdW5jdGlvbiB0b0ZsYXRPYmplY3Qoc291cmNlT2JqLCBkZXN0T2JqLCBmaWx0ZXIsIHByb3BGaWx0ZXIpIHsKICAgIHZhciBwcm9wczsKICAgIHZhciBpOwogICAgdmFyIHByb3A7CiAgICB2YXIgbWVyZ2VkID0ge307CiAgICBkZXN0T2JqID0gZGVzdE9iaiB8fCB7fTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVxLW51bGwsZXFlcWVxCgogICAgaWYgKHNvdXJjZU9iaiA9PSBudWxsKSByZXR1cm4gZGVzdE9iajsKCiAgICBkbyB7CiAgICAgIHByb3BzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoc291cmNlT2JqKTsKICAgICAgaSA9IHByb3BzLmxlbmd0aDsKCiAgICAgIHdoaWxlIChpLS0gPiAwKSB7CiAgICAgICAgcHJvcCA9IHByb3BzW2ldOwoKICAgICAgICBpZiAoKCFwcm9wRmlsdGVyIHx8IHByb3BGaWx0ZXIocHJvcCwgc291cmNlT2JqLCBkZXN0T2JqKSkgJiYgIW1lcmdlZFtwcm9wXSkgewogICAgICAgICAgZGVzdE9ialtwcm9wXSA9IHNvdXJjZU9ialtwcm9wXTsKICAgICAgICAgIG1lcmdlZFtwcm9wXSA9IHRydWU7CiAgICAgICAgfQogICAgICB9CgogICAgICBzb3VyY2VPYmogPSBmaWx0ZXIgIT09IGZhbHNlICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihzb3VyY2VPYmopOwogICAgfSB3aGlsZSAoc291cmNlT2JqICYmICghZmlsdGVyIHx8IGZpbHRlcihzb3VyY2VPYmosIGRlc3RPYmopKSAmJiBzb3VyY2VPYmogIT09IE9iamVjdC5wcm90b3R5cGUpOwoKICAgIHJldHVybiBkZXN0T2JqOwogIH0KICAvKgogICAqIGRldGVybWluZXMgd2hldGhlciBhIHN0cmluZyBlbmRzIHdpdGggdGhlIGNoYXJhY3RlcnMgb2YgYSBzcGVjaWZpZWQgc3RyaW5nCiAgICogQHBhcmFtIHtTdHJpbmd9IHN0cgogICAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hTdHJpbmcKICAgKiBAcGFyYW0ge051bWJlcn0gW3Bvc2l0aW9uPSAwXQogICAqIEByZXR1cm5zIHtib29sZWFufQogICAqLwoKCiAgZnVuY3Rpb24gZW5kc1dpdGgoc3RyLCBzZWFyY2hTdHJpbmcsIHBvc2l0aW9uKSB7CiAgICBzdHIgPSBTdHJpbmcoc3RyKTsKCiAgICBpZiAocG9zaXRpb24gPT09IHVuZGVmaW5lZCB8fCBwb3NpdGlvbiA+IHN0ci5sZW5ndGgpIHsKICAgICAgcG9zaXRpb24gPSBzdHIubGVuZ3RoOwogICAgfQoKICAgIHBvc2l0aW9uIC09IHNlYXJjaFN0cmluZy5sZW5ndGg7CiAgICB2YXIgbGFzdEluZGV4ID0gc3RyLmluZGV4T2Yoc2VhcmNoU3RyaW5nLCBwb3NpdGlvbik7CiAgICByZXR1cm4gbGFzdEluZGV4ICE9PSAtMSAmJiBsYXN0SW5kZXggPT09IHBvc2l0aW9uOwogIH0KICAvKioKICAgKiBSZXR1cm5zIG5ldyBhcnJheSBmcm9tIGFycmF5IGxpa2Ugb2JqZWN0IG9yIG51bGwgaWYgZmFpbGVkCiAgICogQHBhcmFtIHsqfSBbdGhpbmddCiAgICogQHJldHVybnMgez9BcnJheX0KICAgKi8KCgogIGZ1bmN0aW9uIHRvQXJyYXkodGhpbmcpIHsKICAgIGlmICghdGhpbmcpIHJldHVybiBudWxsOwogICAgaWYgKGlzQXJyYXkodGhpbmcpKSByZXR1cm4gdGhpbmc7CiAgICB2YXIgaSA9IHRoaW5nLmxlbmd0aDsKICAgIGlmICghaXNOdW1iZXIoaSkpIHJldHVybiBudWxsOwogICAgdmFyIGFyciA9IG5ldyBBcnJheShpKTsKCiAgICB3aGlsZSAoaS0tID4gMCkgewogICAgICBhcnJbaV0gPSB0aGluZ1tpXTsKICAgIH0KCiAgICByZXR1cm4gYXJyOwogIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXMKCgogIHZhciBpc1R5cGVkQXJyYXkgPSBmdW5jdGlvbiAoVHlwZWRBcnJheSkgewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXMKICAgIHJldHVybiBmdW5jdGlvbiAodGhpbmcpIHsKICAgICAgcmV0dXJuIFR5cGVkQXJyYXkgJiYgdGhpbmcgaW5zdGFuY2VvZiBUeXBlZEFycmF5OwogICAgfTsKICB9KHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVWludDhBcnJheSkpOwoKICBmdW5jdGlvbiBmb3JFYWNoRW50cnkob2JqLCBmbikgewogICAgdmFyIGdlbmVyYXRvciA9IG9iaiAmJiBvYmpbU3ltYm9sLml0ZXJhdG9yXTsKICAgIHZhciBpdGVyYXRvciA9IGdlbmVyYXRvci5jYWxsKG9iaik7CiAgICB2YXIgcmVzdWx0OwoKICAgIHdoaWxlICgocmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpKSAmJiAhcmVzdWx0LmRvbmUpIHsKICAgICAgdmFyIHBhaXIgPSByZXN1bHQudmFsdWU7CiAgICAgIGZuLmNhbGwob2JqLCBwYWlyWzBdLCBwYWlyWzFdKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIG1hdGNoQWxsKHJlZ0V4cCwgc3RyKSB7CiAgICB2YXIgbWF0Y2hlczsKICAgIHZhciBhcnIgPSBbXTsKCiAgICB3aGlsZSAoKG1hdGNoZXMgPSByZWdFeHAuZXhlYyhzdHIpKSAhPT0gbnVsbCkgewogICAgICBhcnIucHVzaChtYXRjaGVzKTsKICAgIH0KCiAgICByZXR1cm4gYXJyOwogIH0KCiAgdmFyIGlzSFRNTEZvcm0gPSBraW5kT2ZUZXN0KCdIVE1MRm9ybUVsZW1lbnQnKTsKCiAgdmFyIGhhc093blByb3BlcnR5ID0gZnVuY3Rpb24gcmVzb2x2ZXIoX2hhc093blByb3BlcnR5KSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKG9iaiwgcHJvcCkgewogICAgICByZXR1cm4gX2hhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsKICAgIH07CiAgfShPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5KTsKCiAgdmFyIHV0aWxzID0gewogICAgaXNBcnJheTogaXNBcnJheSwKICAgIGlzQXJyYXlCdWZmZXI6IGlzQXJyYXlCdWZmZXIsCiAgICBpc0J1ZmZlcjogaXNCdWZmZXIsCiAgICBpc0Zvcm1EYXRhOiBpc0Zvcm1EYXRhLAogICAgaXNBcnJheUJ1ZmZlclZpZXc6IGlzQXJyYXlCdWZmZXJWaWV3LAogICAgaXNTdHJpbmc6IGlzU3RyaW5nLAogICAgaXNOdW1iZXI6IGlzTnVtYmVyLAogICAgaXNPYmplY3Q6IGlzT2JqZWN0LAogICAgaXNQbGFpbk9iamVjdDogaXNQbGFpbk9iamVjdCwKICAgIGlzVW5kZWZpbmVkOiBpc1VuZGVmaW5lZCwKICAgIGlzRGF0ZTogaXNEYXRlLAogICAgaXNGaWxlOiBpc0ZpbGUsCiAgICBpc0Jsb2I6IGlzQmxvYiwKICAgIGlzRnVuY3Rpb246IGlzRnVuY3Rpb24sCiAgICBpc1N0cmVhbTogaXNTdHJlYW0sCiAgICBpc1VSTFNlYXJjaFBhcmFtczogaXNVUkxTZWFyY2hQYXJhbXMsCiAgICBpc1N0YW5kYXJkQnJvd3NlckVudjogaXNTdGFuZGFyZEJyb3dzZXJFbnYsCiAgICBmb3JFYWNoOiBmb3JFYWNoLAogICAgbWVyZ2U6IG1lcmdlLAogICAgZXh0ZW5kOiBleHRlbmQsCiAgICB0cmltOiB0cmltLAogICAgc3RyaXBCT006IHN0cmlwQk9NLAogICAgaW5oZXJpdHM6IGluaGVyaXRzLAogICAgdG9GbGF0T2JqZWN0OiB0b0ZsYXRPYmplY3QsCiAgICBraW5kT2Y6IGtpbmRPZiwKICAgIGtpbmRPZlRlc3Q6IGtpbmRPZlRlc3QsCiAgICBlbmRzV2l0aDogZW5kc1dpdGgsCiAgICB0b0FycmF5OiB0b0FycmF5LAogICAgaXNUeXBlZEFycmF5OiBpc1R5cGVkQXJyYXksCiAgICBpc0ZpbGVMaXN0OiBpc0ZpbGVMaXN0LAogICAgZm9yRWFjaEVudHJ5OiBmb3JFYWNoRW50cnksCiAgICBtYXRjaEFsbDogbWF0Y2hBbGwsCiAgICBpc0hUTUxGb3JtOiBpc0hUTUxGb3JtLAogICAgaGFzT3duUHJvcGVydHk6IGhhc093blByb3BlcnR5CiAgfTsKICAvKioKICAgKiBDcmVhdGUgYW4gRXJyb3Igd2l0aCB0aGUgc3BlY2lmaWVkIG1lc3NhZ2UsIGNvbmZpZywgZXJyb3IgY29kZSwgcmVxdWVzdCBhbmQgcmVzcG9uc2UuCiAgICoKICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBUaGUgZXJyb3IgbWVzc2FnZS4KICAgKiBAcGFyYW0ge3N0cmluZ30gW2NvZGVdIFRoZSBlcnJvciBjb2RlIChmb3IgZXhhbXBsZSwgJ0VDT05OQUJPUlRFRCcpLgogICAqIEBwYXJhbSB7T2JqZWN0fSBbY29uZmlnXSBUaGUgY29uZmlnLgogICAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuCiAgICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLgogICAqIEByZXR1cm5zIHtFcnJvcn0gVGhlIGNyZWF0ZWQgZXJyb3IuCiAgICovCgogIGZ1bmN0aW9uIEF4aW9zRXJyb3IobWVzc2FnZSwgY29kZSwgY29uZmlnLCByZXF1ZXN0LCByZXNwb25zZSkgewogICAgRXJyb3IuY2FsbCh0aGlzKTsKCiAgICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHsKICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnN0YWNrID0gbmV3IEVycm9yKCkuc3RhY2s7CiAgICB9CgogICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKICAgIHRoaXMubmFtZSA9ICdBeGlvc0Vycm9yJzsKICAgIGNvZGUgJiYgKHRoaXMuY29kZSA9IGNvZGUpOwogICAgY29uZmlnICYmICh0aGlzLmNvbmZpZyA9IGNvbmZpZyk7CiAgICByZXF1ZXN0ICYmICh0aGlzLnJlcXVlc3QgPSByZXF1ZXN0KTsKICAgIHJlc3BvbnNlICYmICh0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2UpOwogIH0KCiAgdXRpbHMuaW5oZXJpdHMoQXhpb3NFcnJvciwgRXJyb3IsIHsKICAgIHRvSlNPTjogZnVuY3Rpb24gdG9KU09OKCkgewogICAgICByZXR1cm4gewogICAgICAgIC8vIFN0YW5kYXJkCiAgICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLAogICAgICAgIG5hbWU6IHRoaXMubmFtZSwKICAgICAgICAvLyBNaWNyb3NvZnQKICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbiwKICAgICAgICBudW1iZXI6IHRoaXMubnVtYmVyLAogICAgICAgIC8vIE1vemlsbGEKICAgICAgICBmaWxlTmFtZTogdGhpcy5maWxlTmFtZSwKICAgICAgICBsaW5lTnVtYmVyOiB0aGlzLmxpbmVOdW1iZXIsCiAgICAgICAgY29sdW1uTnVtYmVyOiB0aGlzLmNvbHVtbk51bWJlciwKICAgICAgICBzdGFjazogdGhpcy5zdGFjaywKICAgICAgICAvLyBBeGlvcwogICAgICAgIGNvbmZpZzogdGhpcy5jb25maWcsCiAgICAgICAgY29kZTogdGhpcy5jb2RlLAogICAgICAgIHN0YXR1czogdGhpcy5yZXNwb25zZSAmJiB0aGlzLnJlc3BvbnNlLnN0YXR1cyA/IHRoaXMucmVzcG9uc2Uuc3RhdHVzIDogbnVsbAogICAgICB9OwogICAgfQogIH0pOwogIHZhciBwcm90b3R5cGUkMSA9IEF4aW9zRXJyb3IucHJvdG90eXBlOwogIHZhciBkZXNjcmlwdG9ycyA9IHt9OwogIFsnRVJSX0JBRF9PUFRJT05fVkFMVUUnLCAnRVJSX0JBRF9PUFRJT04nLCAnRUNPTk5BQk9SVEVEJywgJ0VUSU1FRE9VVCcsICdFUlJfTkVUV09SSycsICdFUlJfRlJfVE9PX01BTllfUkVESVJFQ1RTJywgJ0VSUl9ERVBSRUNBVEVEJywgJ0VSUl9CQURfUkVTUE9OU0UnLCAnRVJSX0JBRF9SRVFVRVNUJywgJ0VSUl9DQU5DRUxFRCcsICdFUlJfTk9UX1NVUFBPUlQnLCAnRVJSX0lOVkFMSURfVVJMJyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lcwogIF0uZm9yRWFjaChmdW5jdGlvbiAoY29kZSkgewogICAgZGVzY3JpcHRvcnNbY29kZV0gPSB7CiAgICAgIHZhbHVlOiBjb2RlCiAgICB9OwogIH0pOwogIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEF4aW9zRXJyb3IsIGRlc2NyaXB0b3JzKTsKICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvdG90eXBlJDEsICdpc0F4aW9zRXJyb3InLCB7CiAgICB2YWx1ZTogdHJ1ZQogIH0pOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lcwoKICBBeGlvc0Vycm9yLmZyb20gPSBmdW5jdGlvbiAoZXJyb3IsIGNvZGUsIGNvbmZpZywgcmVxdWVzdCwgcmVzcG9uc2UsIGN1c3RvbVByb3BzKSB7CiAgICB2YXIgYXhpb3NFcnJvciA9IE9iamVjdC5jcmVhdGUocHJvdG90eXBlJDEpOwogICAgdXRpbHMudG9GbGF0T2JqZWN0KGVycm9yLCBheGlvc0Vycm9yLCBmdW5jdGlvbiBmaWx0ZXIob2JqKSB7CiAgICAgIHJldHVybiBvYmogIT09IEVycm9yLnByb3RvdHlwZTsKICAgIH0pOwogICAgQXhpb3NFcnJvci5jYWxsKGF4aW9zRXJyb3IsIGVycm9yLm1lc3NhZ2UsIGNvZGUsIGNvbmZpZywgcmVxdWVzdCwgcmVzcG9uc2UpOwogICAgYXhpb3NFcnJvci5jYXVzZSA9IGVycm9yOwogICAgYXhpb3NFcnJvci5uYW1lID0gZXJyb3IubmFtZTsKICAgIGN1c3RvbVByb3BzICYmIE9iamVjdC5hc3NpZ24oYXhpb3NFcnJvciwgY3VzdG9tUHJvcHMpOwogICAgcmV0dXJuIGF4aW9zRXJyb3I7CiAgfTsKCiAgdmFyIEF4aW9zRXJyb3JfMSA9IEF4aW9zRXJyb3I7CiAgLyogZXNsaW50LWVudiBicm93c2VyICovCgogIHZhciBicm93c2VyJDEgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyA/IHNlbGYuRm9ybURhdGEgOiB3aW5kb3cuRm9ybURhdGE7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBzdHJpY3QKCiAgdmFyIEZvcm1EYXRhJDEgPSBicm93c2VyJDE7CgogIGZ1bmN0aW9uIGlzVmlzaXRhYmxlKHRoaW5nKSB7CiAgICByZXR1cm4gdXRpbHMuaXNQbGFpbk9iamVjdCh0aGluZykgfHwgdXRpbHMuaXNBcnJheSh0aGluZyk7CiAgfQoKICBmdW5jdGlvbiByZW1vdmVCcmFja2V0cyhrZXkpIHsKICAgIHJldHVybiB1dGlscy5lbmRzV2l0aChrZXksICdbXScpID8ga2V5LnNsaWNlKDAsIC0yKSA6IGtleTsKICB9CgogIGZ1bmN0aW9uIHJlbmRlcktleShwYXRoLCBrZXksIGRvdHMpIHsKICAgIGlmICghcGF0aCkgcmV0dXJuIGtleTsKICAgIHJldHVybiBwYXRoLmNvbmNhdChrZXkpLm1hcChmdW5jdGlvbiBlYWNoKHRva2VuLCBpKSB7CiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbgogICAgICB0b2tlbiA9IHJlbW92ZUJyYWNrZXRzKHRva2VuKTsKICAgICAgcmV0dXJuICFkb3RzICYmIGkgPyAnWycgKyB0b2tlbiArICddJyA6IHRva2VuOwogICAgfSkuam9pbihkb3RzID8gJy4nIDogJycpOwogIH0KCiAgZnVuY3Rpb24gaXNGbGF0QXJyYXkoYXJyKSB7CiAgICByZXR1cm4gdXRpbHMuaXNBcnJheShhcnIpICYmICFhcnIuc29tZShpc1Zpc2l0YWJsZSk7CiAgfQoKICB2YXIgcHJlZGljYXRlcyA9IHV0aWxzLnRvRmxhdE9iamVjdCh1dGlscywge30sIG51bGwsIGZ1bmN0aW9uIGZpbHRlcihwcm9wKSB7CiAgICByZXR1cm4gL15pc1tBLVpdLy50ZXN0KHByb3ApOwogIH0pOwoKICBmdW5jdGlvbiBpc1NwZWNDb21wbGlhbnQodGhpbmcpIHsKICAgIHJldHVybiB0aGluZyAmJiB1dGlscy5pc0Z1bmN0aW9uKHRoaW5nLmFwcGVuZCkgJiYgdGhpbmdbU3ltYm9sLnRvU3RyaW5nVGFnXSA9PT0gJ0Zvcm1EYXRhJyAmJiB0aGluZ1tTeW1ib2wuaXRlcmF0b3JdOwogIH0KICAvKioKICAgKiBDb252ZXJ0IGEgZGF0YSBvYmplY3QgdG8gRm9ybURhdGEKICAgKiBAcGFyYW0ge09iamVjdH0gb2JqCiAgICogQHBhcmFtIHs/T2JqZWN0fSBbZm9ybURhdGFdCiAgICogQHBhcmFtIHs/T2JqZWN0fSBbb3B0aW9uc10KICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0aW9ucy52aXNpdG9yXQogICAqIEBwYXJhbSB7Qm9vbGVhbn0gW29wdGlvbnMubWV0YVRva2VucyA9IHRydWVdCiAgICogQHBhcmFtIHtCb29sZWFufSBbb3B0aW9ucy5kb3RzID0gZmFsc2VdCiAgICogQHBhcmFtIHs/Qm9vbGVhbn0gW29wdGlvbnMuaW5kZXhlcyA9IGZhbHNlXQogICAqIEByZXR1cm5zIHtPYmplY3R9CiAgICoqLwoKCiAgZnVuY3Rpb24gdG9Gb3JtRGF0YShvYmosIGZvcm1EYXRhLCBvcHRpb25zKSB7CiAgICBpZiAoIXV0aWxzLmlzT2JqZWN0KG9iaikpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigndGFyZ2V0IG11c3QgYmUgYW4gb2JqZWN0Jyk7CiAgICB9IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbgoKCiAgICBmb3JtRGF0YSA9IGZvcm1EYXRhIHx8IG5ldyAoRm9ybURhdGEkMSB8fCBGb3JtRGF0YSkoKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduCgogICAgb3B0aW9ucyA9IHV0aWxzLnRvRmxhdE9iamVjdChvcHRpb25zLCB7CiAgICAgIG1ldGFUb2tlbnM6IHRydWUsCiAgICAgIGRvdHM6IGZhbHNlLAogICAgICBpbmRleGVzOiBmYWxzZQogICAgfSwgZmFsc2UsIGZ1bmN0aW9uIGRlZmluZWQob3B0aW9uLCBzb3VyY2UpIHsKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVxLW51bGwsZXFlcWVxCiAgICAgIHJldHVybiAhdXRpbHMuaXNVbmRlZmluZWQoc291cmNlW29wdGlvbl0pOwogICAgfSk7CiAgICB2YXIgbWV0YVRva2VucyA9IG9wdGlvbnMubWV0YVRva2VuczsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lCgogICAgdmFyIHZpc2l0b3IgPSBvcHRpb25zLnZpc2l0b3IgfHwgZGVmYXVsdFZpc2l0b3I7CiAgICB2YXIgZG90cyA9IG9wdGlvbnMuZG90czsKICAgIHZhciBpbmRleGVzID0gb3B0aW9ucy5pbmRleGVzOwoKICAgIHZhciBfQmxvYiA9IG9wdGlvbnMuQmxvYiB8fCB0eXBlb2YgQmxvYiAhPT0gJ3VuZGVmaW5lZCcgJiYgQmxvYjsKCiAgICB2YXIgdXNlQmxvYiA9IF9CbG9iICYmIGlzU3BlY0NvbXBsaWFudChmb3JtRGF0YSk7CgogICAgaWYgKCF1dGlscy5pc0Z1bmN0aW9uKHZpc2l0b3IpKSB7CiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3Zpc2l0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7CiAgICB9CgogICAgZnVuY3Rpb24gY29udmVydFZhbHVlKHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuICcnOwoKICAgICAgaWYgKHV0aWxzLmlzRGF0ZSh2YWx1ZSkpIHsKICAgICAgICByZXR1cm4gdmFsdWUudG9JU09TdHJpbmcoKTsKICAgICAgfQoKICAgICAgaWYgKCF1c2VCbG9iICYmIHV0aWxzLmlzQmxvYih2YWx1ZSkpIHsKICAgICAgICB0aHJvdyBuZXcgQXhpb3NFcnJvcl8xKCdCbG9iIGlzIG5vdCBzdXBwb3J0ZWQuIFVzZSBhIEJ1ZmZlciBpbnN0ZWFkLicpOwogICAgICB9CgogICAgICBpZiAodXRpbHMuaXNBcnJheUJ1ZmZlcih2YWx1ZSkgfHwgdXRpbHMuaXNUeXBlZEFycmF5KHZhbHVlKSkgewogICAgICAgIHJldHVybiB1c2VCbG9iICYmIHR5cGVvZiBCbG9iID09PSAnZnVuY3Rpb24nID8gbmV3IEJsb2IoW3ZhbHVlXSkgOiBCdWZmZXIuZnJvbSh2YWx1ZSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KICAgIC8qKgogICAgICoKICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUKICAgICAqIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0ga2V5CiAgICAgKiBAcGFyYW0ge0FycmF5PFN0cmluZ3xOdW1iZXI+fSBwYXRoCiAgICAgKiBAdGhpcyB7Rm9ybURhdGF9CiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gcmV0dXJuIHRydWUgdG8gdmlzaXQgdGhlIGVhY2ggcHJvcCBvZiB0aGUgdmFsdWUgcmVjdXJzaXZlbHkKICAgICAqLwoKCiAgICBmdW5jdGlvbiBkZWZhdWx0VmlzaXRvcih2YWx1ZSwga2V5LCBwYXRoKSB7CiAgICAgIHZhciBhcnIgPSB2YWx1ZTsKCiAgICAgIGlmICh2YWx1ZSAmJiAhcGF0aCAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7CiAgICAgICAgaWYgKHV0aWxzLmVuZHNXaXRoKGtleSwgJ3t9JykpIHsKICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbgogICAgICAgICAga2V5ID0gbWV0YVRva2VucyA/IGtleSA6IGtleS5zbGljZSgwLCAtMik7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbgoKICAgICAgICAgIHZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpOwogICAgICAgIH0gZWxzZSBpZiAodXRpbHMuaXNBcnJheSh2YWx1ZSkgJiYgaXNGbGF0QXJyYXkodmFsdWUpIHx8IHV0aWxzLmlzRmlsZUxpc3QodmFsdWUpIHx8IHV0aWxzLmVuZHNXaXRoKGtleSwgJ1tdJykgJiYgKGFyciA9IHV0aWxzLnRvQXJyYXkodmFsdWUpKSkgewogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduCiAgICAgICAgICBrZXkgPSByZW1vdmVCcmFja2V0cyhrZXkpOwogICAgICAgICAgYXJyLmZvckVhY2goZnVuY3Rpb24gZWFjaChlbCwgaW5kZXgpIHsKICAgICAgICAgICAgIXV0aWxzLmlzVW5kZWZpbmVkKGVsKSAmJiBmb3JtRGF0YS5hcHBlbmQoIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1uZXN0ZWQtdGVybmFyeQogICAgICAgICAgICBpbmRleGVzID09PSB0cnVlID8gcmVuZGVyS2V5KFtrZXldLCBpbmRleCwgZG90cykgOiBpbmRleGVzID09PSBudWxsID8ga2V5IDoga2V5ICsgJ1tdJywgY29udmVydFZhbHVlKGVsKSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChpc1Zpc2l0YWJsZSh2YWx1ZSkpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgZm9ybURhdGEuYXBwZW5kKHJlbmRlcktleShwYXRoLCBrZXksIGRvdHMpLCBjb252ZXJ0VmFsdWUodmFsdWUpKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHZhciBzdGFjayA9IFtdOwogICAgdmFyIGV4cG9zZWRIZWxwZXJzID0gT2JqZWN0LmFzc2lnbihwcmVkaWNhdGVzLCB7CiAgICAgIGRlZmF1bHRWaXNpdG9yOiBkZWZhdWx0VmlzaXRvciwKICAgICAgY29udmVydFZhbHVlOiBjb252ZXJ0VmFsdWUsCiAgICAgIGlzVmlzaXRhYmxlOiBpc1Zpc2l0YWJsZQogICAgfSk7CgogICAgZnVuY3Rpb24gYnVpbGQodmFsdWUsIHBhdGgpIHsKICAgICAgaWYgKHV0aWxzLmlzVW5kZWZpbmVkKHZhbHVlKSkgcmV0dXJuOwoKICAgICAgaWYgKHN0YWNrLmluZGV4T2YodmFsdWUpICE9PSAtMSkgewogICAgICAgIHRocm93IEVycm9yKCdDaXJjdWxhciByZWZlcmVuY2UgZGV0ZWN0ZWQgaW4gJyArIHBhdGguam9pbignLicpKTsKICAgICAgfQoKICAgICAgc3RhY2sucHVzaCh2YWx1ZSk7CiAgICAgIHV0aWxzLmZvckVhY2godmFsdWUsIGZ1bmN0aW9uIGVhY2goZWwsIGtleSkgewogICAgICAgIHZhciByZXN1bHQgPSAhdXRpbHMuaXNVbmRlZmluZWQoZWwpICYmIHZpc2l0b3IuY2FsbChmb3JtRGF0YSwgZWwsIHV0aWxzLmlzU3RyaW5nKGtleSkgPyBrZXkudHJpbSgpIDoga2V5LCBwYXRoLCBleHBvc2VkSGVscGVycyk7CgogICAgICAgIGlmIChyZXN1bHQgPT09IHRydWUpIHsKICAgICAgICAgIGJ1aWxkKGVsLCBwYXRoID8gcGF0aC5jb25jYXQoa2V5KSA6IFtrZXldKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBzdGFjay5wb3AoKTsKICAgIH0KCiAgICBpZiAoIXV0aWxzLmlzT2JqZWN0KG9iaikpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZGF0YSBtdXN0IGJlIGFuIG9iamVjdCcpOwogICAgfQoKICAgIGJ1aWxkKG9iaik7CiAgICByZXR1cm4gZm9ybURhdGE7CiAgfQoKICB2YXIgdG9Gb3JtRGF0YV8xID0gdG9Gb3JtRGF0YTsKCiAgZnVuY3Rpb24gZW5jb2RlJDEoc3RyKSB7CiAgICB2YXIgY2hhck1hcCA9IHsKICAgICAgJyEnOiAnJTIxJywKICAgICAgIiciOiAnJTI3JywKICAgICAgJygnOiAnJTI4JywKICAgICAgJyknOiAnJTI5JywKICAgICAgJ34nOiAnJTdFJywKICAgICAgJyUyMCc6ICcrJywKICAgICAgJyUwMCc6ICdceDAwJwogICAgfTsKICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoc3RyKS5yZXBsYWNlKC9bISdcKFwpfl18JTIwfCUwMC9nLCBmdW5jdGlvbiByZXBsYWNlcihtYXRjaCkgewogICAgICByZXR1cm4gY2hhck1hcFttYXRjaF07CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIEF4aW9zVVJMU2VhcmNoUGFyYW1zKHBhcmFtcywgb3B0aW9ucykgewogICAgdGhpcy5fcGFpcnMgPSBbXTsKICAgIHBhcmFtcyAmJiB0b0Zvcm1EYXRhXzEocGFyYW1zLCB0aGlzLCBvcHRpb25zKTsKICB9CgogIHZhciBwcm90b3R5cGUgPSBBeGlvc1VSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGU7CgogIHByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbiBhcHBlbmQobmFtZSwgdmFsdWUpIHsKICAgIHRoaXMuX3BhaXJzLnB1c2goW25hbWUsIHZhbHVlXSk7CiAgfTsKCiAgcHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoZW5jb2RlcikgewogICAgdmFyIF9lbmNvZGUgPSBlbmNvZGVyID8gZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIHJldHVybiBlbmNvZGVyLmNhbGwodGhpcywgdmFsdWUsIGVuY29kZSQxKTsKICAgIH0gOiBlbmNvZGUkMTsKCiAgICByZXR1cm4gdGhpcy5fcGFpcnMubWFwKGZ1bmN0aW9uIGVhY2gocGFpcikgewogICAgICByZXR1cm4gX2VuY29kZShwYWlyWzBdKSArICc9JyArIF9lbmNvZGUocGFpclsxXSk7CiAgICB9LCAnJykuam9pbignJicpOwogIH07CgogIHZhciBBeGlvc1VSTFNlYXJjaFBhcmFtc18xID0gQXhpb3NVUkxTZWFyY2hQYXJhbXM7CgogIGZ1bmN0aW9uIGVuY29kZSh2YWwpIHsKICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsKS5yZXBsYWNlKC8lM0EvZ2ksICc6JykucmVwbGFjZSgvJTI0L2csICckJykucmVwbGFjZSgvJTJDL2dpLCAnLCcpLnJlcGxhY2UoLyUyMC9nLCAnKycpLnJlcGxhY2UoLyU1Qi9naSwgJ1snKS5yZXBsYWNlKC8lNUQvZ2ksICddJyk7CiAgfQogIC8qKgogICAqIEJ1aWxkIGEgVVJMIGJ5IGFwcGVuZGluZyBwYXJhbXMgdG8gdGhlIGVuZAogICAqCiAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgYmFzZSBvZiB0aGUgdXJsIChlLmcuLCBodHRwOi8vd3d3Lmdvb2dsZS5jb20pCiAgICogQHBhcmFtIHtvYmplY3R9IFtwYXJhbXNdIFRoZSBwYXJhbXMgdG8gYmUgYXBwZW5kZWQKICAgKiBAcGFyYW0gez9vYmplY3R9IG9wdGlvbnMKICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIHVybAogICAqLwoKCiAgdmFyIGJ1aWxkVVJMID0gZnVuY3Rpb24gYnVpbGRVUkwodXJsLCBwYXJhbXMsIG9wdGlvbnMpIHsKICAgIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqLwogICAgaWYgKCFwYXJhbXMpIHsKICAgICAgcmV0dXJuIHVybDsKICAgIH0KCiAgICB2YXIgaGFzaG1hcmtJbmRleCA9IHVybC5pbmRleE9mKCcjJyk7CgogICAgaWYgKGhhc2htYXJrSW5kZXggIT09IC0xKSB7CiAgICAgIHVybCA9IHVybC5zbGljZSgwLCBoYXNobWFya0luZGV4KTsKICAgIH0KCiAgICB2YXIgX2VuY29kZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5lbmNvZGUgfHwgZW5jb2RlOwoKICAgIHZhciBzZXJpYWxpemVyUGFyYW1zID0gdXRpbHMuaXNVUkxTZWFyY2hQYXJhbXMocGFyYW1zKSA/IHBhcmFtcy50b1N0cmluZygpIDogbmV3IEF4aW9zVVJMU2VhcmNoUGFyYW1zXzEocGFyYW1zLCBvcHRpb25zKS50b1N0cmluZyhfZW5jb2RlKTsKCiAgICBpZiAoc2VyaWFsaXplclBhcmFtcykgewogICAgICB1cmwgKz0gKHVybC5pbmRleE9mKCc/JykgPT09IC0xID8gJz8nIDogJyYnKSArIHNlcmlhbGl6ZXJQYXJhbXM7CiAgICB9CgogICAgcmV0dXJuIHVybDsKICB9OwoKICBmdW5jdGlvbiBJbnRlcmNlcHRvck1hbmFnZXIoKSB7CiAgICB0aGlzLmhhbmRsZXJzID0gW107CiAgfQogIC8qKgogICAqIEFkZCBhIG5ldyBpbnRlcmNlcHRvciB0byB0aGUgc3RhY2sKICAgKgogICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bGZpbGxlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGB0aGVuYCBmb3IgYSBgUHJvbWlzZWAKICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3RlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGByZWplY3RgIGZvciBhIGBQcm9taXNlYAogICAqCiAgICogQHJldHVybiB7TnVtYmVyfSBBbiBJRCB1c2VkIHRvIHJlbW92ZSBpbnRlcmNlcHRvciBsYXRlcgogICAqLwoKCiAgSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS51c2UgPSBmdW5jdGlvbiB1c2UoZnVsZmlsbGVkLCByZWplY3RlZCwgb3B0aW9ucykgewogICAgdGhpcy5oYW5kbGVycy5wdXNoKHsKICAgICAgZnVsZmlsbGVkOiBmdWxmaWxsZWQsCiAgICAgIHJlamVjdGVkOiByZWplY3RlZCwKICAgICAgc3luY2hyb25vdXM6IG9wdGlvbnMgPyBvcHRpb25zLnN5bmNocm9ub3VzIDogZmFsc2UsCiAgICAgIHJ1bldoZW46IG9wdGlvbnMgPyBvcHRpb25zLnJ1bldoZW4gOiBudWxsCiAgICB9KTsKICAgIHJldHVybiB0aGlzLmhhbmRsZXJzLmxlbmd0aCAtIDE7CiAgfTsKICAvKioKICAgKiBSZW1vdmUgYW4gaW50ZXJjZXB0b3IgZnJvbSB0aGUgc3RhY2sKICAgKgogICAqIEBwYXJhbSB7TnVtYmVyfSBpZCBUaGUgSUQgdGhhdCB3YXMgcmV0dXJuZWQgYnkgYHVzZWAKICAgKi8KCgogIEludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZWplY3QgPSBmdW5jdGlvbiBlamVjdChpZCkgewogICAgaWYgKHRoaXMuaGFuZGxlcnNbaWRdKSB7CiAgICAgIHRoaXMuaGFuZGxlcnNbaWRdID0gbnVsbDsKICAgIH0KICB9OwogIC8qKgogICAqIENsZWFyIGFsbCBpbnRlcmNlcHRvcnMgZnJvbSB0aGUgc3RhY2sKICAgKi8KCgogIEludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiBjbGVhcigpIHsKICAgIGlmICh0aGlzLmhhbmRsZXJzKSB7CiAgICAgIHRoaXMuaGFuZGxlcnMgPSBbXTsKICAgIH0KICB9OwogIC8qKgogICAqIEl0ZXJhdGUgb3ZlciBhbGwgdGhlIHJlZ2lzdGVyZWQgaW50ZXJjZXB0b3JzCiAgICoKICAgKiBUaGlzIG1ldGhvZCBpcyBwYXJ0aWN1bGFybHkgdXNlZnVsIGZvciBza2lwcGluZyBvdmVyIGFueQogICAqIGludGVyY2VwdG9ycyB0aGF0IG1heSBoYXZlIGJlY29tZSBgbnVsbGAgY2FsbGluZyBgZWplY3RgLgogICAqCiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggaW50ZXJjZXB0b3IKICAgKi8KCgogIEludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIGZvckVhY2goZm4pIHsKICAgIHV0aWxzLmZvckVhY2godGhpcy5oYW5kbGVycywgZnVuY3Rpb24gZm9yRWFjaEhhbmRsZXIoaCkgewogICAgICBpZiAoaCAhPT0gbnVsbCkgewogICAgICAgIGZuKGgpOwogICAgICB9CiAgICB9KTsKICB9OwoKICB2YXIgSW50ZXJjZXB0b3JNYW5hZ2VyXzEgPSBJbnRlcmNlcHRvck1hbmFnZXI7CgogIHZhciBub3JtYWxpemVIZWFkZXJOYW1lID0gZnVuY3Rpb24gbm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCBub3JtYWxpemVkTmFtZSkgewogICAgdXRpbHMuZm9yRWFjaChoZWFkZXJzLCBmdW5jdGlvbiBwcm9jZXNzSGVhZGVyKHZhbHVlLCBuYW1lKSB7CiAgICAgIGlmIChuYW1lICE9PSBub3JtYWxpemVkTmFtZSAmJiBuYW1lLnRvVXBwZXJDYXNlKCkgPT09IG5vcm1hbGl6ZWROYW1lLnRvVXBwZXJDYXNlKCkpIHsKICAgICAgICBoZWFkZXJzW25vcm1hbGl6ZWROYW1lXSA9IHZhbHVlOwogICAgICAgIGRlbGV0ZSBoZWFkZXJzW25hbWVdOwogICAgICB9CiAgICB9KTsKICB9OwoKICB2YXIgdHJhbnNpdGlvbmFsID0gewogICAgc2lsZW50SlNPTlBhcnNpbmc6IHRydWUsCiAgICBmb3JjZWRKU09OUGFyc2luZzogdHJ1ZSwKICAgIGNsYXJpZnlUaW1lb3V0RXJyb3I6IGZhbHNlCiAgfTsKICB2YXIgVVJMU2VhcmNoUGFyYW1zXzEgPSB0eXBlb2YgVVJMU2VhcmNoUGFyYW1zICE9PSAndW5kZWZpbmVkJyA/IFVSTFNlYXJjaFBhcmFtcyA6IEF4aW9zVVJMU2VhcmNoUGFyYW1zXzE7CiAgdmFyIEZvcm1EYXRhXzEgPSBGb3JtRGF0YTsKICB2YXIgYnJvd3NlciA9IHsKICAgIGlzQnJvd3NlcjogdHJ1ZSwKICAgIGNsYXNzZXM6IHsKICAgICAgVVJMU2VhcmNoUGFyYW1zOiBVUkxTZWFyY2hQYXJhbXNfMSwKICAgICAgRm9ybURhdGE6IEZvcm1EYXRhXzEsCiAgICAgIEJsb2I6IEJsb2IKICAgIH0sCiAgICBwcm90b2NvbHM6IFsnaHR0cCcsICdodHRwcycsICdmaWxlJywgJ2Jsb2InLCAndXJsJ10KICB9OwogIHZhciBwbGF0Zm9ybSA9IGJyb3dzZXI7CgogIHZhciB0b1VSTEVuY29kZWRGb3JtID0gZnVuY3Rpb24gdG9VUkxFbmNvZGVkRm9ybShkYXRhLCBvcHRpb25zKSB7CiAgICByZXR1cm4gdG9Gb3JtRGF0YV8xKGRhdGEsIG5ldyBwbGF0Zm9ybS5jbGFzc2VzLlVSTFNlYXJjaFBhcmFtcygpLCBPYmplY3QuYXNzaWduKHsKICAgICAgdmlzaXRvcjogZnVuY3Rpb24gKHZhbHVlLCBrZXksIHBhdGgsIGhlbHBlcnMpIHsKICAgICAgICBpZiAocGxhdGZvcm0uaXNOb2RlICYmIHV0aWxzLmlzQnVmZmVyKHZhbHVlKSkgewogICAgICAgICAgdGhpcy5hcHBlbmQoa2V5LCB2YWx1ZS50b1N0cmluZygnYmFzZTY0JykpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGhlbHBlcnMuZGVmYXVsdFZpc2l0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgfSwgb3B0aW9ucykpOwogIH07CgogIGZ1bmN0aW9uIHBhcnNlUHJvcFBhdGgobmFtZSkgewogICAgLy8gZm9vW3hdW3ldW3pdCiAgICAvLyBmb28ueC55LnoKICAgIC8vIGZvby14LXktegogICAgLy8gZm9vIHggeSB6CiAgICByZXR1cm4gdXRpbHMubWF0Y2hBbGwoL1x3K3xcWyhcdyopXS9nLCBuYW1lKS5tYXAoZnVuY3Rpb24gKG1hdGNoKSB7CiAgICAgIHJldHVybiBtYXRjaFswXSA9PT0gJ1tdJyA/ICcnIDogbWF0Y2hbMV0gfHwgbWF0Y2hbMF07CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGFycmF5VG9PYmplY3QoYXJyKSB7CiAgICB2YXIgb2JqID0ge307CiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGFycik7CiAgICB2YXIgaTsKICAgIHZhciBsZW4gPSBrZXlzLmxlbmd0aDsKICAgIHZhciBrZXk7CgogICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgIGtleSA9IGtleXNbaV07CiAgICAgIG9ialtrZXldID0gYXJyW2tleV07CiAgICB9CgogICAgcmV0dXJuIG9iajsKICB9CgogIGZ1bmN0aW9uIGZvcm1EYXRhVG9KU09OKGZvcm1EYXRhKSB7CiAgICBmdW5jdGlvbiBidWlsZFBhdGgocGF0aCwgdmFsdWUsIHRhcmdldCwgaW5kZXgpIHsKICAgICAgdmFyIG5hbWUgPSBwYXRoW2luZGV4KytdOwogICAgICB2YXIgaXNOdW1lcmljS2V5ID0gTnVtYmVyLmlzRmluaXRlKCtuYW1lKTsKICAgICAgdmFyIGlzTGFzdCA9IGluZGV4ID49IHBhdGgubGVuZ3RoOwogICAgICBuYW1lID0gIW5hbWUgJiYgdXRpbHMuaXNBcnJheSh0YXJnZXQpID8gdGFyZ2V0Lmxlbmd0aCA6IG5hbWU7CgogICAgICBpZiAoaXNMYXN0KSB7CiAgICAgICAgaWYgKHV0aWxzLmhhc093blByb3BlcnR5KHRhcmdldCwgbmFtZSkpIHsKICAgICAgICAgIHRhcmdldFtuYW1lXSA9IFt0YXJnZXRbbmFtZV0sIHZhbHVlXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGFyZ2V0W25hbWVdID0gdmFsdWU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gIWlzTnVtZXJpY0tleTsKICAgICAgfQoKICAgICAgaWYgKCF0YXJnZXRbbmFtZV0gfHwgIXV0aWxzLmlzT2JqZWN0KHRhcmdldFtuYW1lXSkpIHsKICAgICAgICB0YXJnZXRbbmFtZV0gPSBbXTsKICAgICAgfQoKICAgICAgdmFyIHJlc3VsdCA9IGJ1aWxkUGF0aChwYXRoLCB2YWx1ZSwgdGFyZ2V0W25hbWVdLCBpbmRleCk7CgogICAgICBpZiAocmVzdWx0ICYmIHV0aWxzLmlzQXJyYXkodGFyZ2V0W25hbWVdKSkgewogICAgICAgIHRhcmdldFtuYW1lXSA9IGFycmF5VG9PYmplY3QodGFyZ2V0W25hbWVdKTsKICAgICAgfQoKICAgICAgcmV0dXJuICFpc051bWVyaWNLZXk7CiAgICB9CgogICAgaWYgKHV0aWxzLmlzRm9ybURhdGEoZm9ybURhdGEpICYmIHV0aWxzLmlzRnVuY3Rpb24oZm9ybURhdGEuZW50cmllcykpIHsKICAgICAgdmFyIG9iaiA9IHt9OwogICAgICB1dGlscy5mb3JFYWNoRW50cnkoZm9ybURhdGEsIGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkgewogICAgICAgIGJ1aWxkUGF0aChwYXJzZVByb3BQYXRoKG5hbWUpLCB2YWx1ZSwgb2JqLCAwKTsKICAgICAgfSk7CiAgICAgIHJldHVybiBvYmo7CiAgICB9CgogICAgcmV0dXJuIG51bGw7CiAgfQoKICB2YXIgZm9ybURhdGFUb0pTT05fMSA9IGZvcm1EYXRhVG9KU09OOwogIC8qKgogICAqIFJlc29sdmUgb3IgcmVqZWN0IGEgUHJvbWlzZSBiYXNlZCBvbiByZXNwb25zZSBzdGF0dXMuCiAgICoKICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlIEEgZnVuY3Rpb24gdGhhdCByZXNvbHZlcyB0aGUgcHJvbWlzZS4KICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3QgQSBmdW5jdGlvbiB0aGF0IHJlamVjdHMgdGhlIHByb21pc2UuCiAgICogQHBhcmFtIHtvYmplY3R9IHJlc3BvbnNlIFRoZSByZXNwb25zZS4KICAgKi8KCiAgdmFyIHNldHRsZSA9IGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHJlc3BvbnNlKSB7CiAgICB2YXIgdmFsaWRhdGVTdGF0dXMgPSByZXNwb25zZS5jb25maWcudmFsaWRhdGVTdGF0dXM7CgogICAgaWYgKCFyZXNwb25zZS5zdGF0dXMgfHwgIXZhbGlkYXRlU3RhdHVzIHx8IHZhbGlkYXRlU3RhdHVzKHJlc3BvbnNlLnN0YXR1cykpIHsKICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICB9IGVsc2UgewogICAgICByZWplY3QobmV3IEF4aW9zRXJyb3JfMSgnUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSAnICsgcmVzcG9uc2Uuc3RhdHVzLCBbQXhpb3NFcnJvcl8xLkVSUl9CQURfUkVRVUVTVCwgQXhpb3NFcnJvcl8xLkVSUl9CQURfUkVTUE9OU0VdW01hdGguZmxvb3IocmVzcG9uc2Uuc3RhdHVzIC8gMTAwKSAtIDRdLCByZXNwb25zZS5jb25maWcsIHJlc3BvbnNlLnJlcXVlc3QsIHJlc3BvbnNlKSk7CiAgICB9CiAgfTsKCiAgdmFyIGNvb2tpZXMgPSB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID8gLy8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIHN1cHBvcnQgZG9jdW1lbnQuY29va2llCiAgZnVuY3Rpb24gc3RhbmRhcmRCcm93c2VyRW52KCkgewogICAgcmV0dXJuIHsKICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKG5hbWUsIHZhbHVlLCBleHBpcmVzLCBwYXRoLCBkb21haW4sIHNlY3VyZSkgewogICAgICAgIHZhciBjb29raWUgPSBbXTsKICAgICAgICBjb29raWUucHVzaChuYW1lICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7CgogICAgICAgIGlmICh1dGlscy5pc051bWJlcihleHBpcmVzKSkgewogICAgICAgICAgY29va2llLnB1c2goJ2V4cGlyZXM9JyArIG5ldyBEYXRlKGV4cGlyZXMpLnRvR01UU3RyaW5nKCkpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHV0aWxzLmlzU3RyaW5nKHBhdGgpKSB7CiAgICAgICAgICBjb29raWUucHVzaCgncGF0aD0nICsgcGF0aCk7CiAgICAgICAgfQoKICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcoZG9tYWluKSkgewogICAgICAgICAgY29va2llLnB1c2goJ2RvbWFpbj0nICsgZG9tYWluKTsKICAgICAgICB9CgogICAgICAgIGlmIChzZWN1cmUgPT09IHRydWUpIHsKICAgICAgICAgIGNvb2tpZS5wdXNoKCdzZWN1cmUnKTsKICAgICAgICB9CgogICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZS5qb2luKCc7ICcpOwogICAgICB9LAogICAgICByZWFkOiBmdW5jdGlvbiByZWFkKG5hbWUpIHsKICAgICAgICB2YXIgbWF0Y2ggPSBkb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cCgnKF58O1xccyopKCcgKyBuYW1lICsgJyk9KFteO10qKScpKTsKICAgICAgICByZXR1cm4gbWF0Y2ggPyBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbM10pIDogbnVsbDsKICAgICAgfSwKICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUobmFtZSkgewogICAgICAgIHRoaXMud3JpdGUobmFtZSwgJycsIERhdGUubm93KCkgLSA4NjQwMDAwMCk7CiAgICAgIH0KICAgIH07CiAgfSgpIDogLy8gTm9uIHN0YW5kYXJkIGJyb3dzZXIgZW52ICh3ZWIgd29ya2VycywgcmVhY3QtbmF0aXZlKSBsYWNrIG5lZWRlZCBzdXBwb3J0LgogIGZ1bmN0aW9uIG5vblN0YW5kYXJkQnJvd3NlckVudigpIHsKICAgIHJldHVybiB7CiAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZSgpIHt9LAogICAgICByZWFkOiBmdW5jdGlvbiByZWFkKCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9LAogICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHt9CiAgICB9OwogIH0oKTsKICAvKioKICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGUKICAgKgogICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTCB0byB0ZXN0CiAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGUsIG90aGVyd2lzZSBmYWxzZQogICAqLwoKICB2YXIgaXNBYnNvbHV0ZVVSTCA9IGZ1bmN0aW9uIGlzQWJzb2x1dGVVUkwodXJsKSB7CiAgICAvLyBBIFVSTCBpcyBjb25zaWRlcmVkIGFic29sdXRlIGlmIGl0IGJlZ2lucyB3aXRoICI8c2NoZW1lPjovLyIgb3IgIi8vIiAocHJvdG9jb2wtcmVsYXRpdmUgVVJMKS4KICAgIC8vIFJGQyAzOTg2IGRlZmluZXMgc2NoZW1lIG5hbWUgYXMgYSBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIGJlZ2lubmluZyB3aXRoIGEgbGV0dGVyIGFuZCBmb2xsb3dlZAogICAgLy8gYnkgYW55IGNvbWJpbmF0aW9uIG9mIGxldHRlcnMsIGRpZ2l0cywgcGx1cywgcGVyaW9kLCBvciBoeXBoZW4uCiAgICByZXR1cm4gL14oW2Etel1bYS16XGQrXC0uXSo6KT9cL1wvL2kudGVzdCh1cmwpOwogIH07CiAgLyoqCiAgICogQ3JlYXRlcyBhIG5ldyBVUkwgYnkgY29tYmluaW5nIHRoZSBzcGVjaWZpZWQgVVJMcwogICAqCiAgICogQHBhcmFtIHtzdHJpbmd9IGJhc2VVUkwgVGhlIGJhc2UgVVJMCiAgICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0aXZlVVJMIFRoZSByZWxhdGl2ZSBVUkwKICAgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgVVJMCiAgICovCgoKICB2YXIgY29tYmluZVVSTHMgPSBmdW5jdGlvbiBjb21iaW5lVVJMcyhiYXNlVVJMLCByZWxhdGl2ZVVSTCkgewogICAgcmV0dXJuIHJlbGF0aXZlVVJMID8gYmFzZVVSTC5yZXBsYWNlKC9cLyskLywgJycpICsgJy8nICsgcmVsYXRpdmVVUkwucmVwbGFjZSgvXlwvKy8sICcnKSA6IGJhc2VVUkw7CiAgfTsKICAvKioKICAgKiBDcmVhdGVzIGEgbmV3IFVSTCBieSBjb21iaW5pbmcgdGhlIGJhc2VVUkwgd2l0aCB0aGUgcmVxdWVzdGVkVVJMLAogICAqIG9ubHkgd2hlbiB0aGUgcmVxdWVzdGVkVVJMIGlzIG5vdCBhbHJlYWR5IGFuIGFic29sdXRlIFVSTC4KICAgKiBJZiB0aGUgcmVxdWVzdFVSTCBpcyBhYnNvbHV0ZSwgdGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSByZXF1ZXN0ZWRVUkwgdW50b3VjaGVkLgogICAqCiAgICogQHBhcmFtIHtzdHJpbmd9IGJhc2VVUkwgVGhlIGJhc2UgVVJMCiAgICogQHBhcmFtIHtzdHJpbmd9IHJlcXVlc3RlZFVSTCBBYnNvbHV0ZSBvciByZWxhdGl2ZSBVUkwgdG8gY29tYmluZQogICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjb21iaW5lZCBmdWxsIHBhdGgKICAgKi8KCgogIHZhciBidWlsZEZ1bGxQYXRoID0gZnVuY3Rpb24gYnVpbGRGdWxsUGF0aChiYXNlVVJMLCByZXF1ZXN0ZWRVUkwpIHsKICAgIGlmIChiYXNlVVJMICYmICFpc0Fic29sdXRlVVJMKHJlcXVlc3RlZFVSTCkpIHsKICAgICAgcmV0dXJuIGNvbWJpbmVVUkxzKGJhc2VVUkwsIHJlcXVlc3RlZFVSTCk7CiAgICB9CgogICAgcmV0dXJuIHJlcXVlc3RlZFVSTDsKICB9OyAvLyBIZWFkZXJzIHdob3NlIGR1cGxpY2F0ZXMgYXJlIGlnbm9yZWQgYnkgbm9kZQogIC8vIGMuZi4gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9odHRwLmh0bWwjaHR0cF9tZXNzYWdlX2hlYWRlcnMKCgogIHZhciBpZ25vcmVEdXBsaWNhdGVPZiA9IFsnYWdlJywgJ2F1dGhvcml6YXRpb24nLCAnY29udGVudC1sZW5ndGgnLCAnY29udGVudC10eXBlJywgJ2V0YWcnLCAnZXhwaXJlcycsICdmcm9tJywgJ2hvc3QnLCAnaWYtbW9kaWZpZWQtc2luY2UnLCAnaWYtdW5tb2RpZmllZC1zaW5jZScsICdsYXN0LW1vZGlmaWVkJywgJ2xvY2F0aW9uJywgJ21heC1mb3J3YXJkcycsICdwcm94eS1hdXRob3JpemF0aW9uJywgJ3JlZmVyZXInLCAncmV0cnktYWZ0ZXInLCAndXNlci1hZ2VudCddOwogIC8qKgogICAqIFBhcnNlIGhlYWRlcnMgaW50byBhbiBvYmplY3QKICAgKgogICAqIGBgYAogICAqIERhdGU6IFdlZCwgMjcgQXVnIDIwMTQgMDg6NTg6NDkgR01UCiAgICogQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uCiAgICogQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQogICAqIFRyYW5zZmVyLUVuY29kaW5nOiBjaHVua2VkCiAgICogYGBgCiAgICoKICAgKiBAcGFyYW0ge1N0cmluZ30gaGVhZGVycyBIZWFkZXJzIG5lZWRpbmcgdG8gYmUgcGFyc2VkCiAgICogQHJldHVybnMge09iamVjdH0gSGVhZGVycyBwYXJzZWQgaW50byBhbiBvYmplY3QKICAgKi8KCiAgdmFyIHBhcnNlSGVhZGVycyA9IGZ1bmN0aW9uIHBhcnNlSGVhZGVycyhoZWFkZXJzKSB7CiAgICB2YXIgcGFyc2VkID0ge307CiAgICB2YXIga2V5OwogICAgdmFyIHZhbDsKICAgIHZhciBpOwoKICAgIGlmICghaGVhZGVycykgewogICAgICByZXR1cm4gcGFyc2VkOwogICAgfQoKICAgIHV0aWxzLmZvckVhY2goaGVhZGVycy5zcGxpdCgnXG4nKSwgZnVuY3Rpb24gcGFyc2VyKGxpbmUpIHsKICAgICAgaSA9IGxpbmUuaW5kZXhPZignOicpOwogICAgICBrZXkgPSB1dGlscy50cmltKGxpbmUuc2xpY2UoMCwgaSkpLnRvTG93ZXJDYXNlKCk7CiAgICAgIHZhbCA9IHV0aWxzLnRyaW0obGluZS5zbGljZShpICsgMSkpOwoKICAgICAgaWYgKGtleSkgewogICAgICAgIGlmIChwYXJzZWRba2V5XSAmJiBpZ25vcmVEdXBsaWNhdGVPZi5pbmRleE9mKGtleSkgPj0gMCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKGtleSA9PT0gJ3NldC1jb29raWUnKSB7CiAgICAgICAgICBwYXJzZWRba2V5XSA9IChwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldIDogW10pLmNvbmNhdChbdmFsXSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHBhcnNlZFtrZXldID0gcGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSArICcsICcgKyB2YWwgOiB2YWw7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBwYXJzZWQ7CiAgfTsKCiAgdmFyIGlzVVJMU2FtZU9yaWdpbiA9IHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkgPyAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgaGF2ZSBmdWxsIHN1cHBvcnQgb2YgdGhlIEFQSXMgbmVlZGVkIHRvIHRlc3QKICAvLyB3aGV0aGVyIHRoZSByZXF1ZXN0IFVSTCBpcyBvZiB0aGUgc2FtZSBvcmlnaW4gYXMgY3VycmVudCBsb2NhdGlvbi4KICBmdW5jdGlvbiBzdGFuZGFyZEJyb3dzZXJFbnYoKSB7CiAgICB2YXIgbXNpZSA9IC8obXNpZXx0cmlkZW50KS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7CiAgICB2YXIgdXJsUGFyc2luZ05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICB2YXIgb3JpZ2luVVJMOwogICAgLyoqCiAgICAqIFBhcnNlIGEgVVJMIHRvIGRpc2NvdmVyIGl0J3MgY29tcG9uZW50cwogICAgKgogICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIFRoZSBVUkwgdG8gYmUgcGFyc2VkCiAgICAqIEByZXR1cm5zIHtPYmplY3R9CiAgICAqLwoKICAgIGZ1bmN0aW9uIHJlc29sdmVVUkwodXJsKSB7CiAgICAgIHZhciBocmVmID0gdXJsOwoKICAgICAgaWYgKG1zaWUpIHsKICAgICAgICAvLyBJRSBuZWVkcyBhdHRyaWJ1dGUgc2V0IHR3aWNlIHRvIG5vcm1hbGl6ZSBwcm9wZXJ0aWVzCiAgICAgICAgdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7CiAgICAgICAgaHJlZiA9IHVybFBhcnNpbmdOb2RlLmhyZWY7CiAgICAgIH0KCiAgICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpOyAvLyB1cmxQYXJzaW5nTm9kZSBwcm92aWRlcyB0aGUgVXJsVXRpbHMgaW50ZXJmYWNlIC0gaHR0cDovL3VybC5zcGVjLndoYXR3Zy5vcmcvI3VybHV0aWxzCgogICAgICByZXR1cm4gewogICAgICAgIGhyZWY6IHVybFBhcnNpbmdOb2RlLmhyZWYsCiAgICAgICAgcHJvdG9jb2w6IHVybFBhcnNpbmdOb2RlLnByb3RvY29sID8gdXJsUGFyc2luZ05vZGUucHJvdG9jb2wucmVwbGFjZSgvOiQvLCAnJykgOiAnJywKICAgICAgICBob3N0OiB1cmxQYXJzaW5nTm9kZS5ob3N0LAogICAgICAgIHNlYXJjaDogdXJsUGFyc2luZ05vZGUuc2VhcmNoID8gdXJsUGFyc2luZ05vZGUuc2VhcmNoLnJlcGxhY2UoL15cPy8sICcnKSA6ICcnLAogICAgICAgIGhhc2g6IHVybFBhcnNpbmdOb2RlLmhhc2ggPyB1cmxQYXJzaW5nTm9kZS5oYXNoLnJlcGxhY2UoL14jLywgJycpIDogJycsCiAgICAgICAgaG9zdG5hbWU6IHVybFBhcnNpbmdOb2RlLmhvc3RuYW1lLAogICAgICAgIHBvcnQ6IHVybFBhcnNpbmdOb2RlLnBvcnQsCiAgICAgICAgcGF0aG5hbWU6IHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nID8gdXJsUGFyc2luZ05vZGUucGF0aG5hbWUgOiAnLycgKyB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZQogICAgICB9OwogICAgfQoKICAgIG9yaWdpblVSTCA9IHJlc29sdmVVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpOwogICAgLyoqCiAgICAqIERldGVybWluZSBpZiBhIFVSTCBzaGFyZXMgdGhlIHNhbWUgb3JpZ2luIGFzIHRoZSBjdXJyZW50IGxvY2F0aW9uCiAgICAqCiAgICAqIEBwYXJhbSB7U3RyaW5nfSByZXF1ZXN0VVJMIFRoZSBVUkwgdG8gdGVzdAogICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiwgb3RoZXJ3aXNlIGZhbHNlCiAgICAqLwoKICAgIHJldHVybiBmdW5jdGlvbiBpc1VSTFNhbWVPcmlnaW4ocmVxdWVzdFVSTCkgewogICAgICB2YXIgcGFyc2VkID0gdXRpbHMuaXNTdHJpbmcocmVxdWVzdFVSTCkgPyByZXNvbHZlVVJMKHJlcXVlc3RVUkwpIDogcmVxdWVzdFVSTDsKICAgICAgcmV0dXJuIHBhcnNlZC5wcm90b2NvbCA9PT0gb3JpZ2luVVJMLnByb3RvY29sICYmIHBhcnNlZC5ob3N0ID09PSBvcmlnaW5VUkwuaG9zdDsKICAgIH07CiAgfSgpIDogLy8gTm9uIHN0YW5kYXJkIGJyb3dzZXIgZW52cyAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC4KICBmdW5jdGlvbiBub25TdGFuZGFyZEJyb3dzZXJFbnYoKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gaXNVUkxTYW1lT3JpZ2luKCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH07CiAgfSgpOwogIC8qKgogICAqIEEgYENhbmNlbGVkRXJyb3JgIGlzIGFuIG9iamVjdCB0aGF0IGlzIHRocm93biB3aGVuIGFuIG9wZXJhdGlvbiBpcyBjYW5jZWxlZC4KICAgKgogICAqIEBjbGFzcwogICAqIEBwYXJhbSB7c3RyaW5nPX0gbWVzc2FnZSBUaGUgbWVzc2FnZS4KICAgKiBAcGFyYW0ge09iamVjdD19IGNvbmZpZyBUaGUgY29uZmlnLgogICAqIEBwYXJhbSB7T2JqZWN0PX0gcmVxdWVzdCBUaGUgcmVxdWVzdC4KICAgKi8KCiAgZnVuY3Rpb24gQ2FuY2VsZWRFcnJvcihtZXNzYWdlLCBjb25maWcsIHJlcXVlc3QpIHsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lcS1udWxsLGVxZXFlcQogICAgQXhpb3NFcnJvcl8xLmNhbGwodGhpcywgbWVzc2FnZSA9PSBudWxsID8gJ2NhbmNlbGVkJyA6IG1lc3NhZ2UsIEF4aW9zRXJyb3JfMS5FUlJfQ0FOQ0VMRUQsIGNvbmZpZywgcmVxdWVzdCk7CiAgICB0aGlzLm5hbWUgPSAnQ2FuY2VsZWRFcnJvcic7CiAgfQoKICB1dGlscy5pbmhlcml0cyhDYW5jZWxlZEVycm9yLCBBeGlvc0Vycm9yXzEsIHsKICAgIF9fQ0FOQ0VMX186IHRydWUKICB9KTsKICB2YXIgQ2FuY2VsZWRFcnJvcl8xID0gQ2FuY2VsZWRFcnJvcjsKCiAgdmFyIHBhcnNlUHJvdG9jb2wgPSBmdW5jdGlvbiBwYXJzZVByb3RvY29sKHVybCkgewogICAgdmFyIG1hdGNoID0gL14oWy0rXHddezEsMjV9KSg6P1wvXC98OikvLmV4ZWModXJsKTsKICAgIHJldHVybiBtYXRjaCAmJiBtYXRjaFsxXSB8fCAnJzsKICB9OwoKICB2YXIgeGhyID0gZnVuY3Rpb24geGhyQWRhcHRlcihjb25maWcpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBkaXNwYXRjaFhoclJlcXVlc3QocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIHZhciByZXF1ZXN0RGF0YSA9IGNvbmZpZy5kYXRhOwogICAgICB2YXIgcmVxdWVzdEhlYWRlcnMgPSBjb25maWcuaGVhZGVyczsKICAgICAgdmFyIHJlc3BvbnNlVHlwZSA9IGNvbmZpZy5yZXNwb25zZVR5cGU7CiAgICAgIHZhciBvbkNhbmNlbGVkOwoKICAgICAgZnVuY3Rpb24gZG9uZSgpIHsKICAgICAgICBpZiAoY29uZmlnLmNhbmNlbFRva2VuKSB7CiAgICAgICAgICBjb25maWcuY2FuY2VsVG9rZW4udW5zdWJzY3JpYmUob25DYW5jZWxlZCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoY29uZmlnLnNpZ25hbCkgewogICAgICAgICAgY29uZmlnLnNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKCdhYm9ydCcsIG9uQ2FuY2VsZWQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHV0aWxzLmlzRm9ybURhdGEocmVxdWVzdERhdGEpICYmIHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkpIHsKICAgICAgICBkZWxldGUgcmVxdWVzdEhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddOyAvLyBMZXQgdGhlIGJyb3dzZXIgc2V0IGl0CiAgICAgIH0KCiAgICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7IC8vIEhUVFAgYmFzaWMgYXV0aGVudGljYXRpb24KCiAgICAgIGlmIChjb25maWcuYXV0aCkgewogICAgICAgIHZhciB1c2VybmFtZSA9IGNvbmZpZy5hdXRoLnVzZXJuYW1lIHx8ICcnOwogICAgICAgIHZhciBwYXNzd29yZCA9IGNvbmZpZy5hdXRoLnBhc3N3b3JkID8gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KGNvbmZpZy5hdXRoLnBhc3N3b3JkKSkgOiAnJzsKICAgICAgICByZXF1ZXN0SGVhZGVycy5BdXRob3JpemF0aW9uID0gJ0Jhc2ljICcgKyBidG9hKHVzZXJuYW1lICsgJzonICsgcGFzc3dvcmQpOwogICAgICB9CgogICAgICB2YXIgZnVsbFBhdGggPSBidWlsZEZ1bGxQYXRoKGNvbmZpZy5iYXNlVVJMLCBjb25maWcudXJsKTsKICAgICAgcmVxdWVzdC5vcGVuKGNvbmZpZy5tZXRob2QudG9VcHBlckNhc2UoKSwgYnVpbGRVUkwoZnVsbFBhdGgsIGNvbmZpZy5wYXJhbXMsIGNvbmZpZy5wYXJhbXNTZXJpYWxpemVyKSwgdHJ1ZSk7IC8vIFNldCB0aGUgcmVxdWVzdCB0aW1lb3V0IGluIE1TCgogICAgICByZXF1ZXN0LnRpbWVvdXQgPSBjb25maWcudGltZW91dDsKCiAgICAgIGZ1bmN0aW9uIG9ubG9hZGVuZCgpIHsKICAgICAgICBpZiAoIXJlcXVlc3QpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IC8vIFByZXBhcmUgdGhlIHJlc3BvbnNlCgoKICAgICAgICB2YXIgcmVzcG9uc2VIZWFkZXJzID0gJ2dldEFsbFJlc3BvbnNlSGVhZGVycycgaW4gcmVxdWVzdCA/IHBhcnNlSGVhZGVycyhyZXF1ZXN0LmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSA6IG51bGw7CiAgICAgICAgdmFyIHJlc3BvbnNlRGF0YSA9ICFyZXNwb25zZVR5cGUgfHwgcmVzcG9uc2VUeXBlID09PSAndGV4dCcgfHwgcmVzcG9uc2VUeXBlID09PSAnanNvbicgPyByZXF1ZXN0LnJlc3BvbnNlVGV4dCA6IHJlcXVlc3QucmVzcG9uc2U7CiAgICAgICAgdmFyIHJlc3BvbnNlID0gewogICAgICAgICAgZGF0YTogcmVzcG9uc2VEYXRhLAogICAgICAgICAgc3RhdHVzOiByZXF1ZXN0LnN0YXR1cywKICAgICAgICAgIHN0YXR1c1RleHQ6IHJlcXVlc3Quc3RhdHVzVGV4dCwKICAgICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycywKICAgICAgICAgIGNvbmZpZzogY29uZmlnLAogICAgICAgICAgcmVxdWVzdDogcmVxdWVzdAogICAgICAgIH07CiAgICAgICAgc2V0dGxlKGZ1bmN0aW9uIF9yZXNvbHZlKHZhbHVlKSB7CiAgICAgICAgICByZXNvbHZlKHZhbHVlKTsKICAgICAgICAgIGRvbmUoKTsKICAgICAgICB9LCBmdW5jdGlvbiBfcmVqZWN0KGVycikgewogICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgICBkb25lKCk7CiAgICAgICAgfSwgcmVzcG9uc2UpOyAvLyBDbGVhbiB1cCByZXF1ZXN0CgogICAgICAgIHJlcXVlc3QgPSBudWxsOwogICAgICB9CgogICAgICBpZiAoJ29ubG9hZGVuZCcgaW4gcmVxdWVzdCkgewogICAgICAgIC8vIFVzZSBvbmxvYWRlbmQgaWYgYXZhaWxhYmxlCiAgICAgICAgcmVxdWVzdC5vbmxvYWRlbmQgPSBvbmxvYWRlbmQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gTGlzdGVuIGZvciByZWFkeSBzdGF0ZSB0byBlbXVsYXRlIG9ubG9hZGVuZAogICAgICAgIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gaGFuZGxlTG9hZCgpIHsKICAgICAgICAgIGlmICghcmVxdWVzdCB8fCByZXF1ZXN0LnJlYWR5U3RhdGUgIT09IDQpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfSAvLyBUaGUgcmVxdWVzdCBlcnJvcmVkIG91dCBhbmQgd2UgZGlkbid0IGdldCBhIHJlc3BvbnNlLCB0aGlzIHdpbGwgYmUKICAgICAgICAgIC8vIGhhbmRsZWQgYnkgb25lcnJvciBpbnN0ZWFkCiAgICAgICAgICAvLyBXaXRoIG9uZSBleGNlcHRpb246IHJlcXVlc3QgdGhhdCB1c2luZyBmaWxlOiBwcm90b2NvbCwgbW9zdCBicm93c2VycwogICAgICAgICAgLy8gd2lsbCByZXR1cm4gc3RhdHVzIGFzIDAgZXZlbiB0aG91Z2ggaXQncyBhIHN1Y2Nlc3NmdWwgcmVxdWVzdAoKCiAgICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDAgJiYgIShyZXF1ZXN0LnJlc3BvbnNlVVJMICYmIHJlcXVlc3QucmVzcG9uc2VVUkwuaW5kZXhPZignZmlsZTonKSA9PT0gMCkpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfSAvLyByZWFkeXN0YXRlIGhhbmRsZXIgaXMgY2FsbGluZyBiZWZvcmUgb25lcnJvciBvciBvbnRpbWVvdXQgaGFuZGxlcnMsCiAgICAgICAgICAvLyBzbyB3ZSBzaG91bGQgY2FsbCBvbmxvYWRlbmQgb24gdGhlIG5leHQgJ3RpY2snCgoKICAgICAgICAgIHNldFRpbWVvdXQob25sb2FkZW5kKTsKICAgICAgICB9OwogICAgICB9IC8vIEhhbmRsZSBicm93c2VyIHJlcXVlc3QgY2FuY2VsbGF0aW9uIChhcyBvcHBvc2VkIHRvIGEgbWFudWFsIGNhbmNlbGxhdGlvbikKCgogICAgICByZXF1ZXN0Lm9uYWJvcnQgPSBmdW5jdGlvbiBoYW5kbGVBYm9ydCgpIHsKICAgICAgICBpZiAoIXJlcXVlc3QpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHJlamVjdChuZXcgQXhpb3NFcnJvcl8xKCdSZXF1ZXN0IGFib3J0ZWQnLCBBeGlvc0Vycm9yXzEuRUNPTk5BQk9SVEVELCBjb25maWcsIHJlcXVlc3QpKTsgLy8gQ2xlYW4gdXAgcmVxdWVzdAoKICAgICAgICByZXF1ZXN0ID0gbnVsbDsKICAgICAgfTsgLy8gSGFuZGxlIGxvdyBsZXZlbCBuZXR3b3JrIGVycm9ycwoKCiAgICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIGhhbmRsZUVycm9yKCkgewogICAgICAgIC8vIFJlYWwgZXJyb3JzIGFyZSBoaWRkZW4gZnJvbSB1cyBieSB0aGUgYnJvd3NlcgogICAgICAgIC8vIG9uZXJyb3Igc2hvdWxkIG9ubHkgZmlyZSBpZiBpdCdzIGEgbmV0d29yayBlcnJvcgogICAgICAgIHJlamVjdChuZXcgQXhpb3NFcnJvcl8xKCdOZXR3b3JrIEVycm9yJywgQXhpb3NFcnJvcl8xLkVSUl9ORVRXT1JLLCBjb25maWcsIHJlcXVlc3QpKTsgLy8gQ2xlYW4gdXAgcmVxdWVzdAoKICAgICAgICByZXF1ZXN0ID0gbnVsbDsKICAgICAgfTsgLy8gSGFuZGxlIHRpbWVvdXQKCgogICAgICByZXF1ZXN0Lm9udGltZW91dCA9IGZ1bmN0aW9uIGhhbmRsZVRpbWVvdXQoKSB7CiAgICAgICAgdmFyIHRpbWVvdXRFcnJvck1lc3NhZ2UgPSBjb25maWcudGltZW91dCA/ICd0aW1lb3V0IG9mICcgKyBjb25maWcudGltZW91dCArICdtcyBleGNlZWRlZCcgOiAndGltZW91dCBleGNlZWRlZCc7CiAgICAgICAgdmFyIHRyYW5zaXRpb25hbCQxID0gY29uZmlnLnRyYW5zaXRpb25hbCB8fCB0cmFuc2l0aW9uYWw7CgogICAgICAgIGlmIChjb25maWcudGltZW91dEVycm9yTWVzc2FnZSkgewogICAgICAgICAgdGltZW91dEVycm9yTWVzc2FnZSA9IGNvbmZpZy50aW1lb3V0RXJyb3JNZXNzYWdlOwogICAgICAgIH0KCiAgICAgICAgcmVqZWN0KG5ldyBBeGlvc0Vycm9yXzEodGltZW91dEVycm9yTWVzc2FnZSwgdHJhbnNpdGlvbmFsJDEuY2xhcmlmeVRpbWVvdXRFcnJvciA/IEF4aW9zRXJyb3JfMS5FVElNRURPVVQgOiBBeGlvc0Vycm9yXzEuRUNPTk5BQk9SVEVELCBjb25maWcsIHJlcXVlc3QpKTsgLy8gQ2xlYW4gdXAgcmVxdWVzdAoKICAgICAgICByZXF1ZXN0ID0gbnVsbDsKICAgICAgfTsgLy8gQWRkIHhzcmYgaGVhZGVyCiAgICAgIC8vIFRoaXMgaXMgb25seSBkb25lIGlmIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50LgogICAgICAvLyBTcGVjaWZpY2FsbHkgbm90IGlmIHdlJ3JlIGluIGEgd2ViIHdvcmtlciwgb3IgcmVhY3QtbmF0aXZlLgoKCiAgICAgIGlmICh1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpKSB7CiAgICAgICAgLy8gQWRkIHhzcmYgaGVhZGVyCiAgICAgICAgdmFyIHhzcmZWYWx1ZSA9IChjb25maWcud2l0aENyZWRlbnRpYWxzIHx8IGlzVVJMU2FtZU9yaWdpbihmdWxsUGF0aCkpICYmIGNvbmZpZy54c3JmQ29va2llTmFtZSA/IGNvb2tpZXMucmVhZChjb25maWcueHNyZkNvb2tpZU5hbWUpIDogdW5kZWZpbmVkOwoKICAgICAgICBpZiAoeHNyZlZhbHVlKSB7CiAgICAgICAgICByZXF1ZXN0SGVhZGVyc1tjb25maWcueHNyZkhlYWRlck5hbWVdID0geHNyZlZhbHVlOwogICAgICAgIH0KICAgICAgfSAvLyBBZGQgaGVhZGVycyB0byB0aGUgcmVxdWVzdAoKCiAgICAgIGlmICgnc2V0UmVxdWVzdEhlYWRlcicgaW4gcmVxdWVzdCkgewogICAgICAgIHV0aWxzLmZvckVhY2gocmVxdWVzdEhlYWRlcnMsIGZ1bmN0aW9uIHNldFJlcXVlc3RIZWFkZXIodmFsLCBrZXkpIHsKICAgICAgICAgIGlmICh0eXBlb2YgcmVxdWVzdERhdGEgPT09ICd1bmRlZmluZWQnICYmIGtleS50b0xvd2VyQ2FzZSgpID09PSAnY29udGVudC10eXBlJykgewogICAgICAgICAgICAvLyBSZW1vdmUgQ29udGVudC1UeXBlIGlmIGRhdGEgaXMgdW5kZWZpbmVkCiAgICAgICAgICAgIGRlbGV0ZSByZXF1ZXN0SGVhZGVyc1trZXldOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGFkZCBoZWFkZXIgdG8gdGhlIHJlcXVlc3QKICAgICAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgdmFsKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSAvLyBBZGQgd2l0aENyZWRlbnRpYWxzIHRvIHJlcXVlc3QgaWYgbmVlZGVkCgoKICAgICAgaWYgKCF1dGlscy5pc1VuZGVmaW5lZChjb25maWcud2l0aENyZWRlbnRpYWxzKSkgewogICAgICAgIHJlcXVlc3Qud2l0aENyZWRlbnRpYWxzID0gISFjb25maWcud2l0aENyZWRlbnRpYWxzOwogICAgICB9IC8vIEFkZCByZXNwb25zZVR5cGUgdG8gcmVxdWVzdCBpZiBuZWVkZWQKCgogICAgICBpZiAocmVzcG9uc2VUeXBlICYmIHJlc3BvbnNlVHlwZSAhPT0gJ2pzb24nKSB7CiAgICAgICAgcmVxdWVzdC5yZXNwb25zZVR5cGUgPSBjb25maWcucmVzcG9uc2VUeXBlOwogICAgICB9IC8vIEhhbmRsZSBwcm9ncmVzcyBpZiBuZWVkZWQKCgogICAgICBpZiAodHlwZW9mIGNvbmZpZy5vbkRvd25sb2FkUHJvZ3Jlc3MgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgY29uZmlnLm9uRG93bmxvYWRQcm9ncmVzcyk7CiAgICAgIH0gLy8gTm90IGFsbCBicm93c2VycyBzdXBwb3J0IHVwbG9hZCBldmVudHMKCgogICAgICBpZiAodHlwZW9mIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nICYmIHJlcXVlc3QudXBsb2FkKSB7CiAgICAgICAgcmVxdWVzdC51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBjb25maWcub25VcGxvYWRQcm9ncmVzcyk7CiAgICAgIH0KCiAgICAgIGlmIChjb25maWcuY2FuY2VsVG9rZW4gfHwgY29uZmlnLnNpZ25hbCkgewogICAgICAgIC8vIEhhbmRsZSBjYW5jZWxsYXRpb24KICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lcwogICAgICAgIG9uQ2FuY2VsZWQgPSBmdW5jdGlvbiAoY2FuY2VsKSB7CiAgICAgICAgICBpZiAoIXJlcXVlc3QpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHJlamVjdCghY2FuY2VsIHx8IGNhbmNlbC50eXBlID8gbmV3IENhbmNlbGVkRXJyb3JfMShudWxsLCBjb25maWcsIHJlcSkgOiBjYW5jZWwpOwogICAgICAgICAgcmVxdWVzdC5hYm9ydCgpOwogICAgICAgICAgcmVxdWVzdCA9IG51bGw7CiAgICAgICAgfTsKCiAgICAgICAgY29uZmlnLmNhbmNlbFRva2VuICYmIGNvbmZpZy5jYW5jZWxUb2tlbi5zdWJzY3JpYmUob25DYW5jZWxlZCk7CgogICAgICAgIGlmIChjb25maWcuc2lnbmFsKSB7CiAgICAgICAgICBjb25maWcuc2lnbmFsLmFib3J0ZWQgPyBvbkNhbmNlbGVkKCkgOiBjb25maWcuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywgb25DYW5jZWxlZCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoIXJlcXVlc3REYXRhKSB7CiAgICAgICAgcmVxdWVzdERhdGEgPSBudWxsOwogICAgICB9CgogICAgICB2YXIgcHJvdG9jb2wgPSBwYXJzZVByb3RvY29sKGZ1bGxQYXRoKTsKCiAgICAgIGlmIChwcm90b2NvbCAmJiBwbGF0Zm9ybS5wcm90b2NvbHMuaW5kZXhPZihwcm90b2NvbCkgPT09IC0xKSB7CiAgICAgICAgcmVqZWN0KG5ldyBBeGlvc0Vycm9yXzEoJ1Vuc3VwcG9ydGVkIHByb3RvY29sICcgKyBwcm90b2NvbCArICc6JywgQXhpb3NFcnJvcl8xLkVSUl9CQURfUkVRVUVTVCwgY29uZmlnKSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIFNlbmQgdGhlIHJlcXVlc3QKCgogICAgICByZXF1ZXN0LnNlbmQocmVxdWVzdERhdGEpOwogICAgfSk7CiAgfTsKCiAgdmFyIERFRkFVTFRfQ09OVEVOVF9UWVBFID0gewogICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnCiAgfTsKCiAgZnVuY3Rpb24gc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsIHZhbHVlKSB7CiAgICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnMpICYmIHV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddKSkgewogICAgICBoZWFkZXJzWydDb250ZW50LVR5cGUnXSA9IHZhbHVlOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZ2V0RGVmYXVsdEFkYXB0ZXIoKSB7CiAgICB2YXIgYWRhcHRlcjsKCiAgICBpZiAodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICE9PSAndW5kZWZpbmVkJykgewogICAgICAvLyBGb3IgYnJvd3NlcnMgdXNlIFhIUiBhZGFwdGVyCiAgICAgIGFkYXB0ZXIgPSB4aHI7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJykgewogICAgICAvLyBGb3Igbm9kZSB1c2UgSFRUUCBhZGFwdGVyCiAgICAgIGFkYXB0ZXIgPSB4aHI7CiAgICB9CgogICAgcmV0dXJuIGFkYXB0ZXI7CiAgfQoKICBmdW5jdGlvbiBzdHJpbmdpZnlTYWZlbHkocmF3VmFsdWUsIHBhcnNlciwgZW5jb2RlcikgewogICAgaWYgKHV0aWxzLmlzU3RyaW5nKHJhd1ZhbHVlKSkgewogICAgICB0cnkgewogICAgICAgIChwYXJzZXIgfHwgSlNPTi5wYXJzZSkocmF3VmFsdWUpOwogICAgICAgIHJldHVybiB1dGlscy50cmltKHJhd1ZhbHVlKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGlmIChlLm5hbWUgIT09ICdTeW50YXhFcnJvcicpIHsKICAgICAgICAgIHRocm93IGU7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcmV0dXJuIChlbmNvZGVyIHx8IEpTT04uc3RyaW5naWZ5KShyYXdWYWx1ZSk7CiAgfQoKICB2YXIgZGVmYXVsdHMgPSB7CiAgICB0cmFuc2l0aW9uYWw6IHRyYW5zaXRpb25hbCwKICAgIGFkYXB0ZXI6IGdldERlZmF1bHRBZGFwdGVyKCksCiAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVxdWVzdChkYXRhLCBoZWFkZXJzKSB7CiAgICAgIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgJ0FjY2VwdCcpOwogICAgICBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsICdDb250ZW50LVR5cGUnKTsKICAgICAgdmFyIGNvbnRlbnRUeXBlID0gaGVhZGVycyAmJiBoZWFkZXJzWydDb250ZW50LVR5cGUnXSB8fCAnJzsKICAgICAgdmFyIGhhc0pTT05Db250ZW50VHlwZSA9IGNvbnRlbnRUeXBlLmluZGV4T2YoJ2FwcGxpY2F0aW9uL2pzb24nKSA+IC0xOwogICAgICB2YXIgaXNPYmplY3RQYXlsb2FkID0gdXRpbHMuaXNPYmplY3QoZGF0YSk7CgogICAgICBpZiAoaXNPYmplY3RQYXlsb2FkICYmIHV0aWxzLmlzSFRNTEZvcm0oZGF0YSkpIHsKICAgICAgICBkYXRhID0gbmV3IEZvcm1EYXRhKGRhdGEpOwogICAgICB9CgogICAgICB2YXIgaXNGb3JtRGF0YSA9IHV0aWxzLmlzRm9ybURhdGEoZGF0YSk7CgogICAgICBpZiAoaXNGb3JtRGF0YSkgewogICAgICAgIGlmICghaGFzSlNPTkNvbnRlbnRUeXBlKSB7CiAgICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBoYXNKU09OQ29udGVudFR5cGUgPyBKU09OLnN0cmluZ2lmeShmb3JtRGF0YVRvSlNPTl8xKGRhdGEpKSA6IGRhdGE7CiAgICAgIH0KCiAgICAgIGlmICh1dGlscy5pc0FycmF5QnVmZmVyKGRhdGEpIHx8IHV0aWxzLmlzQnVmZmVyKGRhdGEpIHx8IHV0aWxzLmlzU3RyZWFtKGRhdGEpIHx8IHV0aWxzLmlzRmlsZShkYXRhKSB8fCB1dGlscy5pc0Jsb2IoZGF0YSkpIHsKICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgfQoKICAgICAgaWYgKHV0aWxzLmlzQXJyYXlCdWZmZXJWaWV3KGRhdGEpKSB7CiAgICAgICAgcmV0dXJuIGRhdGEuYnVmZmVyOwogICAgICB9CgogICAgICBpZiAodXRpbHMuaXNVUkxTZWFyY2hQYXJhbXMoZGF0YSkpIHsKICAgICAgICBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04Jyk7CiAgICAgICAgcmV0dXJuIGRhdGEudG9TdHJpbmcoKTsKICAgICAgfQoKICAgICAgdmFyIGlzRmlsZUxpc3Q7CgogICAgICBpZiAoaXNPYmplY3RQYXlsb2FkKSB7CiAgICAgICAgaWYgKGNvbnRlbnRUeXBlLmluZGV4T2YoJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpICE9PSAtMSkgewogICAgICAgICAgcmV0dXJuIHRvVVJMRW5jb2RlZEZvcm0oZGF0YSwgdGhpcy5mb3JtU2VyaWFsaXplcikudG9TdHJpbmcoKTsKICAgICAgICB9CgogICAgICAgIGlmICgoaXNGaWxlTGlzdCA9IHV0aWxzLmlzRmlsZUxpc3QoZGF0YSkpIHx8IGNvbnRlbnRUeXBlLmluZGV4T2YoJ211bHRpcGFydC9mb3JtLWRhdGEnKSA+IC0xKSB7CiAgICAgICAgICB2YXIgX0Zvcm1EYXRhID0gdGhpcy5lbnYgJiYgdGhpcy5lbnYuRm9ybURhdGE7CgogICAgICAgICAgcmV0dXJuIHRvRm9ybURhdGFfMShpc0ZpbGVMaXN0ID8gewogICAgICAgICAgICAnZmlsZXNbXSc6IGRhdGEKICAgICAgICAgIH0gOiBkYXRhLCBfRm9ybURhdGEgJiYgbmV3IF9Gb3JtRGF0YSgpLCB0aGlzLmZvcm1TZXJpYWxpemVyKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChpc09iamVjdFBheWxvYWQgfHwgaGFzSlNPTkNvbnRlbnRUeXBlKSB7CiAgICAgICAgc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsICdhcHBsaWNhdGlvbi9qc29uJyk7CiAgICAgICAgcmV0dXJuIHN0cmluZ2lmeVNhZmVseShkYXRhKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGRhdGE7CiAgICB9XSwKICAgIHRyYW5zZm9ybVJlc3BvbnNlOiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVzcG9uc2UoZGF0YSkgewogICAgICB2YXIgdHJhbnNpdGlvbmFsID0gdGhpcy50cmFuc2l0aW9uYWwgfHwgZGVmYXVsdHMudHJhbnNpdGlvbmFsOwogICAgICB2YXIgZm9yY2VkSlNPTlBhcnNpbmcgPSB0cmFuc2l0aW9uYWwgJiYgdHJhbnNpdGlvbmFsLmZvcmNlZEpTT05QYXJzaW5nOwogICAgICB2YXIgSlNPTlJlcXVlc3RlZCA9IHRoaXMucmVzcG9uc2VUeXBlID09PSAnanNvbic7CgogICAgICBpZiAoZGF0YSAmJiB1dGlscy5pc1N0cmluZyhkYXRhKSAmJiAoZm9yY2VkSlNPTlBhcnNpbmcgJiYgIXRoaXMucmVzcG9uc2VUeXBlIHx8IEpTT05SZXF1ZXN0ZWQpKSB7CiAgICAgICAgdmFyIHNpbGVudEpTT05QYXJzaW5nID0gdHJhbnNpdGlvbmFsICYmIHRyYW5zaXRpb25hbC5zaWxlbnRKU09OUGFyc2luZzsKICAgICAgICB2YXIgc3RyaWN0SlNPTlBhcnNpbmcgPSAhc2lsZW50SlNPTlBhcnNpbmcgJiYgSlNPTlJlcXVlc3RlZDsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGlmIChzdHJpY3RKU09OUGFyc2luZykgewogICAgICAgICAgICBpZiAoZS5uYW1lID09PSAnU3ludGF4RXJyb3InKSB7CiAgICAgICAgICAgICAgdGhyb3cgQXhpb3NFcnJvcl8xLmZyb20oZSwgQXhpb3NFcnJvcl8xLkVSUl9CQURfUkVTUE9OU0UsIHRoaXMsIG51bGwsIHRoaXMucmVzcG9uc2UpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aHJvdyBlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGRhdGE7CiAgICB9XSwKCiAgICAvKioKICAgICAqIEEgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgdG8gYWJvcnQgYSByZXF1ZXN0LiBJZiBzZXQgdG8gMCAoZGVmYXVsdCkgYQogICAgICogdGltZW91dCBpcyBub3QgY3JlYXRlZC4KICAgICAqLwogICAgdGltZW91dDogMCwKICAgIHhzcmZDb29raWVOYW1lOiAnWFNSRi1UT0tFTicsCiAgICB4c3JmSGVhZGVyTmFtZTogJ1gtWFNSRi1UT0tFTicsCiAgICBtYXhDb250ZW50TGVuZ3RoOiAtMSwKICAgIG1heEJvZHlMZW5ndGg6IC0xLAogICAgZW52OiB7CiAgICAgIEZvcm1EYXRhOiBwbGF0Zm9ybS5jbGFzc2VzLkZvcm1EYXRhLAogICAgICBCbG9iOiBwbGF0Zm9ybS5jbGFzc2VzLkJsb2IKICAgIH0sCiAgICB2YWxpZGF0ZVN0YXR1czogZnVuY3Rpb24gdmFsaWRhdGVTdGF0dXMoc3RhdHVzKSB7CiAgICAgIHJldHVybiBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMDsKICAgIH0sCiAgICBoZWFkZXJzOiB7CiAgICAgIGNvbW1vbjogewogICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qJwogICAgICB9CiAgICB9CiAgfTsKICB1dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7CiAgICBkZWZhdWx0cy5oZWFkZXJzW21ldGhvZF0gPSB7fTsKICB9KTsKICB1dGlscy5mb3JFYWNoKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkgewogICAgZGVmYXVsdHMuaGVhZGVyc1ttZXRob2RdID0gdXRpbHMubWVyZ2UoREVGQVVMVF9DT05URU5UX1RZUEUpOwogIH0pOwogIHZhciBkZWZhdWx0c18xID0gZGVmYXVsdHM7CiAgLyoqCiAgICogVHJhbnNmb3JtIHRoZSBkYXRhIGZvciBhIHJlcXVlc3Qgb3IgYSByZXNwb25zZQogICAqCiAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBkYXRhIFRoZSBkYXRhIHRvIGJlIHRyYW5zZm9ybWVkCiAgICogQHBhcmFtIHtBcnJheX0gaGVhZGVycyBUaGUgaGVhZGVycyBmb3IgdGhlIHJlcXVlc3Qgb3IgcmVzcG9uc2UKICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzIEhUVFAgc3RhdHVzIGNvZGUKICAgKiBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufSBmbnMgQSBzaW5nbGUgZnVuY3Rpb24gb3IgQXJyYXkgb2YgZnVuY3Rpb25zCiAgICogQHJldHVybnMgeyp9IFRoZSByZXN1bHRpbmcgdHJhbnNmb3JtZWQgZGF0YQogICAqLwoKICB2YXIgdHJhbnNmb3JtRGF0YSA9IGZ1bmN0aW9uIHRyYW5zZm9ybURhdGEoZGF0YSwgaGVhZGVycywgc3RhdHVzLCBmbnMpIHsKICAgIHZhciBjb250ZXh0ID0gdGhpcyB8fCBkZWZhdWx0c18xOwogICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovCgogICAgdXRpbHMuZm9yRWFjaChmbnMsIGZ1bmN0aW9uIHRyYW5zZm9ybShmbikgewogICAgICBkYXRhID0gZm4uY2FsbChjb250ZXh0LCBkYXRhLCBoZWFkZXJzLCBzdGF0dXMpOwogICAgfSk7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICB2YXIgaXNDYW5jZWwgPSBmdW5jdGlvbiBpc0NhbmNlbCh2YWx1ZSkgewogICAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlLl9fQ0FOQ0VMX18pOwogIH07CiAgLyoqCiAgICogVGhyb3dzIGEgYENhbmNlbGVkRXJyb3JgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuCiAgICovCgoKICBmdW5jdGlvbiB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZykgewogICAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikgewogICAgICBjb25maWcuY2FuY2VsVG9rZW4udGhyb3dJZlJlcXVlc3RlZCgpOwogICAgfQoKICAgIGlmIChjb25maWcuc2lnbmFsICYmIGNvbmZpZy5zaWduYWwuYWJvcnRlZCkgewogICAgICB0aHJvdyBuZXcgQ2FuY2VsZWRFcnJvcl8xKCk7CiAgICB9CiAgfQogIC8qKgogICAqIERpc3BhdGNoIGEgcmVxdWVzdCB0byB0aGUgc2VydmVyIHVzaW5nIHRoZSBjb25maWd1cmVkIGFkYXB0ZXIuCiAgICoKICAgKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIFRoZSBjb25maWcgdGhhdCBpcyB0byBiZSB1c2VkIGZvciB0aGUgcmVxdWVzdAogICAqIEByZXR1cm5zIHtQcm9taXNlfSBUaGUgUHJvbWlzZSB0byBiZSBmdWxmaWxsZWQKICAgKi8KCgogIHZhciBkaXNwYXRjaFJlcXVlc3QgPSBmdW5jdGlvbiBkaXNwYXRjaFJlcXVlc3QoY29uZmlnKSB7CiAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7IC8vIEVuc3VyZSBoZWFkZXJzIGV4aXN0CgogICAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTsgLy8gVHJhbnNmb3JtIHJlcXVlc3QgZGF0YQoKICAgIGNvbmZpZy5kYXRhID0gdHJhbnNmb3JtRGF0YS5jYWxsKGNvbmZpZywgY29uZmlnLmRhdGEsIGNvbmZpZy5oZWFkZXJzLCBudWxsLCBjb25maWcudHJhbnNmb3JtUmVxdWVzdCk7CiAgICBub3JtYWxpemVIZWFkZXJOYW1lKGNvbmZpZy5oZWFkZXJzLCAnQWNjZXB0Jyk7CiAgICBub3JtYWxpemVIZWFkZXJOYW1lKGNvbmZpZy5oZWFkZXJzLCAnQ29udGVudC1UeXBlJyk7IC8vIEZsYXR0ZW4gaGVhZGVycwoKICAgIGNvbmZpZy5oZWFkZXJzID0gdXRpbHMubWVyZ2UoY29uZmlnLmhlYWRlcnMuY29tbW9uIHx8IHt9LCBjb25maWcuaGVhZGVyc1tjb25maWcubWV0aG9kXSB8fCB7fSwgY29uZmlnLmhlYWRlcnMpOwogICAgdXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdwb3N0JywgJ3B1dCcsICdwYXRjaCcsICdjb21tb24nXSwgZnVuY3Rpb24gY2xlYW5IZWFkZXJDb25maWcobWV0aG9kKSB7CiAgICAgIGRlbGV0ZSBjb25maWcuaGVhZGVyc1ttZXRob2RdOwogICAgfSk7CiAgICB2YXIgYWRhcHRlciA9IGNvbmZpZy5hZGFwdGVyIHx8IGRlZmF1bHRzXzEuYWRhcHRlcjsKICAgIHJldHVybiBhZGFwdGVyKGNvbmZpZykudGhlbihmdW5jdGlvbiBvbkFkYXB0ZXJSZXNvbHV0aW9uKHJlc3BvbnNlKSB7CiAgICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTsgLy8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGEKCiAgICAgIHJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhLmNhbGwoY29uZmlnLCByZXNwb25zZS5kYXRhLCByZXNwb25zZS5oZWFkZXJzLCByZXNwb25zZS5zdGF0dXMsIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZSk7CiAgICAgIHJldHVybiByZXNwb25zZTsKICAgIH0sIGZ1bmN0aW9uIG9uQWRhcHRlclJlamVjdGlvbihyZWFzb24pIHsKICAgICAgaWYgKCFpc0NhbmNlbChyZWFzb24pKSB7CiAgICAgICAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpOyAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgZGF0YQoKICAgICAgICBpZiAocmVhc29uICYmIHJlYXNvbi5yZXNwb25zZSkgewogICAgICAgICAgcmVhc29uLnJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhLmNhbGwoY29uZmlnLCByZWFzb24ucmVzcG9uc2UuZGF0YSwgcmVhc29uLnJlc3BvbnNlLmhlYWRlcnMsIHJlYXNvbi5yZXNwb25zZS5zdGF0dXMsIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVhc29uKTsKICAgIH0pOwogIH07CiAgLyoqCiAgICogQ29uZmlnLXNwZWNpZmljIG1lcmdlLWZ1bmN0aW9uIHdoaWNoIGNyZWF0ZXMgYSBuZXcgY29uZmlnLW9iamVjdAogICAqIGJ5IG1lcmdpbmcgdHdvIGNvbmZpZ3VyYXRpb24gb2JqZWN0cyB0b2dldGhlci4KICAgKgogICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcxCiAgICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZzIKICAgKiBAcmV0dXJucyB7T2JqZWN0fSBOZXcgb2JqZWN0IHJlc3VsdGluZyBmcm9tIG1lcmdpbmcgY29uZmlnMiB0byBjb25maWcxCiAgICovCgoKICB2YXIgbWVyZ2VDb25maWcgPSBmdW5jdGlvbiBtZXJnZUNvbmZpZyhjb25maWcxLCBjb25maWcyKSB7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24KICAgIGNvbmZpZzIgPSBjb25maWcyIHx8IHt9OwogICAgdmFyIGNvbmZpZyA9IHt9OwoKICAgIGZ1bmN0aW9uIGdldE1lcmdlZFZhbHVlKHRhcmdldCwgc291cmNlKSB7CiAgICAgIGlmICh1dGlscy5pc1BsYWluT2JqZWN0KHRhcmdldCkgJiYgdXRpbHMuaXNQbGFpbk9iamVjdChzb3VyY2UpKSB7CiAgICAgICAgcmV0dXJuIHV0aWxzLm1lcmdlKHRhcmdldCwgc291cmNlKTsKICAgICAgfSBlbHNlIGlmICh1dGlscy5pc1BsYWluT2JqZWN0KHNvdXJjZSkpIHsKICAgICAgICByZXR1cm4gdXRpbHMubWVyZ2Uoe30sIHNvdXJjZSk7CiAgICAgIH0gZWxzZSBpZiAodXRpbHMuaXNBcnJheShzb3VyY2UpKSB7CiAgICAgICAgcmV0dXJuIHNvdXJjZS5zbGljZSgpOwogICAgICB9CgogICAgICByZXR1cm4gc291cmNlOwogICAgfSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY29uc2lzdGVudC1yZXR1cm4KCgogICAgZnVuY3Rpb24gbWVyZ2VEZWVwUHJvcGVydGllcyhwcm9wKSB7CiAgICAgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoY29uZmlnMltwcm9wXSkpIHsKICAgICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUoY29uZmlnMVtwcm9wXSwgY29uZmlnMltwcm9wXSk7CiAgICAgIH0gZWxzZSBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGNvbmZpZzFbcHJvcF0pKSB7CiAgICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgY29uZmlnMVtwcm9wXSk7CiAgICAgIH0KICAgIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuCgoKICAgIGZ1bmN0aW9uIHZhbHVlRnJvbUNvbmZpZzIocHJvcCkgewogICAgICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGNvbmZpZzJbcHJvcF0pKSB7CiAgICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgY29uZmlnMltwcm9wXSk7CiAgICAgIH0KICAgIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuCgoKICAgIGZ1bmN0aW9uIGRlZmF1bHRUb0NvbmZpZzIocHJvcCkgewogICAgICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGNvbmZpZzJbcHJvcF0pKSB7CiAgICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgY29uZmlnMltwcm9wXSk7CiAgICAgIH0gZWxzZSBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGNvbmZpZzFbcHJvcF0pKSB7CiAgICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgY29uZmlnMVtwcm9wXSk7CiAgICAgIH0KICAgIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbnNpc3RlbnQtcmV0dXJuCgoKICAgIGZ1bmN0aW9uIG1lcmdlRGlyZWN0S2V5cyhwcm9wKSB7CiAgICAgIGlmIChwcm9wIGluIGNvbmZpZzIpIHsKICAgICAgICByZXR1cm4gZ2V0TWVyZ2VkVmFsdWUoY29uZmlnMVtwcm9wXSwgY29uZmlnMltwcm9wXSk7CiAgICAgIH0gZWxzZSBpZiAocHJvcCBpbiBjb25maWcxKSB7CiAgICAgICAgcmV0dXJuIGdldE1lcmdlZFZhbHVlKHVuZGVmaW5lZCwgY29uZmlnMVtwcm9wXSk7CiAgICAgIH0KICAgIH0KCiAgICB2YXIgbWVyZ2VNYXAgPSB7CiAgICAgICd1cmwnOiB2YWx1ZUZyb21Db25maWcyLAogICAgICAnbWV0aG9kJzogdmFsdWVGcm9tQ29uZmlnMiwKICAgICAgJ2RhdGEnOiB2YWx1ZUZyb21Db25maWcyLAogICAgICAnYmFzZVVSTCc6IGRlZmF1bHRUb0NvbmZpZzIsCiAgICAgICd0cmFuc2Zvcm1SZXF1ZXN0JzogZGVmYXVsdFRvQ29uZmlnMiwKICAgICAgJ3RyYW5zZm9ybVJlc3BvbnNlJzogZGVmYXVsdFRvQ29uZmlnMiwKICAgICAgJ3BhcmFtc1NlcmlhbGl6ZXInOiBkZWZhdWx0VG9Db25maWcyLAogICAgICAndGltZW91dCc6IGRlZmF1bHRUb0NvbmZpZzIsCiAgICAgICd0aW1lb3V0TWVzc2FnZSc6IGRlZmF1bHRUb0NvbmZpZzIsCiAgICAgICd3aXRoQ3JlZGVudGlhbHMnOiBkZWZhdWx0VG9Db25maWcyLAogICAgICAnYWRhcHRlcic6IGRlZmF1bHRUb0NvbmZpZzIsCiAgICAgICdyZXNwb25zZVR5cGUnOiBkZWZhdWx0VG9Db25maWcyLAogICAgICAneHNyZkNvb2tpZU5hbWUnOiBkZWZhdWx0VG9Db25maWcyLAogICAgICAneHNyZkhlYWRlck5hbWUnOiBkZWZhdWx0VG9Db25maWcyLAogICAgICAnb25VcGxvYWRQcm9ncmVzcyc6IGRlZmF1bHRUb0NvbmZpZzIsCiAgICAgICdvbkRvd25sb2FkUHJvZ3Jlc3MnOiBkZWZhdWx0VG9Db25maWcyLAogICAgICAnZGVjb21wcmVzcyc6IGRlZmF1bHRUb0NvbmZpZzIsCiAgICAgICdtYXhDb250ZW50TGVuZ3RoJzogZGVmYXVsdFRvQ29uZmlnMiwKICAgICAgJ21heEJvZHlMZW5ndGgnOiBkZWZhdWx0VG9Db25maWcyLAogICAgICAnYmVmb3JlUmVkaXJlY3QnOiBkZWZhdWx0VG9Db25maWcyLAogICAgICAndHJhbnNwb3J0JzogZGVmYXVsdFRvQ29uZmlnMiwKICAgICAgJ2h0dHBBZ2VudCc6IGRlZmF1bHRUb0NvbmZpZzIsCiAgICAgICdodHRwc0FnZW50JzogZGVmYXVsdFRvQ29uZmlnMiwKICAgICAgJ2NhbmNlbFRva2VuJzogZGVmYXVsdFRvQ29uZmlnMiwKICAgICAgJ3NvY2tldFBhdGgnOiBkZWZhdWx0VG9Db25maWcyLAogICAgICAncmVzcG9uc2VFbmNvZGluZyc6IGRlZmF1bHRUb0NvbmZpZzIsCiAgICAgICd2YWxpZGF0ZVN0YXR1cyc6IG1lcmdlRGlyZWN0S2V5cwogICAgfTsKICAgIHV0aWxzLmZvckVhY2goT2JqZWN0LmtleXMoY29uZmlnMSkuY29uY2F0KE9iamVjdC5rZXlzKGNvbmZpZzIpKSwgZnVuY3Rpb24gY29tcHV0ZUNvbmZpZ1ZhbHVlKHByb3ApIHsKICAgICAgdmFyIG1lcmdlID0gbWVyZ2VNYXBbcHJvcF0gfHwgbWVyZ2VEZWVwUHJvcGVydGllczsKICAgICAgdmFyIGNvbmZpZ1ZhbHVlID0gbWVyZ2UocHJvcCk7CiAgICAgIHV0aWxzLmlzVW5kZWZpbmVkKGNvbmZpZ1ZhbHVlKSAmJiBtZXJnZSAhPT0gbWVyZ2VEaXJlY3RLZXlzIHx8IChjb25maWdbcHJvcF0gPSBjb25maWdWYWx1ZSk7CiAgICB9KTsKICAgIHJldHVybiBjb25maWc7CiAgfTsKCiAgdmFyIGRhdGEgPSB7CiAgICAidmVyc2lvbiI6ICIxLjAuMC1hbHBoYS4xIgogIH07CiAgdmFyIFZFUlNJT04gPSBkYXRhLnZlcnNpb247CiAgdmFyIHZhbGlkYXRvcnMkMSA9IHt9OyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lcwoKICBbJ29iamVjdCcsICdib29sZWFuJywgJ251bWJlcicsICdmdW5jdGlvbicsICdzdHJpbmcnLCAnc3ltYm9sJ10uZm9yRWFjaChmdW5jdGlvbiAodHlwZSwgaSkgewogICAgdmFsaWRhdG9ycyQxW3R5cGVdID0gZnVuY3Rpb24gdmFsaWRhdG9yKHRoaW5nKSB7CiAgICAgIHJldHVybiB0eXBlb2YgdGhpbmcgPT09IHR5cGUgfHwgJ2EnICsgKGkgPCAxID8gJ24gJyA6ICcgJykgKyB0eXBlOwogICAgfTsKICB9KTsKICB2YXIgZGVwcmVjYXRlZFdhcm5pbmdzID0ge307CiAgLyoqCiAgICogVHJhbnNpdGlvbmFsIG9wdGlvbiB2YWxpZGF0b3IKICAgKiBAcGFyYW0ge2Z1bmN0aW9ufGJvb2xlYW4/fSB2YWxpZGF0b3IgLSBzZXQgdG8gZmFsc2UgaWYgdGhlIHRyYW5zaXRpb25hbCBvcHRpb24gaGFzIGJlZW4gcmVtb3ZlZAogICAqIEBwYXJhbSB7c3RyaW5nP30gdmVyc2lvbiAtIGRlcHJlY2F0ZWQgdmVyc2lvbiAvIHJlbW92ZWQgc2luY2UgdmVyc2lvbgogICAqIEBwYXJhbSB7c3RyaW5nP30gbWVzc2FnZSAtIHNvbWUgbWVzc2FnZSB3aXRoIGFkZGl0aW9uYWwgaW5mbwogICAqIEByZXR1cm5zIHtmdW5jdGlvbn0KICAgKi8KCiAgdmFsaWRhdG9ycyQxLnRyYW5zaXRpb25hbCA9IGZ1bmN0aW9uIHRyYW5zaXRpb25hbCh2YWxpZGF0b3IsIHZlcnNpb24sIG1lc3NhZ2UpIHsKICAgIGZ1bmN0aW9uIGZvcm1hdE1lc3NhZ2Uob3B0LCBkZXNjKSB7CiAgICAgIHJldHVybiAnW0F4aW9zIHYnICsgVkVSU0lPTiArICddIFRyYW5zaXRpb25hbCBvcHRpb24gXCcnICsgb3B0ICsgJ1wnJyArIGRlc2MgKyAobWVzc2FnZSA/ICcuICcgKyBtZXNzYWdlIDogJycpOwogICAgfSAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lcwoKCiAgICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlLCBvcHQsIG9wdHMpIHsKICAgICAgaWYgKHZhbGlkYXRvciA9PT0gZmFsc2UpIHsKICAgICAgICB0aHJvdyBuZXcgQXhpb3NFcnJvcl8xKGZvcm1hdE1lc3NhZ2Uob3B0LCAnIGhhcyBiZWVuIHJlbW92ZWQnICsgKHZlcnNpb24gPyAnIGluICcgKyB2ZXJzaW9uIDogJycpKSwgQXhpb3NFcnJvcl8xLkVSUl9ERVBSRUNBVEVEKTsKICAgICAgfQoKICAgICAgaWYgKHZlcnNpb24gJiYgIWRlcHJlY2F0ZWRXYXJuaW5nc1tvcHRdKSB7CiAgICAgICAgZGVwcmVjYXRlZFdhcm5pbmdzW29wdF0gPSB0cnVlOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQoKICAgICAgICBjb25zb2xlLndhcm4oZm9ybWF0TWVzc2FnZShvcHQsICcgaGFzIGJlZW4gZGVwcmVjYXRlZCBzaW5jZSB2JyArIHZlcnNpb24gKyAnIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5lYXIgZnV0dXJlJykpOwogICAgICB9CgogICAgICByZXR1cm4gdmFsaWRhdG9yID8gdmFsaWRhdG9yKHZhbHVlLCBvcHQsIG9wdHMpIDogdHJ1ZTsKICAgIH07CiAgfTsKICAvKioKICAgKiBBc3NlcnQgb2JqZWN0J3MgcHJvcGVydGllcyB0eXBlCiAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMKICAgKiBAcGFyYW0ge29iamVjdH0gc2NoZW1hCiAgICogQHBhcmFtIHtib29sZWFuP30gYWxsb3dVbmtub3duCiAgICovCgoKICBmdW5jdGlvbiBhc3NlcnRPcHRpb25zKG9wdGlvbnMsIHNjaGVtYSwgYWxsb3dVbmtub3duKSB7CiAgICBpZiAodHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnKSB7CiAgICAgIHRocm93IG5ldyBBeGlvc0Vycm9yXzEoJ29wdGlvbnMgbXVzdCBiZSBhbiBvYmplY3QnLCBBeGlvc0Vycm9yXzEuRVJSX0JBRF9PUFRJT05fVkFMVUUpOwogICAgfQoKICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7CiAgICB2YXIgaSA9IGtleXMubGVuZ3RoOwoKICAgIHdoaWxlIChpLS0gPiAwKSB7CiAgICAgIHZhciBvcHQgPSBrZXlzW2ldOwogICAgICB2YXIgdmFsaWRhdG9yID0gc2NoZW1hW29wdF07CgogICAgICBpZiAodmFsaWRhdG9yKSB7CiAgICAgICAgdmFyIHZhbHVlID0gb3B0aW9uc1tvcHRdOwogICAgICAgIHZhciByZXN1bHQgPSB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbGlkYXRvcih2YWx1ZSwgb3B0LCBvcHRpb25zKTsKCiAgICAgICAgaWYgKHJlc3VsdCAhPT0gdHJ1ZSkgewogICAgICAgICAgdGhyb3cgbmV3IEF4aW9zRXJyb3JfMSgnb3B0aW9uICcgKyBvcHQgKyAnIG11c3QgYmUgJyArIHJlc3VsdCwgQXhpb3NFcnJvcl8xLkVSUl9CQURfT1BUSU9OX1ZBTFVFKTsKICAgICAgICB9CgogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICBpZiAoYWxsb3dVbmtub3duICE9PSB0cnVlKSB7CiAgICAgICAgdGhyb3cgbmV3IEF4aW9zRXJyb3JfMSgnVW5rbm93biBvcHRpb24gJyArIG9wdCwgQXhpb3NFcnJvcl8xLkVSUl9CQURfT1BUSU9OKTsKICAgICAgfQogICAgfQogIH0KCiAgdmFyIHZhbGlkYXRvciA9IHsKICAgIGFzc2VydE9wdGlvbnM6IGFzc2VydE9wdGlvbnMsCiAgICB2YWxpZGF0b3JzOiB2YWxpZGF0b3JzJDEKICB9OwogIHZhciB2YWxpZGF0b3JzID0gdmFsaWRhdG9yLnZhbGlkYXRvcnM7CiAgLyoqCiAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIEF4aW9zCiAgICoKICAgKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2VDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2UKICAgKi8KCiAgZnVuY3Rpb24gQXhpb3MoaW5zdGFuY2VDb25maWcpIHsKICAgIHRoaXMuZGVmYXVsdHMgPSBpbnN0YW5jZUNvbmZpZzsKICAgIHRoaXMuaW50ZXJjZXB0b3JzID0gewogICAgICByZXF1ZXN0OiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyXzEoKSwKICAgICAgcmVzcG9uc2U6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXJfMSgpCiAgICB9OwogIH0KICAvKioKICAgKiBEaXNwYXRjaCBhIHJlcXVlc3QKICAgKgogICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gY29uZmlnT3JVcmwgVGhlIGNvbmZpZyBzcGVjaWZpYyBmb3IgdGhpcyByZXF1ZXN0IChtZXJnZWQgd2l0aCB0aGlzLmRlZmF1bHRzKQogICAqIEBwYXJhbSB7P09iamVjdH0gY29uZmlnCiAgICovCgoKICBBeGlvcy5wcm90b3R5cGUucmVxdWVzdCA9IGZ1bmN0aW9uIHJlcXVlc3QoY29uZmlnT3JVcmwsIGNvbmZpZykgewogICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovCiAgICAvLyBBbGxvdyBmb3IgYXhpb3MoJ2V4YW1wbGUvdXJsJ1ssIGNvbmZpZ10pIGEgbGEgZmV0Y2ggQVBJCiAgICBpZiAodHlwZW9mIGNvbmZpZ09yVXJsID09PSAnc3RyaW5nJykgewogICAgICBjb25maWcgPSBjb25maWcgfHwge307CiAgICAgIGNvbmZpZy51cmwgPSBjb25maWdPclVybDsKICAgIH0gZWxzZSB7CiAgICAgIGNvbmZpZyA9IGNvbmZpZ09yVXJsIHx8IHt9OwogICAgfQoKICAgIGNvbmZpZyA9IG1lcmdlQ29uZmlnKHRoaXMuZGVmYXVsdHMsIGNvbmZpZyk7IC8vIFNldCBjb25maWcubWV0aG9kCgogICAgaWYgKGNvbmZpZy5tZXRob2QpIHsKICAgICAgY29uZmlnLm1ldGhvZCA9IGNvbmZpZy5tZXRob2QudG9Mb3dlckNhc2UoKTsKICAgIH0gZWxzZSBpZiAodGhpcy5kZWZhdWx0cy5tZXRob2QpIHsKICAgICAgY29uZmlnLm1ldGhvZCA9IHRoaXMuZGVmYXVsdHMubWV0aG9kLnRvTG93ZXJDYXNlKCk7CiAgICB9IGVsc2UgewogICAgICBjb25maWcubWV0aG9kID0gJ2dldCc7CiAgICB9CgogICAgdmFyIHRyYW5zaXRpb25hbCA9IGNvbmZpZy50cmFuc2l0aW9uYWw7CgogICAgaWYgKHRyYW5zaXRpb25hbCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIHZhbGlkYXRvci5hc3NlcnRPcHRpb25zKHRyYW5zaXRpb25hbCwgewogICAgICAgIHNpbGVudEpTT05QYXJzaW5nOiB2YWxpZGF0b3JzLnRyYW5zaXRpb25hbCh2YWxpZGF0b3JzLmJvb2xlYW4pLAogICAgICAgIGZvcmNlZEpTT05QYXJzaW5nOiB2YWxpZGF0b3JzLnRyYW5zaXRpb25hbCh2YWxpZGF0b3JzLmJvb2xlYW4pLAogICAgICAgIGNsYXJpZnlUaW1lb3V0RXJyb3I6IHZhbGlkYXRvcnMudHJhbnNpdGlvbmFsKHZhbGlkYXRvcnMuYm9vbGVhbikKICAgICAgfSwgZmFsc2UpOwogICAgfSAvLyBmaWx0ZXIgb3V0IHNraXBwZWQgaW50ZXJjZXB0b3JzCgoKICAgIHZhciByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbiA9IFtdOwogICAgdmFyIHN5bmNocm9ub3VzUmVxdWVzdEludGVyY2VwdG9ycyA9IHRydWU7CiAgICB0aGlzLmludGVyY2VwdG9ycy5yZXF1ZXN0LmZvckVhY2goZnVuY3Rpb24gdW5zaGlmdFJlcXVlc3RJbnRlcmNlcHRvcnMoaW50ZXJjZXB0b3IpIHsKICAgICAgaWYgKHR5cGVvZiBpbnRlcmNlcHRvci5ydW5XaGVuID09PSAnZnVuY3Rpb24nICYmIGludGVyY2VwdG9yLnJ1bldoZW4oY29uZmlnKSA9PT0gZmFsc2UpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHN5bmNocm9ub3VzUmVxdWVzdEludGVyY2VwdG9ycyA9IHN5bmNocm9ub3VzUmVxdWVzdEludGVyY2VwdG9ycyAmJiBpbnRlcmNlcHRvci5zeW5jaHJvbm91czsKICAgICAgcmVxdWVzdEludGVyY2VwdG9yQ2hhaW4udW5zaGlmdChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTsKICAgIH0pOwogICAgdmFyIHJlc3BvbnNlSW50ZXJjZXB0b3JDaGFpbiA9IFtdOwogICAgdGhpcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UuZm9yRWFjaChmdW5jdGlvbiBwdXNoUmVzcG9uc2VJbnRlcmNlcHRvcnMoaW50ZXJjZXB0b3IpIHsKICAgICAgcmVzcG9uc2VJbnRlcmNlcHRvckNoYWluLnB1c2goaW50ZXJjZXB0b3IuZnVsZmlsbGVkLCBpbnRlcmNlcHRvci5yZWplY3RlZCk7CiAgICB9KTsKICAgIHZhciBwcm9taXNlOwoKICAgIGlmICghc3luY2hyb25vdXNSZXF1ZXN0SW50ZXJjZXB0b3JzKSB7CiAgICAgIHZhciBjaGFpbiA9IFtkaXNwYXRjaFJlcXVlc3QsIHVuZGVmaW5lZF07CiAgICAgIEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KGNoYWluLCByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbik7CiAgICAgIGNoYWluID0gY2hhaW4uY29uY2F0KHJlc3BvbnNlSW50ZXJjZXB0b3JDaGFpbik7CiAgICAgIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoY29uZmlnKTsKCiAgICAgIHdoaWxlIChjaGFpbi5sZW5ndGgpIHsKICAgICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKGNoYWluLnNoaWZ0KCksIGNoYWluLnNoaWZ0KCkpOwogICAgICB9CgogICAgICByZXR1cm4gcHJvbWlzZTsKICAgIH0KCiAgICB2YXIgbmV3Q29uZmlnID0gY29uZmlnOwoKICAgIHdoaWxlIChyZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbi5sZW5ndGgpIHsKICAgICAgdmFyIG9uRnVsZmlsbGVkID0gcmVxdWVzdEludGVyY2VwdG9yQ2hhaW4uc2hpZnQoKTsKICAgICAgdmFyIG9uUmVqZWN0ZWQgPSByZXF1ZXN0SW50ZXJjZXB0b3JDaGFpbi5zaGlmdCgpOwoKICAgICAgdHJ5IHsKICAgICAgICBuZXdDb25maWcgPSBvbkZ1bGZpbGxlZChuZXdDb25maWcpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIG9uUmVqZWN0ZWQoZXJyb3IpOwogICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogICAgdHJ5IHsKICAgICAgcHJvbWlzZSA9IGRpc3BhdGNoUmVxdWVzdChuZXdDb25maWcpOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgIH0KCiAgICB3aGlsZSAocmVzcG9uc2VJbnRlcmNlcHRvckNoYWluLmxlbmd0aCkgewogICAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKHJlc3BvbnNlSW50ZXJjZXB0b3JDaGFpbi5zaGlmdCgpLCByZXNwb25zZUludGVyY2VwdG9yQ2hhaW4uc2hpZnQoKSk7CiAgICB9CgogICAgcmV0dXJuIHByb21pc2U7CiAgfTsKCiAgQXhpb3MucHJvdG90eXBlLmdldFVyaSA9IGZ1bmN0aW9uIGdldFVyaShjb25maWcpIHsKICAgIGNvbmZpZyA9IG1lcmdlQ29uZmlnKHRoaXMuZGVmYXVsdHMsIGNvbmZpZyk7CiAgICB2YXIgZnVsbFBhdGggPSBidWlsZEZ1bGxQYXRoKGNvbmZpZy5iYXNlVVJMLCBjb25maWcudXJsKTsKICAgIHJldHVybiBidWlsZFVSTChmdWxsUGF0aCwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpOwogIH07IC8vIFByb3ZpZGUgYWxpYXNlcyBmb3Igc3VwcG9ydGVkIHJlcXVlc3QgbWV0aG9kcwoKCiAgdXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdvcHRpb25zJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7CiAgICAvKmVzbGludCBmdW5jLW5hbWVzOjAqLwogICAgQXhpb3MucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbiAodXJsLCBjb25maWcpIHsKICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdChtZXJnZUNvbmZpZyhjb25maWcgfHwge30sIHsKICAgICAgICBtZXRob2Q6IG1ldGhvZCwKICAgICAgICB1cmw6IHVybCwKICAgICAgICBkYXRhOiAoY29uZmlnIHx8IHt9KS5kYXRhCiAgICAgIH0pKTsKICAgIH07CiAgfSk7CiAgdXRpbHMuZm9yRWFjaChbJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2RXaXRoRGF0YShtZXRob2QpIHsKICAgIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovCiAgICBmdW5jdGlvbiBnZW5lcmF0ZUhUVFBNZXRob2QoaXNGb3JtKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiBodHRwTWV0aG9kKHVybCwgZGF0YSwgY29uZmlnKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdChtZXJnZUNvbmZpZyhjb25maWcgfHwge30sIHsKICAgICAgICAgIG1ldGhvZDogbWV0aG9kLAogICAgICAgICAgaGVhZGVyczogaXNGb3JtID8gewogICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnCiAgICAgICAgICB9IDoge30sCiAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICB9KSk7CiAgICAgIH07CiAgICB9CgogICAgQXhpb3MucHJvdG90eXBlW21ldGhvZF0gPSBnZW5lcmF0ZUhUVFBNZXRob2QoKTsKICAgIEF4aW9zLnByb3RvdHlwZVttZXRob2QgKyAnRm9ybSddID0gZ2VuZXJhdGVIVFRQTWV0aG9kKHRydWUpOwogIH0pOwogIHZhciBBeGlvc18xID0gQXhpb3M7CiAgLyoqCiAgICogQSBgQ2FuY2VsVG9rZW5gIGlzIGFuIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIHJlcXVlc3QgY2FuY2VsbGF0aW9uIG9mIGFuIG9wZXJhdGlvbi4KICAgKgogICAqIEBjbGFzcwogICAqIEBwYXJhbSB7RnVuY3Rpb259IGV4ZWN1dG9yIFRoZSBleGVjdXRvciBmdW5jdGlvbi4KICAgKi8KCiAgZnVuY3Rpb24gQ2FuY2VsVG9rZW4oZXhlY3V0b3IpIHsKICAgIGlmICh0eXBlb2YgZXhlY3V0b3IgIT09ICdmdW5jdGlvbicpIHsKICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZXhlY3V0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uLicpOwogICAgfQoKICAgIHZhciByZXNvbHZlUHJvbWlzZTsKICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIHByb21pc2VFeGVjdXRvcihyZXNvbHZlKSB7CiAgICAgIHJlc29sdmVQcm9taXNlID0gcmVzb2x2ZTsKICAgIH0pOwogICAgdmFyIHRva2VuID0gdGhpczsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXMKCiAgICB0aGlzLnByb21pc2UudGhlbihmdW5jdGlvbiAoY2FuY2VsKSB7CiAgICAgIGlmICghdG9rZW4uX2xpc3RlbmVycykgcmV0dXJuOwogICAgICB2YXIgaSA9IHRva2VuLl9saXN0ZW5lcnMubGVuZ3RoOwoKICAgICAgd2hpbGUgKGktLSA+IDApIHsKICAgICAgICB0b2tlbi5fbGlzdGVuZXJzW2ldKGNhbmNlbCk7CiAgICAgIH0KCiAgICAgIHRva2VuLl9saXN0ZW5lcnMgPSBudWxsOwogICAgfSk7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzCgogICAgdGhpcy5wcm9taXNlLnRoZW4gPSBmdW5jdGlvbiAob25mdWxmaWxsZWQpIHsKICAgICAgdmFyIF9yZXNvbHZlOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lcwoKCiAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICB0b2tlbi5zdWJzY3JpYmUocmVzb2x2ZSk7CiAgICAgICAgX3Jlc29sdmUgPSByZXNvbHZlOwogICAgICB9KS50aGVuKG9uZnVsZmlsbGVkKTsKCiAgICAgIHByb21pc2UuY2FuY2VsID0gZnVuY3Rpb24gcmVqZWN0KCkgewogICAgICAgIHRva2VuLnVuc3Vic2NyaWJlKF9yZXNvbHZlKTsKICAgICAgfTsKCiAgICAgIHJldHVybiBwcm9taXNlOwogICAgfTsKCiAgICBleGVjdXRvcihmdW5jdGlvbiBjYW5jZWwobWVzc2FnZSwgY29uZmlnLCByZXF1ZXN0KSB7CiAgICAgIGlmICh0b2tlbi5yZWFzb24pIHsKICAgICAgICAvLyBDYW5jZWxsYXRpb24gaGFzIGFscmVhZHkgYmVlbiByZXF1ZXN0ZWQKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRva2VuLnJlYXNvbiA9IG5ldyBDYW5jZWxlZEVycm9yXzEobWVzc2FnZSwgY29uZmlnLCByZXF1ZXN0KTsKICAgICAgcmVzb2x2ZVByb21pc2UodG9rZW4ucmVhc29uKTsKICAgIH0pOwogIH0KICAvKioKICAgKiBUaHJvd3MgYSBgQ2FuY2VsZWRFcnJvcmAgaWYgY2FuY2VsbGF0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZC4KICAgKi8KCgogIENhbmNlbFRva2VuLnByb3RvdHlwZS50aHJvd0lmUmVxdWVzdGVkID0gZnVuY3Rpb24gdGhyb3dJZlJlcXVlc3RlZCgpIHsKICAgIGlmICh0aGlzLnJlYXNvbikgewogICAgICB0aHJvdyB0aGlzLnJlYXNvbjsKICAgIH0KICB9OwogIC8qKgogICAqIFN1YnNjcmliZSB0byB0aGUgY2FuY2VsIHNpZ25hbAogICAqLwoKCiAgQ2FuY2VsVG9rZW4ucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIHN1YnNjcmliZShsaXN0ZW5lcikgewogICAgaWYgKHRoaXMucmVhc29uKSB7CiAgICAgIGxpc3RlbmVyKHRoaXMucmVhc29uKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmICh0aGlzLl9saXN0ZW5lcnMpIHsKICAgICAgdGhpcy5fbGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5fbGlzdGVuZXJzID0gW2xpc3RlbmVyXTsKICAgIH0KICB9OwogIC8qKgogICAqIFVuc3Vic2NyaWJlIGZyb20gdGhlIGNhbmNlbCBzaWduYWwKICAgKi8KCgogIENhbmNlbFRva2VuLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uIHVuc3Vic2NyaWJlKGxpc3RlbmVyKSB7CiAgICBpZiAoIXRoaXMuX2xpc3RlbmVycykgewogICAgICByZXR1cm47CiAgICB9CgogICAgdmFyIGluZGV4ID0gdGhpcy5fbGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpOwoKICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgdGhpcy5fbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7CiAgICB9CiAgfTsKICAvKioKICAgKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGEgbmV3IGBDYW5jZWxUb2tlbmAgYW5kIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsCiAgICogY2FuY2VscyB0aGUgYENhbmNlbFRva2VuYC4KICAgKi8KCgogIENhbmNlbFRva2VuLnNvdXJjZSA9IGZ1bmN0aW9uIHNvdXJjZSgpIHsKICAgIHZhciBjYW5jZWw7CiAgICB2YXIgdG9rZW4gPSBuZXcgQ2FuY2VsVG9rZW4oZnVuY3Rpb24gZXhlY3V0b3IoYykgewogICAgICBjYW5jZWwgPSBjOwogICAgfSk7CiAgICByZXR1cm4gewogICAgICB0b2tlbjogdG9rZW4sCiAgICAgIGNhbmNlbDogY2FuY2VsCiAgICB9OwogIH07CgogIHZhciBDYW5jZWxUb2tlbl8xID0gQ2FuY2VsVG9rZW47CiAgLyoqCiAgICogU3ludGFjdGljIHN1Z2FyIGZvciBpbnZva2luZyBhIGZ1bmN0aW9uIGFuZCBleHBhbmRpbmcgYW4gYXJyYXkgZm9yIGFyZ3VtZW50cy4KICAgKgogICAqIENvbW1vbiB1c2UgY2FzZSB3b3VsZCBiZSB0byB1c2UgYEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseWAuCiAgICoKICAgKiAgYGBganMKICAgKiAgZnVuY3Rpb24gZih4LCB5LCB6KSB7fQogICAqICB2YXIgYXJncyA9IFsxLCAyLCAzXTsKICAgKiAgZi5hcHBseShudWxsLCBhcmdzKTsKICAgKiAgYGBgCiAgICoKICAgKiBXaXRoIGBzcHJlYWRgIHRoaXMgZXhhbXBsZSBjYW4gYmUgcmUtd3JpdHRlbi4KICAgKgogICAqICBgYGBqcwogICAqICBzcHJlYWQoZnVuY3Rpb24oeCwgeSwgeikge30pKFsxLCAyLCAzXSk7CiAgICogIGBgYAogICAqCiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sKICAgKiBAcmV0dXJucyB7RnVuY3Rpb259CiAgICovCgogIHZhciBzcHJlYWQgPSBmdW5jdGlvbiBzcHJlYWQoY2FsbGJhY2spIHsKICAgIHJldHVybiBmdW5jdGlvbiB3cmFwKGFycikgewogICAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkobnVsbCwgYXJyKTsKICAgIH07CiAgfTsKICAvKioKICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHBheWxvYWQgaXMgYW4gZXJyb3IgdGhyb3duIGJ5IEF4aW9zCiAgICoKICAgKiBAcGFyYW0geyp9IHBheWxvYWQgVGhlIHZhbHVlIHRvIHRlc3QKICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgcGF5bG9hZCBpcyBhbiBlcnJvciB0aHJvd24gYnkgQXhpb3MsIG90aGVyd2lzZSBmYWxzZQogICAqLwoKCiAgdmFyIGlzQXhpb3NFcnJvciA9IGZ1bmN0aW9uIGlzQXhpb3NFcnJvcihwYXlsb2FkKSB7CiAgICByZXR1cm4gdXRpbHMuaXNPYmplY3QocGF5bG9hZCkgJiYgcGF5bG9hZC5pc0F4aW9zRXJyb3IgPT09IHRydWU7CiAgfTsKICAvKioKICAgKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgQXhpb3MKICAgKgogICAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0Q29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlCiAgICogQHJldHVybiB7QXhpb3N9IEEgbmV3IGluc3RhbmNlIG9mIEF4aW9zCiAgICovCgoKICBmdW5jdGlvbiBjcmVhdGVJbnN0YW5jZShkZWZhdWx0Q29uZmlnKSB7CiAgICB2YXIgY29udGV4dCA9IG5ldyBBeGlvc18xKGRlZmF1bHRDb25maWcpOwogICAgdmFyIGluc3RhbmNlID0gYmluZChBeGlvc18xLnByb3RvdHlwZS5yZXF1ZXN0LCBjb250ZXh0KTsgLy8gQ29weSBheGlvcy5wcm90b3R5cGUgdG8gaW5zdGFuY2UKCiAgICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIEF4aW9zXzEucHJvdG90eXBlLCBjb250ZXh0KTsgLy8gQ29weSBjb250ZXh0IHRvIGluc3RhbmNlCgogICAgdXRpbHMuZXh0ZW5kKGluc3RhbmNlLCBjb250ZXh0KTsgLy8gRmFjdG9yeSBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlcwoKICAgIGluc3RhbmNlLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShpbnN0YW5jZUNvbmZpZykgewogICAgICByZXR1cm4gY3JlYXRlSW5zdGFuY2UobWVyZ2VDb25maWcoZGVmYXVsdENvbmZpZywgaW5zdGFuY2VDb25maWcpKTsKICAgIH07CgogICAgcmV0dXJuIGluc3RhbmNlOwogIH0gLy8gQ3JlYXRlIHRoZSBkZWZhdWx0IGluc3RhbmNlIHRvIGJlIGV4cG9ydGVkCgoKICB2YXIgYXhpb3MgPSBjcmVhdGVJbnN0YW5jZShkZWZhdWx0c18xKTsgLy8gRXhwb3NlIEF4aW9zIGNsYXNzIHRvIGFsbG93IGNsYXNzIGluaGVyaXRhbmNlCgogIGF4aW9zLkF4aW9zID0gQXhpb3NfMTsgLy8gRXhwb3NlIENhbmNlbCAmIENhbmNlbFRva2VuCgogIGF4aW9zLkNhbmNlbGVkRXJyb3IgPSBDYW5jZWxlZEVycm9yXzE7CiAgYXhpb3MuQ2FuY2VsVG9rZW4gPSBDYW5jZWxUb2tlbl8xOwogIGF4aW9zLmlzQ2FuY2VsID0gaXNDYW5jZWw7CiAgYXhpb3MuVkVSU0lPTiA9IGRhdGEudmVyc2lvbjsKICBheGlvcy50b0Zvcm1EYXRhID0gdG9Gb3JtRGF0YV8xOyAvLyBFeHBvc2UgQXhpb3NFcnJvciBjbGFzcwoKICBheGlvcy5BeGlvc0Vycm9yID0gQXhpb3NFcnJvcl8xOyAvLyBhbGlhcyBmb3IgQ2FuY2VsZWRFcnJvciBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eQoKICBheGlvcy5DYW5jZWwgPSBheGlvcy5DYW5jZWxlZEVycm9yOyAvLyBFeHBvc2UgYWxsL3NwcmVhZAoKICBheGlvcy5hbGwgPSBmdW5jdGlvbiBhbGwocHJvbWlzZXMpIHsKICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7CiAgfTsKCiAgYXhpb3Muc3ByZWFkID0gc3ByZWFkOyAvLyBFeHBvc2UgaXNBeGlvc0Vycm9yCgogIGF4aW9zLmlzQXhpb3NFcnJvciA9IGlzQXhpb3NFcnJvcjsKCiAgYXhpb3MuZm9ybVRvSlNPTiA9IGZ1bmN0aW9uICh0aGluZykgewogICAgcmV0dXJuIGZvcm1EYXRhVG9KU09OXzEodXRpbHMuaXNIVE1MRm9ybSh0aGluZykgPyBuZXcgRm9ybURhdGEodGhpbmcpIDogdGhpbmcpOwogIH07CgogIHZhciBheGlvc18xID0gYXhpb3M7IC8vIEFsbG93IHVzZSBvZiBkZWZhdWx0IGltcG9ydCBzeW50YXggaW4gVHlwZVNjcmlwdAoKICB2YXIgX2RlZmF1bHQgPSBheGlvczsKICBheGlvc18xLmRlZmF1bHQgPSBfZGVmYXVsdDsKICByZXR1cm4gYXhpb3NfMTsKfSk7"},{"version":3,"names":["global","factory","exports","module","define","amd","globalThis","self","axios","bind","fn","thisArg","wrap","apply","arguments","toString","Object","prototype","kindOf","cache","thing","str","call","slice","toLowerCase","create","kindOfTest","type","isKindOf","isArray","val","Array","isUndefined","isBuffer","constructor","isArrayBuffer","isArrayBufferView","result","ArrayBuffer","isView","buffer","isString","isNumber","isObject","isPlainObject","getPrototypeOf","isDate","isFile","isBlob","isFileList","isFunction","isStream","pipe","isFormData","pattern","FormData","isURLSearchParams","trim","replace","isStandardBrowserEnv","product","navigator","window","document","forEach","obj","i","l","length","key","hasOwnProperty","merge","assignValue","extend","a","b","stripBOM","content","charCodeAt","inherits","superConstructor","props","descriptors","assign","toFlatObject","sourceObj","destObj","filter","propFilter","prop","merged","getOwnPropertyNames","endsWith","searchString","position","String","undefined","lastIndex","indexOf","toArray","arr","isTypedArray","TypedArray","Uint8Array","forEachEntry","generator","Symbol","iterator","next","done","pair","value","matchAll","regExp","matches","exec","push","isHTMLForm","resolver","_hasOwnProperty","utils","AxiosError","message","code","config","request","response","Error","captureStackTrace","stack","name","toJSON","description","number","fileName","lineNumber","columnNumber","status","prototype$1","defineProperties","defineProperty","from","error","customProps","axiosError","cause","AxiosError_1","browser$1","FormData$1","isVisitable","removeBrackets","renderKey","path","dots","concat","map","each","token","join","isFlatArray","some","predicates","test","isSpecCompliant","append","toStringTag","toFormData","formData","options","TypeError","metaTokens","indexes","defined","option","source","visitor","defaultVisitor","_Blob","Blob","useBlob","convertValue","toISOString","Buffer","JSON","stringify","el","index","exposedHelpers","build","pop","toFormData_1","encode$1","charMap","encodeURIComponent","replacer","match","AxiosURLSearchParams","params","_pairs","encoder","_encode","AxiosURLSearchParams_1","encode","buildURL","url","hashmarkIndex","serializerParams","InterceptorManager","handlers","use","fulfilled","rejected","synchronous","runWhen","eject","id","clear","forEachHandler","h","InterceptorManager_1","normalizeHeaderName","headers","normalizedName","processHeader","toUpperCase","transitional","silentJSONParsing","forcedJSONParsing","clarifyTimeoutError","URLSearchParams_1","URLSearchParams","FormData_1","browser","isBrowser","classes","protocols","platform","toURLEncodedForm","data","helpers","isNode","parsePropPath","arrayToObject","keys","len","formDataToJSON","buildPath","target","isNumericKey","Number","isFinite","isLast","entries","formDataToJSON_1","settle","resolve","reject","validateStatus","ERR_BAD_REQUEST","ERR_BAD_RESPONSE","Math","floor","cookies","standardBrowserEnv","write","expires","domain","secure","cookie","Date","toGMTString","read","RegExp","decodeURIComponent","remove","now","nonStandardBrowserEnv","isAbsoluteURL","combineURLs","baseURL","relativeURL","buildFullPath","requestedURL","ignoreDuplicateOf","parseHeaders","parsed","split","parser","line","isURLSameOrigin","msie","userAgent","urlParsingNode","createElement","originURL","resolveURL","href","setAttribute","protocol","host","search","hash","hostname","port","pathname","charAt","location","requestURL","CanceledError","ERR_CANCELED","__CANCEL__","CanceledError_1","parseProtocol","xhr","xhrAdapter","Promise","dispatchXhrRequest","requestData","requestHeaders","responseType","onCanceled","cancelToken","unsubscribe","signal","removeEventListener","XMLHttpRequest","auth","username","password","unescape","Authorization","btoa","fullPath","open","method","paramsSerializer","timeout","onloadend","responseHeaders","getAllResponseHeaders","responseData","responseText","statusText","_resolve","_reject","err","onreadystatechange","handleLoad","readyState","responseURL","setTimeout","onabort","handleAbort","ECONNABORTED","onerror","handleError","ERR_NETWORK","ontimeout","handleTimeout","timeoutErrorMessage","transitional$1","ETIMEDOUT","xsrfValue","withCredentials","xsrfCookieName","xsrfHeaderName","setRequestHeader","onDownloadProgress","addEventListener","onUploadProgress","upload","cancel","req","abort","subscribe","aborted","send","DEFAULT_CONTENT_TYPE","setContentTypeIfUnset","getDefaultAdapter","adapter","process","stringifySafely","rawValue","parse","e","defaults","transformRequest","contentType","hasJSONContentType","isObjectPayload","formSerializer","_FormData","env","transformResponse","JSONRequested","strictJSONParsing","maxContentLength","maxBodyLength","common","forEachMethodNoData","forEachMethodWithData","defaults_1","transformData","fns","context","transform","isCancel","throwIfCancellationRequested","throwIfRequested","dispatchRequest","cleanHeaderConfig","then","onAdapterResolution","onAdapterRejection","reason","mergeConfig","config1","config2","getMergedValue","mergeDeepProperties","valueFromConfig2","defaultToConfig2","mergeDirectKeys","mergeMap","computeConfigValue","configValue","VERSION","version","validators$1","validator","deprecatedWarnings","formatMessage","opt","desc","opts","ERR_DEPRECATED","console","warn","assertOptions","schema","allowUnknown","ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","validators","Axios","instanceConfig","interceptors","configOrUrl","boolean","requestInterceptorChain","synchronousRequestInterceptors","unshiftRequestInterceptors","interceptor","unshift","responseInterceptorChain","pushResponseInterceptors","promise","chain","shift","newConfig","onFulfilled","onRejected","getUri","generateHTTPMethod","isForm","httpMethod","Axios_1","CancelToken","executor","resolvePromise","promiseExecutor","_listeners","onfulfilled","listener","splice","c","CancelToken_1","spread","callback","isAxiosError","payload","createInstance","defaultConfig","instance","Cancel","all","promises","formToJSON","axios_1","_default","default"],"sources":["D:/网页/网页8.6/src/plugins/axios.js"],"sourcesContent":["// axios v1.0.0-alpha.1 Copyright (c) 2022 Matt Zabriskie\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.axios = factory());\n})(this, (function () { 'use strict';\n\n  var bind = function bind(fn, thisArg) {\n    return function wrap() {\n      return fn.apply(thisArg, arguments);\n    };\n  };\n\n  // utils is a library of generic helper functions non-specific to axios\n\n  var toString = Object.prototype.toString;\n\n  // eslint-disable-next-line func-names\n  var kindOf = (function(cache) {\n    // eslint-disable-next-line func-names\n    return function(thing) {\n      var str = toString.call(thing);\n      return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());\n    };\n  })(Object.create(null));\n\n  function kindOfTest(type) {\n    type = type.toLowerCase();\n    return function isKindOf(thing) {\n      return kindOf(thing) === type;\n    };\n  }\n\n  /**\n   * Determine if a value is an Array\n   *\n   * @param {Object} val The value to test\n   * @returns {boolean} True if value is an Array, otherwise false\n   */\n  function isArray(val) {\n    return Array.isArray(val);\n  }\n\n  /**\n   * Determine if a value is undefined\n   *\n   * @param {Object} val The value to test\n   * @returns {boolean} True if the value is undefined, otherwise false\n   */\n  function isUndefined(val) {\n    return typeof val === 'undefined';\n  }\n\n  /**\n   * Determine if a value is a Buffer\n   *\n   * @param {Object} val The value to test\n   * @returns {boolean} True if value is a Buffer, otherwise false\n   */\n  function isBuffer(val) {\n    return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n      && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n  }\n\n  /**\n   * Determine if a value is an ArrayBuffer\n   *\n   * @function\n   * @param {Object} val The value to test\n   * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n   */\n  var isArrayBuffer = kindOfTest('ArrayBuffer');\n\n\n  /**\n   * Determine if a value is a view on an ArrayBuffer\n   *\n   * @param {Object} val The value to test\n   * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n   */\n  function isArrayBufferView(val) {\n    var result;\n    if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n      result = ArrayBuffer.isView(val);\n    } else {\n      result = (val) && (val.buffer) && (isArrayBuffer(val.buffer));\n    }\n    return result;\n  }\n\n  /**\n   * Determine if a value is a String\n   *\n   * @param {Object} val The value to test\n   * @returns {boolean} True if value is a String, otherwise false\n   */\n  function isString(val) {\n    return typeof val === 'string';\n  }\n\n  /**\n   * Determine if a value is a Number\n   *\n   * @param {Object} val The value to test\n   * @returns {boolean} True if value is a Number, otherwise false\n   */\n  function isNumber(val) {\n    return typeof val === 'number';\n  }\n\n  /**\n   * Determine if a value is an Object\n   *\n   * @param {Object} val The value to test\n   * @returns {boolean} True if value is an Object, otherwise false\n   */\n  function isObject(val) {\n    return val !== null && typeof val === 'object';\n  }\n\n  /**\n   * Determine if a value is a plain Object\n   *\n   * @param {Object} val The value to test\n   * @return {boolean} True if value is a plain Object, otherwise false\n   */\n  function isPlainObject(val) {\n    if (kindOf(val) !== 'object') {\n      return false;\n    }\n\n    var prototype = Object.getPrototypeOf(val);\n    return prototype === null || prototype === Object.prototype;\n  }\n\n  /**\n   * Determine if a value is a Date\n   *\n   * @function\n   * @param {Object} val The value to test\n   * @returns {boolean} True if value is a Date, otherwise false\n   */\n  var isDate = kindOfTest('Date');\n\n  /**\n   * Determine if a value is a File\n   *\n   * @function\n   * @param {Object} val The value to test\n   * @returns {boolean} True if value is a File, otherwise false\n   */\n  var isFile = kindOfTest('File');\n\n  /**\n   * Determine if a value is a Blob\n   *\n   * @function\n   * @param {Object} val The value to test\n   * @returns {boolean} True if value is a Blob, otherwise false\n   */\n  var isBlob = kindOfTest('Blob');\n\n  /**\n   * Determine if a value is a FileList\n   *\n   * @function\n   * @param {Object} val The value to test\n   * @returns {boolean} True if value is a File, otherwise false\n   */\n  var isFileList = kindOfTest('FileList');\n\n  /**\n   * Determine if a value is a Function\n   *\n   * @param {Object} val The value to test\n   * @returns {boolean} True if value is a Function, otherwise false\n   */\n  function isFunction(val) {\n    return toString.call(val) === '[object Function]';\n  }\n\n  /**\n   * Determine if a value is a Stream\n   *\n   * @param {Object} val The value to test\n   * @returns {boolean} True if value is a Stream, otherwise false\n   */\n  function isStream(val) {\n    return isObject(val) && isFunction(val.pipe);\n  }\n\n  /**\n   * Determine if a value is a FormData\n   *\n   * @param {Object} thing The value to test\n   * @returns {boolean} True if value is an FormData, otherwise false\n   */\n  function isFormData(thing) {\n    var pattern = '[object FormData]';\n    return thing && (\n      (typeof FormData === 'function' && thing instanceof FormData) ||\n      toString.call(thing) === pattern ||\n      (isFunction(thing.toString) && thing.toString() === pattern)\n    );\n  }\n\n  /**\n   * Determine if a value is a URLSearchParams object\n   * @function\n   * @param {Object} val The value to test\n   * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n   */\n  var isURLSearchParams = kindOfTest('URLSearchParams');\n\n  /**\n   * Trim excess whitespace off the beginning and end of a string\n   *\n   * @param {String} str The String to trim\n   * @returns {String} The String freed of excess whitespace\n   */\n  function trim(str) {\n    return str.trim ? str.trim() : str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n  }\n\n  /**\n   * Determine if we're running in a standard browser environment\n   *\n   * This allows axios to run in a web worker, and react-native.\n   * Both environments support XMLHttpRequest, but not fully standard globals.\n   *\n   * web workers:\n   *  typeof window -> undefined\n   *  typeof document -> undefined\n   *\n   * react-native:\n   *  navigator.product -> 'ReactNative'\n   * nativescript\n   *  navigator.product -> 'NativeScript' or 'NS'\n   */\n  function isStandardBrowserEnv() {\n    var product;\n    if (typeof navigator !== 'undefined' && (\n      (product = navigator.product) === 'ReactNative' ||\n      product === 'NativeScript' ||\n      product === 'NS')\n    ) {\n      return false;\n    }\n\n    return typeof window !== 'undefined' && typeof document !== 'undefined';\n  }\n\n  /**\n   * Iterate over an Array or an Object invoking a function for each item.\n   *\n   * If `obj` is an Array callback will be called passing\n   * the value, index, and complete array for each item.\n   *\n   * If 'obj' is an Object callback will be called passing\n   * the value, key, and complete object for each property.\n   *\n   * @param {Object|Array} obj The object to iterate\n   * @param {Function} fn The callback to invoke for each item\n   */\n  function forEach(obj, fn) {\n    // Don't bother if no value provided\n    if (obj === null || typeof obj === 'undefined') {\n      return;\n    }\n\n    // Force an array if not already something iterable\n    if (typeof obj !== 'object') {\n      /*eslint no-param-reassign:0*/\n      obj = [obj];\n    }\n\n    if (isArray(obj)) {\n      // Iterate over array values\n      for (var i = 0, l = obj.length; i < l; i++) {\n        fn.call(null, obj[i], i, obj);\n      }\n    } else {\n      // Iterate over object keys\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          fn.call(null, obj[key], key, obj);\n        }\n      }\n    }\n  }\n\n  /**\n   * Accepts varargs expecting each argument to be an object, then\n   * immutably merges the properties of each object and returns result.\n   *\n   * When multiple objects contain the same key the later object in\n   * the arguments list will take precedence.\n   *\n   * Example:\n   *\n   * ```js\n   * var result = merge({foo: 123}, {foo: 456});\n   * console.log(result.foo); // outputs 456\n   * ```\n   *\n   * @param {Object} obj1 Object to merge\n   * @returns {Object} Result of all merge properties\n   */\n  function merge(/* obj1, obj2, obj3, ... */) {\n    var result = {};\n    function assignValue(val, key) {\n      if (isPlainObject(result[key]) && isPlainObject(val)) {\n        result[key] = merge(result[key], val);\n      } else if (isPlainObject(val)) {\n        result[key] = merge({}, val);\n      } else if (isArray(val)) {\n        result[key] = val.slice();\n      } else {\n        result[key] = val;\n      }\n    }\n\n    for (var i = 0, l = arguments.length; i < l; i++) {\n      forEach(arguments[i], assignValue);\n    }\n    return result;\n  }\n\n  /**\n   * Extends object a by mutably adding to it the properties of object b.\n   *\n   * @param {Object} a The object to be extended\n   * @param {Object} b The object to copy properties from\n   * @param {Object} thisArg The object to bind function to\n   * @return {Object} The resulting value of object a\n   */\n  function extend(a, b, thisArg) {\n    forEach(b, function assignValue(val, key) {\n      if (thisArg && typeof val === 'function') {\n        a[key] = bind(val, thisArg);\n      } else {\n        a[key] = val;\n      }\n    });\n    return a;\n  }\n\n  /**\n   * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n   *\n   * @param {string} content with BOM\n   * @return {string} content value without BOM\n   */\n  function stripBOM(content) {\n    if (content.charCodeAt(0) === 0xFEFF) {\n      content = content.slice(1);\n    }\n    return content;\n  }\n\n  /**\n   * Inherit the prototype methods from one constructor into another\n   * @param {function} constructor\n   * @param {function} superConstructor\n   * @param {object} [props]\n   * @param {object} [descriptors]\n   */\n\n  function inherits(constructor, superConstructor, props, descriptors) {\n    constructor.prototype = Object.create(superConstructor.prototype, descriptors);\n    constructor.prototype.constructor = constructor;\n    props && Object.assign(constructor.prototype, props);\n  }\n\n  /**\n   * Resolve object with deep prototype chain to a flat object\n   * @param {Object} sourceObj source object\n   * @param {Object} [destObj]\n   * @param {Function|Boolean} [filter]\n   * @param {Function} [propFilter]\n   * @returns {Object}\n   */\n\n  function toFlatObject(sourceObj, destObj, filter, propFilter) {\n    var props;\n    var i;\n    var prop;\n    var merged = {};\n\n    destObj = destObj || {};\n    // eslint-disable-next-line no-eq-null,eqeqeq\n    if (sourceObj == null) return destObj;\n\n    do {\n      props = Object.getOwnPropertyNames(sourceObj);\n      i = props.length;\n      while (i-- > 0) {\n        prop = props[i];\n        if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {\n          destObj[prop] = sourceObj[prop];\n          merged[prop] = true;\n        }\n      }\n      sourceObj = filter !== false && Object.getPrototypeOf(sourceObj);\n    } while (sourceObj && (!filter || filter(sourceObj, destObj)) && sourceObj !== Object.prototype);\n\n    return destObj;\n  }\n\n  /*\n   * determines whether a string ends with the characters of a specified string\n   * @param {String} str\n   * @param {String} searchString\n   * @param {Number} [position= 0]\n   * @returns {boolean}\n   */\n  function endsWith(str, searchString, position) {\n    str = String(str);\n    if (position === undefined || position > str.length) {\n      position = str.length;\n    }\n    position -= searchString.length;\n    var lastIndex = str.indexOf(searchString, position);\n    return lastIndex !== -1 && lastIndex === position;\n  }\n\n\n  /**\n   * Returns new array from array like object or null if failed\n   * @param {*} [thing]\n   * @returns {?Array}\n   */\n  function toArray(thing) {\n    if (!thing) return null;\n    if (isArray(thing)) return thing;\n    var i = thing.length;\n    if (!isNumber(i)) return null;\n    var arr = new Array(i);\n    while (i-- > 0) {\n      arr[i] = thing[i];\n    }\n    return arr;\n  }\n\n  // eslint-disable-next-line func-names\n  var isTypedArray = (function(TypedArray) {\n    // eslint-disable-next-line func-names\n    return function(thing) {\n      return TypedArray && thing instanceof TypedArray;\n    };\n  })(typeof Uint8Array !== 'undefined' && Object.getPrototypeOf(Uint8Array));\n\n  function forEachEntry(obj, fn) {\n    var generator = obj && obj[Symbol.iterator];\n\n    var iterator = generator.call(obj);\n\n    var result;\n\n    while ((result = iterator.next()) && !result.done) {\n      var pair = result.value;\n      fn.call(obj, pair[0], pair[1]);\n    }\n  }\n\n  function matchAll(regExp, str) {\n    var matches;\n    var arr = [];\n\n    while ((matches = regExp.exec(str)) !== null) {\n      arr.push(matches);\n    }\n\n    return arr;\n  }\n\n  var isHTMLForm = kindOfTest('HTMLFormElement');\n\n  var hasOwnProperty = (function resolver(_hasOwnProperty) {\n    return function(obj, prop) {\n      return _hasOwnProperty.call(obj, prop);\n    };\n  })(Object.prototype.hasOwnProperty);\n\n  var utils = {\n    isArray: isArray,\n    isArrayBuffer: isArrayBuffer,\n    isBuffer: isBuffer,\n    isFormData: isFormData,\n    isArrayBufferView: isArrayBufferView,\n    isString: isString,\n    isNumber: isNumber,\n    isObject: isObject,\n    isPlainObject: isPlainObject,\n    isUndefined: isUndefined,\n    isDate: isDate,\n    isFile: isFile,\n    isBlob: isBlob,\n    isFunction: isFunction,\n    isStream: isStream,\n    isURLSearchParams: isURLSearchParams,\n    isStandardBrowserEnv: isStandardBrowserEnv,\n    forEach: forEach,\n    merge: merge,\n    extend: extend,\n    trim: trim,\n    stripBOM: stripBOM,\n    inherits: inherits,\n    toFlatObject: toFlatObject,\n    kindOf: kindOf,\n    kindOfTest: kindOfTest,\n    endsWith: endsWith,\n    toArray: toArray,\n    isTypedArray: isTypedArray,\n    isFileList: isFileList,\n    forEachEntry: forEachEntry,\n    matchAll: matchAll,\n    isHTMLForm: isHTMLForm,\n    hasOwnProperty: hasOwnProperty\n  };\n\n  /**\n   * Create an Error with the specified message, config, error code, request and response.\n   *\n   * @param {string} message The error message.\n   * @param {string} [code] The error code (for example, 'ECONNABORTED').\n   * @param {Object} [config] The config.\n   * @param {Object} [request] The request.\n   * @param {Object} [response] The response.\n   * @returns {Error} The created error.\n   */\n  function AxiosError(message, code, config, request, response) {\n    Error.call(this);\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    } else {\n      this.stack = (new Error()).stack;\n    }\n\n    this.message = message;\n    this.name = 'AxiosError';\n    code && (this.code = code);\n    config && (this.config = config);\n    request && (this.request = request);\n    response && (this.response = response);\n  }\n\n  utils.inherits(AxiosError, Error, {\n    toJSON: function toJSON() {\n      return {\n        // Standard\n        message: this.message,\n        name: this.name,\n        // Microsoft\n        description: this.description,\n        number: this.number,\n        // Mozilla\n        fileName: this.fileName,\n        lineNumber: this.lineNumber,\n        columnNumber: this.columnNumber,\n        stack: this.stack,\n        // Axios\n        config: this.config,\n        code: this.code,\n        status: this.response && this.response.status ? this.response.status : null\n      };\n    }\n  });\n\n  var prototype$1 = AxiosError.prototype;\n  var descriptors = {};\n\n  [\n    'ERR_BAD_OPTION_VALUE',\n    'ERR_BAD_OPTION',\n    'ECONNABORTED',\n    'ETIMEDOUT',\n    'ERR_NETWORK',\n    'ERR_FR_TOO_MANY_REDIRECTS',\n    'ERR_DEPRECATED',\n    'ERR_BAD_RESPONSE',\n    'ERR_BAD_REQUEST',\n    'ERR_CANCELED',\n    'ERR_NOT_SUPPORT',\n    'ERR_INVALID_URL'\n  // eslint-disable-next-line func-names\n  ].forEach(function(code) {\n    descriptors[code] = {value: code};\n  });\n\n  Object.defineProperties(AxiosError, descriptors);\n  Object.defineProperty(prototype$1, 'isAxiosError', {value: true});\n\n  // eslint-disable-next-line func-names\n  AxiosError.from = function(error, code, config, request, response, customProps) {\n    var axiosError = Object.create(prototype$1);\n\n    utils.toFlatObject(error, axiosError, function filter(obj) {\n      return obj !== Error.prototype;\n    });\n\n    AxiosError.call(axiosError, error.message, code, config, request, response);\n\n    axiosError.cause = error;\n\n    axiosError.name = error.name;\n\n    customProps && Object.assign(axiosError, customProps);\n\n    return axiosError;\n  };\n\n  var AxiosError_1 = AxiosError;\n\n  /* eslint-env browser */\n  var browser$1 = typeof self == 'object' ? self.FormData : window.FormData;\n\n  // eslint-disable-next-line strict\n  var FormData$1 = browser$1;\n\n  function isVisitable(thing) {\n    return utils.isPlainObject(thing) || utils.isArray(thing);\n  }\n\n  function removeBrackets(key) {\n    return utils.endsWith(key, '[]') ? key.slice(0, -2) : key;\n  }\n\n  function renderKey(path, key, dots) {\n    if (!path) return key;\n    return path.concat(key).map(function each(token, i) {\n      // eslint-disable-next-line no-param-reassign\n      token = removeBrackets(token);\n      return !dots && i ? '[' + token + ']' : token;\n    }).join(dots ? '.' : '');\n  }\n\n  function isFlatArray(arr) {\n    return utils.isArray(arr) && !arr.some(isVisitable);\n  }\n\n  var predicates = utils.toFlatObject(utils, {}, null, function filter(prop) {\n    return /^is[A-Z]/.test(prop);\n  });\n\n  function isSpecCompliant(thing) {\n    return thing && utils.isFunction(thing.append) && thing[Symbol.toStringTag] === 'FormData' && thing[Symbol.iterator];\n  }\n\n  /**\n   * Convert a data object to FormData\n   * @param {Object} obj\n   * @param {?Object} [formData]\n   * @param {?Object} [options]\n   * @param {Function} [options.visitor]\n   * @param {Boolean} [options.metaTokens = true]\n   * @param {Boolean} [options.dots = false]\n   * @param {?Boolean} [options.indexes = false]\n   * @returns {Object}\n   **/\n\n  function toFormData(obj, formData, options) {\n    if (!utils.isObject(obj)) {\n      throw new TypeError('target must be an object');\n    }\n\n    // eslint-disable-next-line no-param-reassign\n    formData = formData || new (FormData$1 || FormData)();\n\n    // eslint-disable-next-line no-param-reassign\n    options = utils.toFlatObject(options, {\n      metaTokens: true,\n      dots: false,\n      indexes: false\n    }, false, function defined(option, source) {\n      // eslint-disable-next-line no-eq-null,eqeqeq\n      return !utils.isUndefined(source[option]);\n    });\n\n    var metaTokens = options.metaTokens;\n    // eslint-disable-next-line no-use-before-define\n    var visitor = options.visitor || defaultVisitor;\n    var dots = options.dots;\n    var indexes = options.indexes;\n    var _Blob = options.Blob || typeof Blob !== 'undefined' && Blob;\n    var useBlob = _Blob && isSpecCompliant(formData);\n\n    if (!utils.isFunction(visitor)) {\n      throw new TypeError('visitor must be a function');\n    }\n\n    function convertValue(value) {\n      if (value === null) return '';\n\n      if (utils.isDate(value)) {\n        return value.toISOString();\n      }\n\n      if (!useBlob && utils.isBlob(value)) {\n        throw new AxiosError_1('Blob is not supported. Use a Buffer instead.');\n      }\n\n      if (utils.isArrayBuffer(value) || utils.isTypedArray(value)) {\n        return useBlob && typeof Blob === 'function' ? new Blob([value]) : Buffer.from(value);\n      }\n\n      return value;\n    }\n\n    /**\n     *\n     * @param {*} value\n     * @param {String|Number} key\n     * @param {Array<String|Number>} path\n     * @this {FormData}\n     * @returns {boolean} return true to visit the each prop of the value recursively\n     */\n    function defaultVisitor(value, key, path) {\n      var arr = value;\n\n      if (value && !path && typeof value === 'object') {\n        if (utils.endsWith(key, '{}')) {\n          // eslint-disable-next-line no-param-reassign\n          key = metaTokens ? key : key.slice(0, -2);\n          // eslint-disable-next-line no-param-reassign\n          value = JSON.stringify(value);\n        } else if (\n          (utils.isArray(value) && isFlatArray(value)) ||\n          (utils.isFileList(value) || utils.endsWith(key, '[]') && (arr = utils.toArray(value))\n          )) {\n          // eslint-disable-next-line no-param-reassign\n          key = removeBrackets(key);\n\n          arr.forEach(function each(el, index) {\n            !utils.isUndefined(el) && formData.append(\n              // eslint-disable-next-line no-nested-ternary\n              indexes === true ? renderKey([key], index, dots) : (indexes === null ? key : key + '[]'),\n              convertValue(el)\n            );\n          });\n          return false;\n        }\n      }\n\n      if (isVisitable(value)) {\n        return true;\n      }\n\n      formData.append(renderKey(path, key, dots), convertValue(value));\n\n      return false;\n    }\n\n    var stack = [];\n\n    var exposedHelpers = Object.assign(predicates, {\n      defaultVisitor: defaultVisitor,\n      convertValue: convertValue,\n      isVisitable: isVisitable\n    });\n\n    function build(value, path) {\n      if (utils.isUndefined(value)) return;\n\n      if (stack.indexOf(value) !== -1) {\n        throw Error('Circular reference detected in ' + path.join('.'));\n      }\n\n      stack.push(value);\n\n      utils.forEach(value, function each(el, key) {\n        var result = !utils.isUndefined(el) && visitor.call(\n          formData, el, utils.isString(key) ? key.trim() : key, path, exposedHelpers\n        );\n\n        if (result === true) {\n          build(el, path ? path.concat(key) : [key]);\n        }\n      });\n\n      stack.pop();\n    }\n\n    if (!utils.isObject(obj)) {\n      throw new TypeError('data must be an object');\n    }\n\n    build(obj);\n\n    return formData;\n  }\n\n  var toFormData_1 = toFormData;\n\n  function encode$1(str) {\n    var charMap = {\n      '!': '%21',\n      \"'\": '%27',\n      '(': '%28',\n      ')': '%29',\n      '~': '%7E',\n      '%20': '+',\n      '%00': '\\x00'\n    };\n    return encodeURIComponent(str).replace(/[!'\\(\\)~]|%20|%00/g, function replacer(match) {\n      return charMap[match];\n    });\n  }\n\n  function AxiosURLSearchParams(params, options) {\n    this._pairs = [];\n\n    params && toFormData_1(params, this, options);\n  }\n\n  var prototype = AxiosURLSearchParams.prototype;\n\n  prototype.append = function append(name, value) {\n    this._pairs.push([name, value]);\n  };\n\n  prototype.toString = function toString(encoder) {\n    var _encode = encoder ? function(value) {\n      return encoder.call(this, value, encode$1);\n    } : encode$1;\n\n    return this._pairs.map(function each(pair) {\n      return _encode(pair[0]) + '=' + _encode(pair[1]);\n    }, '').join('&');\n  };\n\n  var AxiosURLSearchParams_1 = AxiosURLSearchParams;\n\n  function encode(val) {\n    return encodeURIComponent(val).\n      replace(/%3A/gi, ':').\n      replace(/%24/g, '$').\n      replace(/%2C/gi, ',').\n      replace(/%20/g, '+').\n      replace(/%5B/gi, '[').\n      replace(/%5D/gi, ']');\n  }\n\n  /**\n   * Build a URL by appending params to the end\n   *\n   * @param {string} url The base of the url (e.g., http://www.google.com)\n   * @param {object} [params] The params to be appended\n   * @param {?object} options\n   * @returns {string} The formatted url\n   */\n  var buildURL = function buildURL(url, params, options) {\n    /*eslint no-param-reassign:0*/\n    if (!params) {\n      return url;\n    }\n\n    var hashmarkIndex = url.indexOf('#');\n\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    var _encode = options && options.encode || encode;\n\n    var serializerParams = utils.isURLSearchParams(params) ?\n      params.toString() :\n      new AxiosURLSearchParams_1(params, options).toString(_encode);\n\n    if (serializerParams) {\n      url += (url.indexOf('?') === -1 ? '?' : '&') + serializerParams;\n    }\n\n    return url;\n  };\n\n  function InterceptorManager() {\n    this.handlers = [];\n  }\n\n  /**\n   * Add a new interceptor to the stack\n   *\n   * @param {Function} fulfilled The function to handle `then` for a `Promise`\n   * @param {Function} rejected The function to handle `reject` for a `Promise`\n   *\n   * @return {Number} An ID used to remove interceptor later\n   */\n  InterceptorManager.prototype.use = function use(fulfilled, rejected, options) {\n    this.handlers.push({\n      fulfilled: fulfilled,\n      rejected: rejected,\n      synchronous: options ? options.synchronous : false,\n      runWhen: options ? options.runWhen : null\n    });\n    return this.handlers.length - 1;\n  };\n\n  /**\n   * Remove an interceptor from the stack\n   *\n   * @param {Number} id The ID that was returned by `use`\n   */\n  InterceptorManager.prototype.eject = function eject(id) {\n    if (this.handlers[id]) {\n      this.handlers[id] = null;\n    }\n  };\n\n  /**\n   * Clear all interceptors from the stack\n   */\n  InterceptorManager.prototype.clear = function clear() {\n    if (this.handlers) {\n      this.handlers = [];\n    }\n  };\n\n  /**\n   * Iterate over all the registered interceptors\n   *\n   * This method is particularly useful for skipping over any\n   * interceptors that may have become `null` calling `eject`.\n   *\n   * @param {Function} fn The function to call for each interceptor\n   */\n  InterceptorManager.prototype.forEach = function forEach(fn) {\n    utils.forEach(this.handlers, function forEachHandler(h) {\n      if (h !== null) {\n        fn(h);\n      }\n    });\n  };\n\n  var InterceptorManager_1 = InterceptorManager;\n\n  var normalizeHeaderName = function normalizeHeaderName(headers, normalizedName) {\n    utils.forEach(headers, function processHeader(value, name) {\n      if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n        headers[normalizedName] = value;\n        delete headers[name];\n      }\n    });\n  };\n\n  var transitional = {\n    silentJSONParsing: true,\n    forcedJSONParsing: true,\n    clarifyTimeoutError: false\n  };\n\n  var URLSearchParams_1 = typeof URLSearchParams !== 'undefined' ? URLSearchParams : AxiosURLSearchParams_1;\n\n  var FormData_1 = FormData;\n\n  var browser = {\n    isBrowser: true,\n    classes: {\n      URLSearchParams: URLSearchParams_1,\n      FormData: FormData_1,\n      Blob: Blob\n    },\n    protocols: ['http', 'https', 'file', 'blob', 'url']\n  };\n\n  var platform = browser;\n\n  var toURLEncodedForm = function toURLEncodedForm(data, options) {\n    return toFormData_1(data, new platform.classes.URLSearchParams(), Object.assign({\n      visitor: function(value, key, path, helpers) {\n        if (platform.isNode && utils.isBuffer(value)) {\n          this.append(key, value.toString('base64'));\n          return false;\n        }\n\n        return helpers.defaultVisitor.apply(this, arguments);\n      }\n    }, options));\n  };\n\n  function parsePropPath(name) {\n    // foo[x][y][z]\n    // foo.x.y.z\n    // foo-x-y-z\n    // foo x y z\n    return utils.matchAll(/\\w+|\\[(\\w*)]/g, name).map(function(match) {\n      return match[0] === '[]' ? '' : match[1] || match[0];\n    });\n  }\n\n  function arrayToObject(arr) {\n    var obj = {};\n    var keys = Object.keys(arr);\n    var i;\n    var len = keys.length;\n    var key;\n    for (i = 0; i < len; i++) {\n      key = keys[i];\n      obj[key] = arr[key];\n    }\n    return obj;\n  }\n\n  function formDataToJSON(formData) {\n    function buildPath(path, value, target, index) {\n      var name = path[index++];\n      var isNumericKey = Number.isFinite(+name);\n      var isLast = index >= path.length;\n      name = !name && utils.isArray(target) ? target.length : name;\n\n      if (isLast) {\n        if (utils.hasOwnProperty(target, name)) {\n          target[name] = [target[name], value];\n        } else {\n          target[name] = value;\n        }\n\n        return !isNumericKey;\n      }\n\n      if (!target[name] || !utils.isObject(target[name])) {\n        target[name] = [];\n      }\n\n      var result = buildPath(path, value, target[name], index);\n\n      if (result && utils.isArray(target[name])) {\n        target[name] = arrayToObject(target[name]);\n      }\n\n      return !isNumericKey;\n    }\n\n    if (utils.isFormData(formData) && utils.isFunction(formData.entries)) {\n      var obj = {};\n\n      utils.forEachEntry(formData, function(name, value) {\n        buildPath(parsePropPath(name), value, obj, 0);\n      });\n\n      return obj;\n    }\n\n    return null;\n  }\n\n  var formDataToJSON_1 = formDataToJSON;\n\n  /**\n   * Resolve or reject a Promise based on response status.\n   *\n   * @param {Function} resolve A function that resolves the promise.\n   * @param {Function} reject A function that rejects the promise.\n   * @param {object} response The response.\n   */\n  var settle = function settle(resolve, reject, response) {\n    var validateStatus = response.config.validateStatus;\n    if (!response.status || !validateStatus || validateStatus(response.status)) {\n      resolve(response);\n    } else {\n      reject(new AxiosError_1(\n        'Request failed with status code ' + response.status,\n        [AxiosError_1.ERR_BAD_REQUEST, AxiosError_1.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],\n        response.config,\n        response.request,\n        response\n      ));\n    }\n  };\n\n  var cookies = (\n    utils.isStandardBrowserEnv() ?\n\n    // Standard browser envs support document.cookie\n      (function standardBrowserEnv() {\n        return {\n          write: function write(name, value, expires, path, domain, secure) {\n            var cookie = [];\n            cookie.push(name + '=' + encodeURIComponent(value));\n\n            if (utils.isNumber(expires)) {\n              cookie.push('expires=' + new Date(expires).toGMTString());\n            }\n\n            if (utils.isString(path)) {\n              cookie.push('path=' + path);\n            }\n\n            if (utils.isString(domain)) {\n              cookie.push('domain=' + domain);\n            }\n\n            if (secure === true) {\n              cookie.push('secure');\n            }\n\n            document.cookie = cookie.join('; ');\n          },\n\n          read: function read(name) {\n            var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n            return (match ? decodeURIComponent(match[3]) : null);\n          },\n\n          remove: function remove(name) {\n            this.write(name, '', Date.now() - 86400000);\n          }\n        };\n      })() :\n\n    // Non standard browser env (web workers, react-native) lack needed support.\n      (function nonStandardBrowserEnv() {\n        return {\n          write: function write() {},\n          read: function read() { return null; },\n          remove: function remove() {}\n        };\n      })()\n  );\n\n  /**\n   * Determines whether the specified URL is absolute\n   *\n   * @param {string} url The URL to test\n   * @returns {boolean} True if the specified URL is absolute, otherwise false\n   */\n  var isAbsoluteURL = function isAbsoluteURL(url) {\n    // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n    // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n    // by any combination of letters, digits, plus, period, or hyphen.\n    return /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(url);\n  };\n\n  /**\n   * Creates a new URL by combining the specified URLs\n   *\n   * @param {string} baseURL The base URL\n   * @param {string} relativeURL The relative URL\n   * @returns {string} The combined URL\n   */\n  var combineURLs = function combineURLs(baseURL, relativeURL) {\n    return relativeURL\n      ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n      : baseURL;\n  };\n\n  /**\n   * Creates a new URL by combining the baseURL with the requestedURL,\n   * only when the requestedURL is not already an absolute URL.\n   * If the requestURL is absolute, this function returns the requestedURL untouched.\n   *\n   * @param {string} baseURL The base URL\n   * @param {string} requestedURL Absolute or relative URL to combine\n   * @returns {string} The combined full path\n   */\n  var buildFullPath = function buildFullPath(baseURL, requestedURL) {\n    if (baseURL && !isAbsoluteURL(requestedURL)) {\n      return combineURLs(baseURL, requestedURL);\n    }\n    return requestedURL;\n  };\n\n  // Headers whose duplicates are ignored by node\n  // c.f. https://nodejs.org/api/http.html#http_message_headers\n  var ignoreDuplicateOf = [\n    'age', 'authorization', 'content-length', 'content-type', 'etag',\n    'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n    'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n    'referer', 'retry-after', 'user-agent'\n  ];\n\n  /**\n   * Parse headers into an object\n   *\n   * ```\n   * Date: Wed, 27 Aug 2014 08:58:49 GMT\n   * Content-Type: application/json\n   * Connection: keep-alive\n   * Transfer-Encoding: chunked\n   * ```\n   *\n   * @param {String} headers Headers needing to be parsed\n   * @returns {Object} Headers parsed into an object\n   */\n  var parseHeaders = function parseHeaders(headers) {\n    var parsed = {};\n    var key;\n    var val;\n    var i;\n\n    if (!headers) { return parsed; }\n\n    utils.forEach(headers.split('\\n'), function parser(line) {\n      i = line.indexOf(':');\n      key = utils.trim(line.slice(0, i)).toLowerCase();\n      val = utils.trim(line.slice(i + 1));\n\n      if (key) {\n        if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n          return;\n        }\n        if (key === 'set-cookie') {\n          parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n        } else {\n          parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n        }\n      }\n    });\n\n    return parsed;\n  };\n\n  var isURLSameOrigin = (\n    utils.isStandardBrowserEnv() ?\n\n    // Standard browser envs have full support of the APIs needed to test\n    // whether the request URL is of the same origin as current location.\n      (function standardBrowserEnv() {\n        var msie = /(msie|trident)/i.test(navigator.userAgent);\n        var urlParsingNode = document.createElement('a');\n        var originURL;\n\n        /**\n        * Parse a URL to discover it's components\n        *\n        * @param {String} url The URL to be parsed\n        * @returns {Object}\n        */\n        function resolveURL(url) {\n          var href = url;\n\n          if (msie) {\n            // IE needs attribute set twice to normalize properties\n            urlParsingNode.setAttribute('href', href);\n            href = urlParsingNode.href;\n          }\n\n          urlParsingNode.setAttribute('href', href);\n\n          // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n          return {\n            href: urlParsingNode.href,\n            protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n            host: urlParsingNode.host,\n            search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n            hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n            hostname: urlParsingNode.hostname,\n            port: urlParsingNode.port,\n            pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n              urlParsingNode.pathname :\n              '/' + urlParsingNode.pathname\n          };\n        }\n\n        originURL = resolveURL(window.location.href);\n\n        /**\n        * Determine if a URL shares the same origin as the current location\n        *\n        * @param {String} requestURL The URL to test\n        * @returns {boolean} True if URL shares the same origin, otherwise false\n        */\n        return function isURLSameOrigin(requestURL) {\n          var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n          return (parsed.protocol === originURL.protocol &&\n              parsed.host === originURL.host);\n        };\n      })() :\n\n      // Non standard browser envs (web workers, react-native) lack needed support.\n      (function nonStandardBrowserEnv() {\n        return function isURLSameOrigin() {\n          return true;\n        };\n      })()\n  );\n\n  /**\n   * A `CanceledError` is an object that is thrown when an operation is canceled.\n   *\n   * @class\n   * @param {string=} message The message.\n   * @param {Object=} config The config.\n   * @param {Object=} request The request.\n   */\n  function CanceledError(message, config, request) {\n    // eslint-disable-next-line no-eq-null,eqeqeq\n    AxiosError_1.call(this, message == null ? 'canceled' : message, AxiosError_1.ERR_CANCELED, config, request);\n    this.name = 'CanceledError';\n  }\n\n  utils.inherits(CanceledError, AxiosError_1, {\n    __CANCEL__: true\n  });\n\n  var CanceledError_1 = CanceledError;\n\n  var parseProtocol = function parseProtocol(url) {\n    var match = /^([-+\\w]{1,25})(:?\\/\\/|:)/.exec(url);\n    return match && match[1] || '';\n  };\n\n  var xhr = function xhrAdapter(config) {\n    return new Promise(function dispatchXhrRequest(resolve, reject) {\n      var requestData = config.data;\n      var requestHeaders = config.headers;\n      var responseType = config.responseType;\n      var onCanceled;\n      function done() {\n        if (config.cancelToken) {\n          config.cancelToken.unsubscribe(onCanceled);\n        }\n\n        if (config.signal) {\n          config.signal.removeEventListener('abort', onCanceled);\n        }\n      }\n\n      if (utils.isFormData(requestData) && utils.isStandardBrowserEnv()) {\n        delete requestHeaders['Content-Type']; // Let the browser set it\n      }\n\n      var request = new XMLHttpRequest();\n\n      // HTTP basic authentication\n      if (config.auth) {\n        var username = config.auth.username || '';\n        var password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : '';\n        requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n      }\n\n      var fullPath = buildFullPath(config.baseURL, config.url);\n\n      request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n      // Set the request timeout in MS\n      request.timeout = config.timeout;\n\n      function onloadend() {\n        if (!request) {\n          return;\n        }\n        // Prepare the response\n        var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n        var responseData = !responseType || responseType === 'text' ||  responseType === 'json' ?\n          request.responseText : request.response;\n        var response = {\n          data: responseData,\n          status: request.status,\n          statusText: request.statusText,\n          headers: responseHeaders,\n          config: config,\n          request: request\n        };\n\n        settle(function _resolve(value) {\n          resolve(value);\n          done();\n        }, function _reject(err) {\n          reject(err);\n          done();\n        }, response);\n\n        // Clean up request\n        request = null;\n      }\n\n      if ('onloadend' in request) {\n        // Use onloadend if available\n        request.onloadend = onloadend;\n      } else {\n        // Listen for ready state to emulate onloadend\n        request.onreadystatechange = function handleLoad() {\n          if (!request || request.readyState !== 4) {\n            return;\n          }\n\n          // The request errored out and we didn't get a response, this will be\n          // handled by onerror instead\n          // With one exception: request that using file: protocol, most browsers\n          // will return status as 0 even though it's a successful request\n          if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n            return;\n          }\n          // readystate handler is calling before onerror or ontimeout handlers,\n          // so we should call onloadend on the next 'tick'\n          setTimeout(onloadend);\n        };\n      }\n\n      // Handle browser request cancellation (as opposed to a manual cancellation)\n      request.onabort = function handleAbort() {\n        if (!request) {\n          return;\n        }\n\n        reject(new AxiosError_1('Request aborted', AxiosError_1.ECONNABORTED, config, request));\n\n        // Clean up request\n        request = null;\n      };\n\n      // Handle low level network errors\n      request.onerror = function handleError() {\n        // Real errors are hidden from us by the browser\n        // onerror should only fire if it's a network error\n        reject(new AxiosError_1('Network Error', AxiosError_1.ERR_NETWORK, config, request));\n\n        // Clean up request\n        request = null;\n      };\n\n      // Handle timeout\n      request.ontimeout = function handleTimeout() {\n        var timeoutErrorMessage = config.timeout ? 'timeout of ' + config.timeout + 'ms exceeded' : 'timeout exceeded';\n        var transitional$1 = config.transitional || transitional;\n        if (config.timeoutErrorMessage) {\n          timeoutErrorMessage = config.timeoutErrorMessage;\n        }\n        reject(new AxiosError_1(\n          timeoutErrorMessage,\n          transitional$1.clarifyTimeoutError ? AxiosError_1.ETIMEDOUT : AxiosError_1.ECONNABORTED,\n          config,\n          request));\n\n        // Clean up request\n        request = null;\n      };\n\n      // Add xsrf header\n      // This is only done if running in a standard browser environment.\n      // Specifically not if we're in a web worker, or react-native.\n      if (utils.isStandardBrowserEnv()) {\n        // Add xsrf header\n        var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?\n          cookies.read(config.xsrfCookieName) :\n          undefined;\n\n        if (xsrfValue) {\n          requestHeaders[config.xsrfHeaderName] = xsrfValue;\n        }\n      }\n\n      // Add headers to the request\n      if ('setRequestHeader' in request) {\n        utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n          if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n            // Remove Content-Type if data is undefined\n            delete requestHeaders[key];\n          } else {\n            // Otherwise add header to the request\n            request.setRequestHeader(key, val);\n          }\n        });\n      }\n\n      // Add withCredentials to request if needed\n      if (!utils.isUndefined(config.withCredentials)) {\n        request.withCredentials = !!config.withCredentials;\n      }\n\n      // Add responseType to request if needed\n      if (responseType && responseType !== 'json') {\n        request.responseType = config.responseType;\n      }\n\n      // Handle progress if needed\n      if (typeof config.onDownloadProgress === 'function') {\n        request.addEventListener('progress', config.onDownloadProgress);\n      }\n\n      // Not all browsers support upload events\n      if (typeof config.onUploadProgress === 'function' && request.upload) {\n        request.upload.addEventListener('progress', config.onUploadProgress);\n      }\n\n      if (config.cancelToken || config.signal) {\n        // Handle cancellation\n        // eslint-disable-next-line func-names\n        onCanceled = function(cancel) {\n          if (!request) {\n            return;\n          }\n          reject(!cancel || cancel.type ? new CanceledError_1(null, config, req) : cancel);\n          request.abort();\n          request = null;\n        };\n\n        config.cancelToken && config.cancelToken.subscribe(onCanceled);\n        if (config.signal) {\n          config.signal.aborted ? onCanceled() : config.signal.addEventListener('abort', onCanceled);\n        }\n      }\n\n      if (!requestData) {\n        requestData = null;\n      }\n\n      var protocol = parseProtocol(fullPath);\n\n      if (protocol && platform.protocols.indexOf(protocol) === -1) {\n        reject(new AxiosError_1('Unsupported protocol ' + protocol + ':', AxiosError_1.ERR_BAD_REQUEST, config));\n        return;\n      }\n\n\n      // Send the request\n      request.send(requestData);\n    });\n  };\n\n  var DEFAULT_CONTENT_TYPE = {\n    'Content-Type': 'application/x-www-form-urlencoded'\n  };\n\n  function setContentTypeIfUnset(headers, value) {\n    if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n      headers['Content-Type'] = value;\n    }\n  }\n\n  function getDefaultAdapter() {\n    var adapter;\n    if (typeof XMLHttpRequest !== 'undefined') {\n      // For browsers use XHR adapter\n      adapter = xhr;\n    } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n      // For node use HTTP adapter\n      adapter = xhr;\n    }\n    return adapter;\n  }\n\n  function stringifySafely(rawValue, parser, encoder) {\n    if (utils.isString(rawValue)) {\n      try {\n        (parser || JSON.parse)(rawValue);\n        return utils.trim(rawValue);\n      } catch (e) {\n        if (e.name !== 'SyntaxError') {\n          throw e;\n        }\n      }\n    }\n\n    return (encoder || JSON.stringify)(rawValue);\n  }\n\n  var defaults = {\n\n    transitional: transitional,\n\n    adapter: getDefaultAdapter(),\n\n    transformRequest: [function transformRequest(data, headers) {\n      normalizeHeaderName(headers, 'Accept');\n      normalizeHeaderName(headers, 'Content-Type');\n\n      var contentType = headers && headers['Content-Type'] || '';\n      var hasJSONContentType = contentType.indexOf('application/json') > -1;\n      var isObjectPayload = utils.isObject(data);\n\n      if (isObjectPayload && utils.isHTMLForm(data)) {\n        data = new FormData(data);\n      }\n\n      var isFormData = utils.isFormData(data);\n\n      if (isFormData) {\n        if (!hasJSONContentType) {\n          return data;\n        }\n        return hasJSONContentType ? JSON.stringify(formDataToJSON_1(data)) : data;\n      }\n\n      if (utils.isArrayBuffer(data) ||\n        utils.isBuffer(data) ||\n        utils.isStream(data) ||\n        utils.isFile(data) ||\n        utils.isBlob(data)\n      ) {\n        return data;\n      }\n      if (utils.isArrayBufferView(data)) {\n        return data.buffer;\n      }\n      if (utils.isURLSearchParams(data)) {\n        setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n        return data.toString();\n      }\n\n      var isFileList;\n\n      if (isObjectPayload) {\n        if (contentType.indexOf('application/x-www-form-urlencoded') !== -1) {\n          return toURLEncodedForm(data, this.formSerializer).toString();\n        }\n\n        if ((isFileList = utils.isFileList(data)) || contentType.indexOf('multipart/form-data') > -1) {\n          var _FormData = this.env && this.env.FormData;\n\n          return toFormData_1(\n            isFileList ? {'files[]': data} : data,\n            _FormData && new _FormData(),\n            this.formSerializer\n          );\n        }\n      }\n\n      if (isObjectPayload || hasJSONContentType ) {\n        setContentTypeIfUnset(headers, 'application/json');\n        return stringifySafely(data);\n      }\n\n      return data;\n    }],\n\n    transformResponse: [function transformResponse(data) {\n      var transitional = this.transitional || defaults.transitional;\n      var forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n      var JSONRequested = this.responseType === 'json';\n\n      if (data && utils.isString(data) && ((forcedJSONParsing && !this.responseType) || JSONRequested)) {\n        var silentJSONParsing = transitional && transitional.silentJSONParsing;\n        var strictJSONParsing = !silentJSONParsing && JSONRequested;\n\n        try {\n          return JSON.parse(data);\n        } catch (e) {\n          if (strictJSONParsing) {\n            if (e.name === 'SyntaxError') {\n              throw AxiosError_1.from(e, AxiosError_1.ERR_BAD_RESPONSE, this, null, this.response);\n            }\n            throw e;\n          }\n        }\n      }\n\n      return data;\n    }],\n\n    /**\n     * A timeout in milliseconds to abort a request. If set to 0 (default) a\n     * timeout is not created.\n     */\n    timeout: 0,\n\n    xsrfCookieName: 'XSRF-TOKEN',\n    xsrfHeaderName: 'X-XSRF-TOKEN',\n\n    maxContentLength: -1,\n    maxBodyLength: -1,\n\n    env: {\n      FormData: platform.classes.FormData,\n      Blob: platform.classes.Blob\n    },\n\n    validateStatus: function validateStatus(status) {\n      return status >= 200 && status < 300;\n    },\n\n    headers: {\n      common: {\n        'Accept': 'application/json, text/plain, */*'\n      }\n    }\n  };\n\n  utils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n    defaults.headers[method] = {};\n  });\n\n  utils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n    defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n  });\n\n  var defaults_1 = defaults;\n\n  /**\n   * Transform the data for a request or a response\n   *\n   * @param {Object|String} data The data to be transformed\n   * @param {Array} headers The headers for the request or response\n   * @param {Number} status HTTP status code\n   * @param {Array|Function} fns A single function or Array of functions\n   * @returns {*} The resulting transformed data\n   */\n  var transformData = function transformData(data, headers, status, fns) {\n    var context = this || defaults_1;\n    /*eslint no-param-reassign:0*/\n    utils.forEach(fns, function transform(fn) {\n      data = fn.call(context, data, headers, status);\n    });\n\n    return data;\n  };\n\n  var isCancel = function isCancel(value) {\n    return !!(value && value.__CANCEL__);\n  };\n\n  /**\n   * Throws a `CanceledError` if cancellation has been requested.\n   */\n  function throwIfCancellationRequested(config) {\n    if (config.cancelToken) {\n      config.cancelToken.throwIfRequested();\n    }\n\n    if (config.signal && config.signal.aborted) {\n      throw new CanceledError_1();\n    }\n  }\n\n  /**\n   * Dispatch a request to the server using the configured adapter.\n   *\n   * @param {object} config The config that is to be used for the request\n   * @returns {Promise} The Promise to be fulfilled\n   */\n  var dispatchRequest = function dispatchRequest(config) {\n    throwIfCancellationRequested(config);\n\n    // Ensure headers exist\n    config.headers = config.headers || {};\n\n    // Transform request data\n    config.data = transformData.call(\n      config,\n      config.data,\n      config.headers,\n      null,\n      config.transformRequest\n    );\n\n    normalizeHeaderName(config.headers, 'Accept');\n    normalizeHeaderName(config.headers, 'Content-Type');\n\n    // Flatten headers\n    config.headers = utils.merge(\n      config.headers.common || {},\n      config.headers[config.method] || {},\n      config.headers\n    );\n\n    utils.forEach(\n      ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n      function cleanHeaderConfig(method) {\n        delete config.headers[method];\n      }\n    );\n\n    var adapter = config.adapter || defaults_1.adapter;\n\n    return adapter(config).then(function onAdapterResolution(response) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      response.data = transformData.call(\n        config,\n        response.data,\n        response.headers,\n        response.status,\n        config.transformResponse\n      );\n\n      return response;\n    }, function onAdapterRejection(reason) {\n      if (!isCancel(reason)) {\n        throwIfCancellationRequested(config);\n\n        // Transform response data\n        if (reason && reason.response) {\n          reason.response.data = transformData.call(\n            config,\n            reason.response.data,\n            reason.response.headers,\n            reason.response.status,\n            config.transformResponse\n          );\n        }\n      }\n\n      return Promise.reject(reason);\n    });\n  };\n\n  /**\n   * Config-specific merge-function which creates a new config-object\n   * by merging two configuration objects together.\n   *\n   * @param {Object} config1\n   * @param {Object} config2\n   * @returns {Object} New object resulting from merging config2 to config1\n   */\n  var mergeConfig = function mergeConfig(config1, config2) {\n    // eslint-disable-next-line no-param-reassign\n    config2 = config2 || {};\n    var config = {};\n\n    function getMergedValue(target, source) {\n      if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n        return utils.merge(target, source);\n      } else if (utils.isPlainObject(source)) {\n        return utils.merge({}, source);\n      } else if (utils.isArray(source)) {\n        return source.slice();\n      }\n      return source;\n    }\n\n    // eslint-disable-next-line consistent-return\n    function mergeDeepProperties(prop) {\n      if (!utils.isUndefined(config2[prop])) {\n        return getMergedValue(config1[prop], config2[prop]);\n      } else if (!utils.isUndefined(config1[prop])) {\n        return getMergedValue(undefined, config1[prop]);\n      }\n    }\n\n    // eslint-disable-next-line consistent-return\n    function valueFromConfig2(prop) {\n      if (!utils.isUndefined(config2[prop])) {\n        return getMergedValue(undefined, config2[prop]);\n      }\n    }\n\n    // eslint-disable-next-line consistent-return\n    function defaultToConfig2(prop) {\n      if (!utils.isUndefined(config2[prop])) {\n        return getMergedValue(undefined, config2[prop]);\n      } else if (!utils.isUndefined(config1[prop])) {\n        return getMergedValue(undefined, config1[prop]);\n      }\n    }\n\n    // eslint-disable-next-line consistent-return\n    function mergeDirectKeys(prop) {\n      if (prop in config2) {\n        return getMergedValue(config1[prop], config2[prop]);\n      } else if (prop in config1) {\n        return getMergedValue(undefined, config1[prop]);\n      }\n    }\n\n    var mergeMap = {\n      'url': valueFromConfig2,\n      'method': valueFromConfig2,\n      'data': valueFromConfig2,\n      'baseURL': defaultToConfig2,\n      'transformRequest': defaultToConfig2,\n      'transformResponse': defaultToConfig2,\n      'paramsSerializer': defaultToConfig2,\n      'timeout': defaultToConfig2,\n      'timeoutMessage': defaultToConfig2,\n      'withCredentials': defaultToConfig2,\n      'adapter': defaultToConfig2,\n      'responseType': defaultToConfig2,\n      'xsrfCookieName': defaultToConfig2,\n      'xsrfHeaderName': defaultToConfig2,\n      'onUploadProgress': defaultToConfig2,\n      'onDownloadProgress': defaultToConfig2,\n      'decompress': defaultToConfig2,\n      'maxContentLength': defaultToConfig2,\n      'maxBodyLength': defaultToConfig2,\n      'beforeRedirect': defaultToConfig2,\n      'transport': defaultToConfig2,\n      'httpAgent': defaultToConfig2,\n      'httpsAgent': defaultToConfig2,\n      'cancelToken': defaultToConfig2,\n      'socketPath': defaultToConfig2,\n      'responseEncoding': defaultToConfig2,\n      'validateStatus': mergeDirectKeys\n    };\n\n    utils.forEach(Object.keys(config1).concat(Object.keys(config2)), function computeConfigValue(prop) {\n      var merge = mergeMap[prop] || mergeDeepProperties;\n      var configValue = merge(prop);\n      (utils.isUndefined(configValue) && merge !== mergeDirectKeys) || (config[prop] = configValue);\n    });\n\n    return config;\n  };\n\n  var data = {\n    \"version\": \"1.0.0-alpha.1\"\n  };\n\n  var VERSION = data.version;\n\n\n  var validators$1 = {};\n\n  // eslint-disable-next-line func-names\n  ['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach(function(type, i) {\n    validators$1[type] = function validator(thing) {\n      return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n    };\n  });\n\n  var deprecatedWarnings = {};\n\n  /**\n   * Transitional option validator\n   * @param {function|boolean?} validator - set to false if the transitional option has been removed\n   * @param {string?} version - deprecated version / removed since version\n   * @param {string?} message - some message with additional info\n   * @returns {function}\n   */\n  validators$1.transitional = function transitional(validator, version, message) {\n    function formatMessage(opt, desc) {\n      return '[Axios v' + VERSION + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n    }\n\n    // eslint-disable-next-line func-names\n    return function(value, opt, opts) {\n      if (validator === false) {\n        throw new AxiosError_1(\n          formatMessage(opt, ' has been removed' + (version ? ' in ' + version : '')),\n          AxiosError_1.ERR_DEPRECATED\n        );\n      }\n\n      if (version && !deprecatedWarnings[opt]) {\n        deprecatedWarnings[opt] = true;\n        // eslint-disable-next-line no-console\n        console.warn(\n          formatMessage(\n            opt,\n            ' has been deprecated since v' + version + ' and will be removed in the near future'\n          )\n        );\n      }\n\n      return validator ? validator(value, opt, opts) : true;\n    };\n  };\n\n  /**\n   * Assert object's properties type\n   * @param {object} options\n   * @param {object} schema\n   * @param {boolean?} allowUnknown\n   */\n\n  function assertOptions(options, schema, allowUnknown) {\n    if (typeof options !== 'object') {\n      throw new AxiosError_1('options must be an object', AxiosError_1.ERR_BAD_OPTION_VALUE);\n    }\n    var keys = Object.keys(options);\n    var i = keys.length;\n    while (i-- > 0) {\n      var opt = keys[i];\n      var validator = schema[opt];\n      if (validator) {\n        var value = options[opt];\n        var result = value === undefined || validator(value, opt, options);\n        if (result !== true) {\n          throw new AxiosError_1('option ' + opt + ' must be ' + result, AxiosError_1.ERR_BAD_OPTION_VALUE);\n        }\n        continue;\n      }\n      if (allowUnknown !== true) {\n        throw new AxiosError_1('Unknown option ' + opt, AxiosError_1.ERR_BAD_OPTION);\n      }\n    }\n  }\n\n  var validator = {\n    assertOptions: assertOptions,\n    validators: validators$1\n  };\n\n  var validators = validator.validators;\n  /**\n   * Create a new instance of Axios\n   *\n   * @param {Object} instanceConfig The default config for the instance\n   */\n  function Axios(instanceConfig) {\n    this.defaults = instanceConfig;\n    this.interceptors = {\n      request: new InterceptorManager_1(),\n      response: new InterceptorManager_1()\n    };\n  }\n\n  /**\n   * Dispatch a request\n   *\n   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)\n   * @param {?Object} config\n   */\n  Axios.prototype.request = function request(configOrUrl, config) {\n    /*eslint no-param-reassign:0*/\n    // Allow for axios('example/url'[, config]) a la fetch API\n    if (typeof configOrUrl === 'string') {\n      config = config || {};\n      config.url = configOrUrl;\n    } else {\n      config = configOrUrl || {};\n    }\n\n    config = mergeConfig(this.defaults, config);\n\n    // Set config.method\n    if (config.method) {\n      config.method = config.method.toLowerCase();\n    } else if (this.defaults.method) {\n      config.method = this.defaults.method.toLowerCase();\n    } else {\n      config.method = 'get';\n    }\n\n    var transitional = config.transitional;\n\n    if (transitional !== undefined) {\n      validator.assertOptions(transitional, {\n        silentJSONParsing: validators.transitional(validators.boolean),\n        forcedJSONParsing: validators.transitional(validators.boolean),\n        clarifyTimeoutError: validators.transitional(validators.boolean)\n      }, false);\n    }\n\n    // filter out skipped interceptors\n    var requestInterceptorChain = [];\n    var synchronousRequestInterceptors = true;\n    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n      if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n        return;\n      }\n\n      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    var responseInterceptorChain = [];\n    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    var promise;\n\n    if (!synchronousRequestInterceptors) {\n      var chain = [dispatchRequest, undefined];\n\n      Array.prototype.unshift.apply(chain, requestInterceptorChain);\n      chain = chain.concat(responseInterceptorChain);\n\n      promise = Promise.resolve(config);\n      while (chain.length) {\n        promise = promise.then(chain.shift(), chain.shift());\n      }\n\n      return promise;\n    }\n\n\n    var newConfig = config;\n    while (requestInterceptorChain.length) {\n      var onFulfilled = requestInterceptorChain.shift();\n      var onRejected = requestInterceptorChain.shift();\n      try {\n        newConfig = onFulfilled(newConfig);\n      } catch (error) {\n        onRejected(error);\n        break;\n      }\n    }\n\n    try {\n      promise = dispatchRequest(newConfig);\n    } catch (error) {\n      return Promise.reject(error);\n    }\n\n    while (responseInterceptorChain.length) {\n      promise = promise.then(responseInterceptorChain.shift(), responseInterceptorChain.shift());\n    }\n\n    return promise;\n  };\n\n  Axios.prototype.getUri = function getUri(config) {\n    config = mergeConfig(this.defaults, config);\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    return buildURL(fullPath, config.params, config.paramsSerializer);\n  };\n\n  // Provide aliases for supported request methods\n  utils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n    /*eslint func-names:0*/\n    Axios.prototype[method] = function(url, config) {\n      return this.request(mergeConfig(config || {}, {\n        method: method,\n        url: url,\n        data: (config || {}).data\n      }));\n    };\n  });\n\n  utils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n    /*eslint func-names:0*/\n\n    function generateHTTPMethod(isForm) {\n      return function httpMethod(url, data, config) {\n        return this.request(mergeConfig(config || {}, {\n          method: method,\n          headers: isForm ? {\n            'Content-Type': 'multipart/form-data'\n          } : {},\n          url: url,\n          data: data\n        }));\n      };\n    }\n\n    Axios.prototype[method] = generateHTTPMethod();\n\n    Axios.prototype[method + 'Form'] = generateHTTPMethod(true);\n  });\n\n  var Axios_1 = Axios;\n\n  /**\n   * A `CancelToken` is an object that can be used to request cancellation of an operation.\n   *\n   * @class\n   * @param {Function} executor The executor function.\n   */\n  function CancelToken(executor) {\n    if (typeof executor !== 'function') {\n      throw new TypeError('executor must be a function.');\n    }\n\n    var resolvePromise;\n\n    this.promise = new Promise(function promiseExecutor(resolve) {\n      resolvePromise = resolve;\n    });\n\n    var token = this;\n\n    // eslint-disable-next-line func-names\n    this.promise.then(function(cancel) {\n      if (!token._listeners) return;\n\n      var i = token._listeners.length;\n\n      while (i-- > 0) {\n        token._listeners[i](cancel);\n      }\n      token._listeners = null;\n    });\n\n    // eslint-disable-next-line func-names\n    this.promise.then = function(onfulfilled) {\n      var _resolve;\n      // eslint-disable-next-line func-names\n      var promise = new Promise(function(resolve) {\n        token.subscribe(resolve);\n        _resolve = resolve;\n      }).then(onfulfilled);\n\n      promise.cancel = function reject() {\n        token.unsubscribe(_resolve);\n      };\n\n      return promise;\n    };\n\n    executor(function cancel(message, config, request) {\n      if (token.reason) {\n        // Cancellation has already been requested\n        return;\n      }\n\n      token.reason = new CanceledError_1(message, config, request);\n      resolvePromise(token.reason);\n    });\n  }\n\n  /**\n   * Throws a `CanceledError` if cancellation has been requested.\n   */\n  CancelToken.prototype.throwIfRequested = function throwIfRequested() {\n    if (this.reason) {\n      throw this.reason;\n    }\n  };\n\n  /**\n   * Subscribe to the cancel signal\n   */\n\n  CancelToken.prototype.subscribe = function subscribe(listener) {\n    if (this.reason) {\n      listener(this.reason);\n      return;\n    }\n\n    if (this._listeners) {\n      this._listeners.push(listener);\n    } else {\n      this._listeners = [listener];\n    }\n  };\n\n  /**\n   * Unsubscribe from the cancel signal\n   */\n\n  CancelToken.prototype.unsubscribe = function unsubscribe(listener) {\n    if (!this._listeners) {\n      return;\n    }\n    var index = this._listeners.indexOf(listener);\n    if (index !== -1) {\n      this._listeners.splice(index, 1);\n    }\n  };\n\n  /**\n   * Returns an object that contains a new `CancelToken` and a function that, when called,\n   * cancels the `CancelToken`.\n   */\n  CancelToken.source = function source() {\n    var cancel;\n    var token = new CancelToken(function executor(c) {\n      cancel = c;\n    });\n    return {\n      token: token,\n      cancel: cancel\n    };\n  };\n\n  var CancelToken_1 = CancelToken;\n\n  /**\n   * Syntactic sugar for invoking a function and expanding an array for arguments.\n   *\n   * Common use case would be to use `Function.prototype.apply`.\n   *\n   *  ```js\n   *  function f(x, y, z) {}\n   *  var args = [1, 2, 3];\n   *  f.apply(null, args);\n   *  ```\n   *\n   * With `spread` this example can be re-written.\n   *\n   *  ```js\n   *  spread(function(x, y, z) {})([1, 2, 3]);\n   *  ```\n   *\n   * @param {Function} callback\n   * @returns {Function}\n   */\n  var spread = function spread(callback) {\n    return function wrap(arr) {\n      return callback.apply(null, arr);\n    };\n  };\n\n  /**\n   * Determines whether the payload is an error thrown by Axios\n   *\n   * @param {*} payload The value to test\n   * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n   */\n  var isAxiosError = function isAxiosError(payload) {\n    return utils.isObject(payload) && (payload.isAxiosError === true);\n  };\n\n  /**\n   * Create an instance of Axios\n   *\n   * @param {Object} defaultConfig The default config for the instance\n   * @return {Axios} A new instance of Axios\n   */\n  function createInstance(defaultConfig) {\n    var context = new Axios_1(defaultConfig);\n    var instance = bind(Axios_1.prototype.request, context);\n\n    // Copy axios.prototype to instance\n    utils.extend(instance, Axios_1.prototype, context);\n\n    // Copy context to instance\n    utils.extend(instance, context);\n\n    // Factory for creating new instances\n    instance.create = function create(instanceConfig) {\n      return createInstance(mergeConfig(defaultConfig, instanceConfig));\n    };\n\n    return instance;\n  }\n\n  // Create the default instance to be exported\n  var axios = createInstance(defaults_1);\n\n  // Expose Axios class to allow class inheritance\n  axios.Axios = Axios_1;\n\n  // Expose Cancel & CancelToken\n  axios.CanceledError = CanceledError_1;\n  axios.CancelToken = CancelToken_1;\n  axios.isCancel = isCancel;\n  axios.VERSION = data.version;\n  axios.toFormData = toFormData_1;\n\n  // Expose AxiosError class\n  axios.AxiosError = AxiosError_1;\n\n  // alias for CanceledError for backward compatibility\n  axios.Cancel = axios.CanceledError;\n\n  // Expose all/spread\n  axios.all = function all(promises) {\n    return Promise.all(promises);\n  };\n  axios.spread = spread;\n\n  // Expose isAxiosError\n  axios.isAxiosError = isAxiosError;\n\n  axios.formToJSON = function(thing) {\n    return formDataToJSON_1(utils.isHTMLForm(thing) ? new FormData(thing) : thing);\n  };\n\n  var axios_1 = axios;\n\n  // Allow use of default import syntax in TypeScript\n  var _default = axios;\n  axios_1.default = _default;\n\n  return axios_1;\n\n}));\n//# sourceMappingURL=axios.js.map\n"],"mappings":"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"}]}