<template>
  <section class="add">
    <el-form ref="form" :model="form" label-width="100px">
      <el-page-header @back="goBack" content="推荐系统">
      </el-page-header>
    <h2>推荐漏洞扫描工具</h2>
    <el-main>
      <el-form-item label="需求"> 利用收集到的信息，如ip地址，各端口的应用，系统信息等
        <el-input v-model="form.tactics"></el-input>
      </el-form-item>
    <el-form-item>
      <el-button type="primary" @click="goBack()">上一步</el-button>
       <el-button type="primary" @click="TJ()">推荐漏洞扫描工具</el-button>
      <el-button type="primary" @click="next()">下一步</el-button>
    </el-form-item>
    <el-form-item label="" v-model="showClass" v-if="showClass==true">
      信息
      <el-input type="textarea" v-model="form.test[form.index]"></el-input>
      标识id
      <el-input type="textarea" v-model="form.test[form.index+1]"></el-input>
      工具
      <el-input type="textarea" v-model="form.test[form.index+2]"></el-input>
      方法
      <el-input type="textarea" v-model="form.test[form.index+3]"></el-input>
      期望结果
      <el-input type="textarea" v-model="form.result"></el-input>
      查询结果
      <el-input type="textarea" v-model="form.test1"></el-input>
      数据来源
      <el-input type="textarea" v-model="form.desc"></el-input>
      <el-button type="primary" @click="flash()">下一条</el-button>
    </el-form-item>
    </el-main>
    </el-form>
     <!-- <div><img src="\images\01.png" alt=""></div> -->
      <!-- <el-button type="button" @click="getResult()">获取</el-button> -->
      <!-- <p>{{form.test}}</p> -->
      <!-- <p>{{test1}}</p> -->
      <!-- <div>{{form.tactics}}</div> -->


  
  <section class="img2">
    <!-- <el-input type="textarea" v-model="form.toolname"></el-input>   -->
    <!-- <el-input type="textarea">示例</el-input> -->
    <!-- <div>信息收集内容</div> -->
    <div>渗透测试--漏洞扫描</div>
    <div>漏洞扫描是进行渗透测试的第二步。漏洞扫描是指基于漏洞数据库，通过扫描等手段对指定的远程或者本地计算机系统
      的安全脆弱性进行检测，发现可利用漏洞来进行渗透测试。漏洞扫描的主要目标是扫描出漏洞信息。本页为漏洞扫描工具的推荐，可以推荐出一些工具及使用方法进行漏洞扫描。
    </div>

  </section>
      
  </section>


</template>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>


<script>



export default {
  data() {
    return {
      form: { //表单数据初始化
        tactics: null,
        desc: 'neo4j',
        test:'test',
        result:'扫描出漏洞信息',
        test1:'null',
        index:0
      },
       showClass: false  
    };
  },

  methods: {
    next(){
    this.$router.push({path: '/Recommended penetration steps'})
    },
    mounted(){
    location.reload();},
    TJ(){
    this.$router.push({path:'Recommended vulnerability scanning methods tool?name='+this.form.tactics})},
    flash(){
      if (this.form.index<this.form.test.length-4){
      this.form.index=this.form.index+4;}
      else{
        alert('没有了');
        this.mounted();
      }
    },
    goBack(){
        this.$router.back()
    },
    getResult:function() {
        var _this = this
        _this.$axios.get('http://127.0.0.1:5000/api/ls/?name='+_this.form.tactics).then
        (function(resp){
          console.log(resp.data.result);
          _this.form.test=resp.data.result;
        },
        function(err){})
    },
    onSubmit() {
      let examDate = this.formatTime(this.form.examDate)
      this.form.examDate = examDate.substr(0,10)
      this.$axios(`/api/examManagePaperId`).then(res => {
        this.form.paperId = res.data.data.paperId + 1 
        this.$axios({
          url: '/api/exam',
          method: 'post', 
          data: {
            ...this.form
          }
        }).then(res => {
          if(res.data.code == 200) {
            this.$message({
              message: '数据添加成功',
              type: 'success'
            })
            this.$router.push({path: '/selectExam'})
          }
        })
      })
    },
    
  }
};
</script>

<style>
.add {
  padding: 0px 40px;
  width: 600px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04);
  height:1000px;
  position: absolute;
  left: 50%;
  top:50%;
  transform: translate(-50%,-30%);

}
.img2 {
  padding: 0px 40px;
  width: 300px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, .12), 0 0 6px rgba(0, 0, 0, .04);
  height:500px;
  position: absolute;
  left: -58%;
  top:5%;
  transform: translate(0%,0%);

}
</style>
